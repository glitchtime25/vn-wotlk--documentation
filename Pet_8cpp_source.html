<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMaNGOS_WoTLK: Pet.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CMaNGOS_WoTLK
   &#160;<span id="projectnumber">0b6ed145724bbfe54f426dc34e27de563eb3bc54</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('Pet_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Pet.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Pet_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * This file is part of the CMaNGOS Project. See AUTHORS file for Copyright information</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * (at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * GNU General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pet_8h.html">Entities/Pet.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DatabaseEnv_8h.html">Database/DatabaseEnv.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Log_8h.html">Log.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="WorldPacket_8h.html">Server/WorldPacket.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ObjectMgr_8h.html">Globals/ObjectMgr.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SpellMgr_8h.html">Spells/SpellMgr.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Formulas_8h.html">Tools/Formulas.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SpellAuras_8h.html">Spells/SpellAuras.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Unit_8h.html">Entities/Unit.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transports_8h.html">Entities/Transports.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classPet.html#ac3a690118e54c22a407664e3a1db8317">   30</a></span>&#160;<a class="code" href="classPet.html#ac3a690118e54c22a407664e3a1db8317">Pet::Pet</a>(<a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471">PetType</a> type) :</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="classCreature.html">Creature</a>(<a class="code" href="Creature_8h.html#a0adc01a263d6c377feabd69772dd957aa9ec8abad4095c21592d208efdc4a866a">CREATURE_SUBTYPE_PET</a>),</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    m_resetTalentsCost(0), m_resetTalentsTime(0), m_usedTalentCount(0),</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    m_removed(false), m_happinessTimer(7500), m_petType(type), m_duration(0),</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    m_loading(false),</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    m_declinedname(nullptr), m_petModeFlags(<a class="code" href="Pet_8h.html#a484a86780410fb960031b81ec70edf06a541261899d040191b719300aa6710dcb">PET_MODE_DEFAULT</a>), m_originalCharminfo(nullptr), m_inStatsUpdate(false), m_dismissDisabled(false),</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    m_controllableGuardian(false), m_doNotFollowMounted(false)</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="classWorldObject.html#a185b15e6aa5be8ab5f914f8a27cfea06">m_name</a> = <span class="stringliteral">&quot;Pet&quot;</span>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// pets always have a charminfo, even if they are not actually charmed</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="classPet.html#a0bbb592c195c10bf837b54643755653c">InitCharmInfo</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="classPet.html#aa4ec4b6b3b4dccd3cbed246f77aab372">   44</a></span>&#160;<a class="code" href="classPet.html#aa4ec4b6b3b4dccd3cbed246f77aab372">Pet::~Pet</a>()</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">delete</span> <a class="code" href="classPet.html#a97378444983f0395005ce68ff5918b11">m_originalCharminfo</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">delete</span> <a class="code" href="classPet.html#a245b16b47d16108f7871c482bb36db8b">m_declinedname</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classPet.html#a3c482ec7706059ac839d59cb54431671">   50</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a3c482ec7706059ac839d59cb54431671">Pet::AddToWorld</a>()</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classObject.html#a8acb91caf94322dc0289d3e60eb8e0e7">IsInWorld</a>())</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="classMap.html#ac5633c301d59c2214841acab2ffb4269">GetObjectsStore</a>().<a class="code" href="classTypeUnorderedMapContainer.html#acb2014a46528eee4b2a99ac287d46754">insert</a>&lt;<a class="code" href="classPet.html">Pet</a>&gt;(<a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>(), (<a class="code" href="classPet.html">Pet</a>*)<span class="keyword">this</span>);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="classUnit.html#a2564e1683ba157cdc4ccc9c9a4b004e1">Unit::AddToWorld</a>();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a9d623f0127c82864f885e09a9ddd2eb8">isControlled</a>())</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>())</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="keywordflow">if</span> (owner-&gt;IsPlayer())</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                <span class="keyword">static_cast&lt;</span><a class="code" href="classPlayer.html">Player</a>*<span class="keyword">&gt;</span>(owner)-&gt;AddControllable(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classPet.html#a10d8a224dc5726395aa872a6caaf9429">   64</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a10d8a224dc5726395aa872a6caaf9429">Pet::RemoveFromWorld</a>()</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classObject.html#a8acb91caf94322dc0289d3e60eb8e0e7">IsInWorld</a>())</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="classMap.html#ac5633c301d59c2214841acab2ffb4269">GetObjectsStore</a>().<a class="code" href="classTypeUnorderedMapContainer.html#aa81e9b5834a206b269129703d1b6053c">erase</a>&lt;<a class="code" href="classPet.html">Pet</a>&gt;(<a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>(), (<a class="code" href="classPet.html">Pet</a>*)<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="classUnit.html#ac328769b044e8f267d10481ac112e097">Unit::RemoveFromWorld</a>();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classPet.html#aff5ffb9a757e225ce15e00e718a335d9">   74</a></span>&#160;<a class="code" href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cb">SpellCastResult</a> <a class="code" href="classPet.html#aff5ffb9a757e225ce15e00e718a335d9">Pet::TryLoadFromDB</a>(<a class="code" href="classUnit.html">Unit</a>* owner, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> petentry <span class="comment">/*= 0*/</span>, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> petnumber <span class="comment">/*= 0*/</span>, <span class="keywordtype">bool</span> current <span class="comment">/*= false*/</span>, <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471">PetType</a> mandatoryPetType <span class="comment">/*= MAX_PET_TYPE*/</span>)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> ownerid = owner-&gt;<a class="code" href="classObject.html#a4777844356842a389621c1bad1433109">GetGUIDLow</a>();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    std::ostringstream request;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">//                 0      1          2               3</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    request &lt;&lt; <span class="stringliteral">&quot;SELECT entry, curhealth, CreatedBySpell, PetType &quot;</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (petnumber)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="comment">// known petnumber entry</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        request &lt;&lt; <span class="stringliteral">&quot;FROM character_pet WHERE owner = &#39;&quot;</span> &lt;&lt; ownerid &lt;&lt; <span class="stringliteral">&quot;&#39; AND id = &#39;&quot;</span> &lt;&lt; petnumber &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (current)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="comment">// current pet (slot 0)</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        request &lt;&lt; <span class="stringliteral">&quot;FROM character_pet WHERE owner = &#39;&quot;</span> &lt;&lt; ownerid &lt;&lt; <span class="stringliteral">&quot;&#39; AND slot = &#39;&quot;</span> &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>) &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (petentry)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="comment">// known petentry entry (unique for summoned pet, but non unique for hunter pet (only from current or not stabled pets)</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        request &lt;&lt; <span class="stringliteral">&quot;FROM character_pet WHERE owner = &#39;&quot;</span> &lt;&lt; ownerid &lt;&lt; <span class="stringliteral">&quot;&#39; AND entry = &#39;&quot;</span> &lt;&lt; petentry &lt;&lt; <span class="stringliteral">&quot;&#39; AND (slot = &#39;&quot;</span> &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>) &lt;&lt; <span class="stringliteral">&quot;&#39; OR slot &gt; &#39;&quot;</span> &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fda20411938f7cc7a5140e3b7006d54d851">PET_SAVE_LAST_STABLE_SLOT</a>) &lt;&lt; <span class="stringliteral">&quot;&#39;)&quot;</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="comment">// any current or other non-stabled pet (for hunter &quot;call pet&quot;)</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        request &lt;&lt; <span class="stringliteral">&quot;FROM character_pet WHERE owner = &#39;&quot;</span> &lt;&lt; ownerid &lt;&lt; <span class="stringliteral">&quot;&#39; AND (slot = &#39;&quot;</span> &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>) &lt;&lt; <span class="stringliteral">&quot;&#39; OR slot &gt; &#39;&quot;</span> &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fda20411938f7cc7a5140e3b7006d54d851">PET_SAVE_LAST_STABLE_SLOT</a>) &lt;&lt; <span class="stringliteral">&quot;&#39;)&quot;</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="classQueryResult.html">QueryResult</a>* result = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;%s&quot;</span>, request.str().c_str());</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (!result)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbaefb143fec77b4fcde0bc45deb3c38b7c">SPELL_FAILED_NO_PET</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="classField.html">Field</a>* fields = result-&gt;<a class="code" href="classQueryResult.html#ae59bcb12d59b9a369953be91ddb5c446">Fetch</a>();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    petentry = fields[0].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> savedHealth = fields[1].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> summon_spell_id = fields[2].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471">PetType</a> petType = <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471">PetType</a>(fields[3].GetUInt8());</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// update for case of current pet &quot;slot = 0&quot;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">if</span> (!petentry)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbaefb143fec77b4fcde0bc45deb3c38b7c">SPELL_FAILED_NO_PET</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="structCreatureInfo.html">CreatureInfo</a> <span class="keyword">const</span>* creatureInfo = <a class="code" href="classObjectMgr.html#afc7d19c6dafd93035f5248e5ab0c234b">ObjectMgr::GetCreatureTemplate</a>(petentry);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (!creatureInfo)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outError(<span class="stringliteral">&quot;Pet entry %u does not exist but used at pet load (owner: %s).&quot;</span>, petentry, owner-&gt;<a class="code" href="classObject.html#a5c2f31b9fb0a083ff4caca3de93fac90">GetGuidStr</a>().c_str());</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbaefb143fec77b4fcde0bc45deb3c38b7c">SPELL_FAILED_NO_PET</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="structSpellEntry.html">SpellEntry</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="SQLStorages_8cpp.html#a6e07b93ae2737d35f4214041a6f735f4">sSpellTemplate</a>.<a class="code" href="classSQLStorage.html#ace42ec0424ef41d187eb7c1bdcfa8c62">LookupEntry</a>&lt;<a class="code" href="structSpellEntry.html">SpellEntry</a>&gt;(summon_spell_id);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classPet.html#a92463c5ce83b9c8f0a74ccd685a86078">isTemporarySummoned</a> = spellInfo &amp;&amp; <a class="code" href="SpellMgr_8cpp.html#ac8cbcaf933a719c961ea28ae0be73c10">GetSpellDuration</a>(spellInfo) &gt; 0;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// check temporary summoned pets like mage water elemental</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (current &amp;&amp; <a class="code" href="classPet.html#a92463c5ce83b9c8f0a74ccd685a86078">isTemporarySummoned</a>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbaefb143fec77b4fcde0bc45deb3c38b7c">SPELL_FAILED_NO_PET</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="classPlayer.html">Player</a> <span class="keyword">const</span>* ownerPlayer = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() == <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        ownerPlayer = <span class="keyword">static_cast&lt;</span><a class="code" href="classPlayer.html">Player</a> const*<span class="keyword">&gt;</span>(owner);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (petType == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a> &amp;&amp; !creatureInfo-&gt;<a class="code" href="structCreatureInfo.html#a4f708c2c90352dbcfd9bb23cb66238b3">isTameable</a>(ownerPlayer ? ownerPlayer-&gt;<a class="code" href="classPlayer.html#a37acea1f67951ec8b125cae412ddbe4e">CanTameExoticPets</a>() : <span class="keyword">false</span>))</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbaefb143fec77b4fcde0bc45deb3c38b7c">SPELL_FAILED_NO_PET</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (!savedHealth)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbaaa8582c07f58c05e32b1885a14e8320a">SPELL_FAILED_TARGETS_DEAD</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span> (mandatoryPetType != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471acb8090a59681ea6d194c6a00b73423ea">MAX_PET_TYPE</a> &amp;&amp; petType != mandatoryPetType)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbabac1a9f442523ff297fbca0beea649b3">SPELL_FAILED_BAD_TARGETS</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbadb56426fd2113c3ff3ff3d1815d79fa6">SPELL_CAST_OK</a>; <span class="comment">// If errors occur down the line, one must think about data consistency</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="classPet.html#a85eef417a0d793d5c087fcc7d818dd46">  144</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a85eef417a0d793d5c087fcc7d818dd46">Pet::LoadPetFromDB</a>(<a class="code" href="classPlayer.html">Player</a>* owner, <a class="code" href="structPosition.html">Position</a> <span class="keyword">const</span>&amp; spawnPos, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> petentry <span class="comment">/*= 0*/</span>, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> petnumber <span class="comment">/*= 0*/</span>, <span class="keywordtype">bool</span> current <span class="comment">/*= false*/</span>, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> healthPercentage <span class="comment">/*= 0*/</span>, <span class="keywordtype">bool</span> permanentOnly <span class="comment">/*= false*/</span>, <span class="keywordtype">bool</span> forced <span class="comment">/*= false*/</span>)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="classPet.html#a1223cf843907fc54e5428e12b3f85de6">m_loading</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> ownerid = owner-&gt;<a class="code" href="classObject.html#a4777844356842a389621c1bad1433109">GetGUIDLow</a>();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="classQueryResult.html">QueryResult</a>* result;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (petnumber)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">// known petnumber entry                  0   1      2(?)   3        4      5    6           7     8     9        10         11       12            13      14        15                 16                 17              18</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        result = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;SELECT id, entry, owner, modelid, level, exp, Reactstate, slot, name, renamed, curhealth, curmana, curhappiness, abdata, savetime, resettalents_cost, resettalents_time, CreatedBySpell, PetType &quot;</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                          <span class="stringliteral">&quot;FROM character_pet WHERE owner = &#39;%u&#39; AND id = &#39;%u&#39;&quot;</span>,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                          ownerid, petnumber);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (current)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">// current pet (slot 0)                   0   1      2(?)   3        4      5    6           7     8     9        10         11       12            13      14        15                 16                 17              18</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        result = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;SELECT id, entry, owner, modelid, level, exp, Reactstate, slot, name, renamed, curhealth, curmana, curhappiness, abdata, savetime, resettalents_cost, resettalents_time, CreatedBySpell, PetType &quot;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                          <span class="stringliteral">&quot;FROM character_pet WHERE owner = &#39;%u&#39; AND slot = &#39;%u&#39;&quot;</span>,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                          ownerid, <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (petentry)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="comment">// known petentry entry (unique for summoned pet, but non unique for hunter pet (only from current or not stabled pets)</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="comment">//                                        0   1      2(?)   3        4      5    6           7     8     9        10         11       12           13       14        15                 16                 17              18</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        result = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;SELECT id, entry, owner, modelid, level, exp, Reactstate, slot, name, renamed, curhealth, curmana, curhappiness, abdata, savetime, resettalents_cost, resettalents_time, CreatedBySpell, PetType &quot;</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                          <span class="stringliteral">&quot;FROM character_pet WHERE owner = &#39;%u&#39; AND entry = &#39;%u&#39; AND (slot = &#39;%u&#39; OR slot &gt; &#39;%u&#39;) &quot;</span>,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                          ownerid, petentry, <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>, <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fda20411938f7cc7a5140e3b7006d54d851">PET_SAVE_LAST_STABLE_SLOT</a>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">// any current or other non-stabled pet (for hunter &quot;call pet&quot;)</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">//                                        0   1      2(?)   3        4      5    6           7     8     9        10         11       12            13      14        15                 16                 17              18</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        result = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;SELECT id, entry, owner, modelid, level, exp, Reactstate, slot, name, renamed, curhealth, curmana, curhappiness, abdata, savetime, resettalents_cost, resettalents_time, CreatedBySpell, PetType &quot;</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                          <span class="stringliteral">&quot;FROM character_pet WHERE owner = &#39;%u&#39; AND (slot = &#39;%u&#39; OR slot &gt; &#39;%u&#39;) &quot;</span>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                          ownerid, <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>, <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fda20411938f7cc7a5140e3b7006d54d851">PET_SAVE_LAST_STABLE_SLOT</a>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (!result)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="classField.html">Field</a>* fields = result-&gt;<a class="code" href="classQueryResult.html#ae59bcb12d59b9a369953be91ddb5c446">Fetch</a>();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// update for case of current pet &quot;slot = 0&quot;</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    petentry = fields[1].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (!petentry)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="structCreatureInfo.html">CreatureInfo</a> <span class="keyword">const</span>* creatureInfo = <a class="code" href="classObjectMgr.html#afc7d19c6dafd93035f5248e5ab0c234b">ObjectMgr::GetCreatureTemplate</a>(petentry);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (!creatureInfo)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outError(<span class="stringliteral">&quot;Pet entry %u does not exist but used at pet load (owner: %s).&quot;</span>, petentry, owner-&gt;<a class="code" href="classObject.html#a5c2f31b9fb0a083ff4caca3de93fac90">GetGuidStr</a>().c_str());</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> summon_spell_id = fields[17].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="structSpellEntry.html">SpellEntry</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="SQLStorages_8cpp.html#a6e07b93ae2737d35f4214041a6f735f4">sSpellTemplate</a>.<a class="code" href="classSQLStorage.html#ace42ec0424ef41d187eb7c1bdcfa8c62">LookupEntry</a>&lt;<a class="code" href="structSpellEntry.html">SpellEntry</a>&gt;(summon_spell_id);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (permanentOnly &amp;&amp; spellInfo &amp;&amp; <a class="code" href="SpellMgr_8cpp.html#ac8cbcaf933a719c961ea28ae0be73c10">GetSpellDuration</a>(spellInfo) &gt; 0)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471">PetType</a> pet_type = <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471">PetType</a>(fields[18].GetUInt8());</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> (pet_type == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">if</span> (!creatureInfo-&gt;<a class="code" href="structCreatureInfo.html#a4f708c2c90352dbcfd9bb23cb66238b3">isTameable</a>(owner-&gt;<a class="code" href="classPlayer.html#a37acea1f67951ec8b125cae412ddbe4e">CanTameExoticPets</a>()))</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="classPet.html#a0595dccf2ddfc73bffb69512ca6c79ce">m_petType</a> = pet_type;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> pet_number = fields[0].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (!forced &amp;&amp; owner-&gt;<a class="code" href="classPlayer.html#a7582cf98152936e05877bcbb1f7607e1">IsPetNeedBeTemporaryUnsummoned</a>(<span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment">// set temporary summon that way its possible if the player unmount to resummon it automaticaly</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        owner-&gt;<a class="code" href="classPlayer.html#a3a38363caa530e01a47e2414acc38711">SetTemporaryUnsummonedPetNumber</a>(pet_number);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// change pet slot directly in database</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#a05a126869fcd32e43c8db16ed63a2591">BeginTransaction</a>();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> ChangePetSlot_ID;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <a class="code" href="classSqlStatement.html">SqlStatement</a> ChangePetSlot = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(ChangePetSlot_ID, <span class="stringliteral">&quot;UPDATE character_pet SET slot = ? WHERE id = ? &quot;</span>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        ChangePetSlot.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>), pet_number);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#af4d03f875b7540de19eb1e8ccd0fb841">CommitTransaction</a>();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    owner-&gt;<a class="code" href="classPlayer.html#a3a38363caa530e01a47e2414acc38711">SetTemporaryUnsummonedPetNumber</a>(0);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="classMap.html">Map</a>* map = owner-&gt;<a class="code" href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="structCreatureCreatePos.html">CreatureCreatePos</a> pos(owner-&gt;<a class="code" href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>(), spawnPos.<a class="code" href="structPosition.html#af684446cbf0f6d53386686283da6dcc6">x</a>, spawnPos.<a class="code" href="structPosition.html#a54a6182b5f7539295b32255808897d3f">y</a>, spawnPos.<a class="code" href="structPosition.html#a5dc8c08d3d7209ba538ad21ba604aa44">z</a>, spawnPos.<a class="code" href="structPosition.html#ab03b4a5c58b5d266e2505bffc906d21e">o</a>, owner-&gt;<a class="code" href="classWorldObject.html#a0a471b58ac8905281008aa4a730c4093">GetPhaseMask</a>());</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> guid = pos.<a class="code" href="structCreatureCreatePos.html#a7482034b9612ec1b155cceffc344608a">GetMap</a>()-&gt;<a class="code" href="classMap.html#ae6d148d8a684f0fdb49211fc6524d2d0">GenerateLocalLowGuid</a>(<a class="code" href="ObjectGuid_8h.html#abe8666ac87665ba963053cdd2b014750a1615463418bf6aeaacb8df3af61b018e">HIGHGUID_PET</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a42cf6a2fc2dc5882396db1fc06fb6edc">Create</a>(guid, pos, creatureInfo, pet_number))</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// DK Permanent ghoul spell</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code" href="structSpellEntry.html#ab5ca60f93e4b1792578dcb5fe6b259e9">HasAttribute</a>(<a class="code" href="SpellDefines_8h.html#a7530a2997a6c89f362a5641d9f608fa9a2467e8933c194cde893ec0c92c331577">SPELL_ATTR_EX7_RECAST_ON_RESUMMON</a>) &amp;&amp; current &amp;&amp; !forced) <span class="comment">// must cast through spell in order to trigger correct ghoul CD</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="structPosition.html">Position</a> pos = <a class="code" href="classPet.html#a1730d31831f1e7077fb2ea5579eb95c1">Pet::GetPetSpawnPosition</a>(owner);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        owner-&gt;<a class="code" href="classUnit.html#a211876b6b1dcea2eedcc52e754093d70">CastSpell</a>(pos.<a class="code" href="structPosition.html#af684446cbf0f6d53386686283da6dcc6">x</a>, pos.<a class="code" href="structPosition.html#a54a6182b5f7539295b32255808897d3f">y</a>, pos.<a class="code" href="structPosition.html#a5dc8c08d3d7209ba538ad21ba604aa44">z</a>, summon_spell_id, <a class="code" href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29a899fa7df360462673111bbfbb0bbd00d">TRIGGERED_IGNORE_GCD</a> | <a class="code" href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29aaf2e6f2e4c3f497f195817316711147c">TRIGGERED_IGNORE_COOLDOWNS</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="classPet.html#a499659ccc6308ac8353080d13aad99c8">setPetType</a>(pet_type);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="classUnit.html#a0f9cefdf7214be9a606478618a2cdc6e">setFaction</a>(owner-&gt;<a class="code" href="classUnit.html#a9629129db92c05662079a6b36d61c610">GetFaction</a>());</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af6ab95e21ce3e6cd8f5f7ec4a3c5d24a">UNIT_CREATED_BY_SPELL</a>, summon_spell_id);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">// reget for sure use real creature info selected for Pet at load/creating</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="structCreatureInfo.html">CreatureInfo</a> <span class="keyword">const</span>* cinfo = <a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (cinfo-&gt;<a class="code" href="structCreatureInfo.html#ad6a14a407ef572de310d03f2315386e7">CreatureType</a> == <a class="code" href="SharedDefines_8h.html#a5bc40f1116d89138cda8ebd1a04694dfa39da882a0c94f36b30c6e24a8819bf40">CREATURE_TYPE_CRITTER</a>)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        pos.<a class="code" href="structCreatureCreatePos.html#a7482034b9612ec1b155cceffc344608a">GetMap</a>()-&gt;<a class="code" href="classMap.html#af928c75fd7374971a2abdc658c89e9d6">Add</a>((<a class="code" href="classCreature.html">Creature</a>*)<span class="keyword">this</span>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="classCreature.html#a9b1dbfcecf2abb5edc5d5b824ec8e139">AIM_Initialize</a>();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a684f1b79808da046218775009189b2e8">SetPetNumber</a>(pet_number, <a class="code" href="classPet.html#a9d623f0127c82864f885e09a9ddd2eb8">isControlled</a>());</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="classPet.html#afb2bcf12c0a0167c38e649bf52562f4b">SetOwnerGuid</a>(owner-&gt;<a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>());</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="classUnit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(fields[3].GetUInt32());</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="classUnit.html#aa16143de8ebccefd088f51b53ec84458">SetNativeDisplayId</a>(fields[3].GetUInt32());</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> petlevel = fields[4].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a10674c45e01f88895742624d8065dea7">UNIT_NPC_FLAGS</a>, <a class="code" href="group__game.html#gga020b49642bdc8ff68e087e36cf07fb97a7d75bb1546efb3a78c8ca3798667e2ef">UNIT_NPC_FLAG_NONE</a>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="classWorldObject.html#ab0e25e8aff1c21bb10a1e2d2319363d1">SetName</a>(fields[8].GetString());</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="classObject.html#a0a29933a2da73d788a130f971511f2f5">SetByteValue</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af2d4e268d5842c9b63100cfa2876c8cd">UNIT_FIELD_BYTES_2</a>, <a class="code" href="group__game.html#gga1268448e502eeef0e503fe5e80acce55a7f509c84071a2f11fb94c93134a1b0f9">UNIT_BYTES_2_OFFSET_PVP_FLAG</a>, <a class="code" href="group__game.html#ggadfd426d7c800ae9b37ca91f5f2fd5d01a2513b9adc3e0167e38ec3835d5d3e5bf">UNIT_BYTE2_FLAG_AURAS</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552ac75aa2eacc0e809ae582c85d245c1e4c">UNIT_FLAG_PLAYER_CONTROLLED</a>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="classObject.html#afe65b1ab32dbcd51890b754fb8b5e1b0">SetByteFlag</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af2d4e268d5842c9b63100cfa2876c8cd">UNIT_FIELD_BYTES_2</a>, <a class="code" href="group__game.html#gga1268448e502eeef0e503fe5e80acce55af1e0565726ef7b1ef7785376052aa6c1">UNIT_BYTES_2_OFFSET_PET_FLAGS</a>, fields[9].GetBool() ? <a class="code" href="group__game.html#gga0ea77d345dd1f26d151dde7a688de945ad71ccc862237150755b91ae8132975b5">UNIT_CAN_BE_ABANDONED</a> : <a class="code" href="group__game.html#gga0ea77d345dd1f26d151dde7a688de945ac5b1e1a1d4ad6576bafaf9880e0cb7a5">UNIT_CAN_BE_RENAMED</a> | <a class="code" href="group__game.html#gga0ea77d345dd1f26d151dde7a688de945ad71ccc862237150755b91ae8132975b5">UNIT_CAN_BE_ABANDONED</a>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="classUnit.html#a665cb09340bb34d09800ac518f8b40b8">SetMaxPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>, <a class="code" href="classUnit.html#a085d47fd164802e379e9a90a528da2d3">GetCreatePowers</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>));</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="classUnit.html#afcc2a2d47162fc8c4792eac575025086">SetPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>, fields[12].GetUInt32());</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <a class="code" href="classUnit.html#aef3abd7c33c5a6578dbd3efadd6f49ca">SetPowerType</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27adf1e2c1dbfbecd82a3bdcef559ac8cc3">POWER_FOCUS</a>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a>)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outError(<span class="stringliteral">&quot;Pet have incorrect type (%u) for pet loading.&quot;</span>, <a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>());</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classUnit.html#a78fa5ef65274d8db2ba98306e98e2209">IsImmuneToNPC</a>())</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="classUnit.html#abe78f735546f357870d95c29148a0881">SetImmuneToNPC</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classUnit.html#a577387caac561e0995778ff2aa1c02b4">IsImmuneToPlayer</a>())</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <a class="code" href="classUnit.html#a6c0154332adeaa919ec4467acf2a7e3d">SetImmuneToPlayer</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classUnit.html#a48fcb3d403534171f69d0be3b6003762">IsPvP</a>())</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <a class="code" href="classUnit.html#a375c07471b5dd9708337960e21ca5b28">SetPvP</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classUnit.html#a0d3bb3d777309cc36f63722c66cefd57">IsPvPFreeForAll</a>())</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <a class="code" href="classUnit.html#a8013081555f55a6ae6bd0a10e5e37c83">SetPvPFreeForAll</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classUnit.html#a101ecab148e6423e4029f63317cf8c45">IsPvPSanctuary</a>())</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="classUnit.html#ab2df146996babfafaca3f54d058fd7bd">SetPvPSanctuary</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="classUnit.html#abda167c3637de6d3b5e3f6982566e23e">SetCanModifyStats</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="classPet.html#aaa0288323bfc9d12566ec9188d5f7632">InitStatsForLevel</a>(petlevel);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="classPet.html#a43a35bdd7f233f6ae5233ad55f30c641">InitTalentForLevel</a>();                                   <span class="comment">// set original talents points before spell loading</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a8a4774bff9e2c26fe65610992b9bfb37">UNIT_FIELD_PET_NAME_TIMESTAMP</a>, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(time(<span class="keyword">nullptr</span>)));</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a132df4597ea73a26d0574cbcfe3d9b5c">UNIT_FIELD_PETEXPERIENCE</a>, fields[5].GetUInt32());</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="UnitAI_8h.html#af9c6d64ff42ea6d6056c73f6618d8f9d">ReactStates</a> reactState = <a class="code" href="UnitAI_8h.html#af9c6d64ff42ea6d6056c73f6618d8f9d">ReactStates</a>(fields[6].GetUInt8());</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> savedhealth = fields[10].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> savedpower = fields[11].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27">Powers</a> powerType = <a class="code" href="classUnit.html#a4ae648f71881fd67bcdd861ec4ef2363">GetPowerType</a>();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// load action bar, if data broken will fill later by default spells.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2f3eef517ee265187d0f65f625588343">LoadPetActionBar</a>(fields[13].GetCppString());</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// since last save (in seconds)</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> timediff = <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(time(<span class="keyword">nullptr</span>) - fields[14].GetUInt64());</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="classPet.html#ab25d770bb5fd81698918ac82b406afa5">m_resetTalentsCost</a> = fields[15].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="classPet.html#a9fa6b4dc1e14acf60ac9d4abd8fd8f31">m_resetTalentsTime</a> = fields[16].<a class="code" href="classField.html#a757dd8cac1b769fdb82d8a529bad9d5b">GetUInt64</a>();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// load spells/cooldowns/auras</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="classPet.html#a27147bde866e6f2382799a6d2e84b363">_LoadAuras</a>(timediff);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// remove arena auras if in arena - but only DB loaded ones</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (map-&gt;<a class="code" href="classMap.html#afe645aa76713224c7e7fcd0f5e12fc79">IsBattleArena</a>())</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="classUnit.html#a5c41b9a7d546cd3ebe8ea4061dc7bc9e">RemoveArenaAuras</a>();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// init AB</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="classPet.html#a04c9223accb74363902edd455c7b836e">LearnPetPassives</a>();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="classPet.html#a462dc421828060d0478ca6a3ae0a2a57">CastPetAuras</a>(current);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="classPet.html#aa630a19bfa429ccf53e5d89d521bc0c5">CastOwnerTalentAuras</a>();</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">// Those two following call was moved here to fix health is not full after pet invocation (before, they where placed after map-&gt;Add())</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="classPet.html#a707f2c992ddc77ba6b2aebd08fd31104">_LoadSpells</a>();</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="classPet.html#afeb6b4e172c202a327ae853c132a1247">InitLevelupSpellsForLevel</a>();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// TODO: confirm two line above work in all situation</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="classPet.html#a289e06779baced17e3788b0b7ee3debc">InitPetScalingAuras</a>();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="classPet.html#acca9c8377e6b78b164eccadea41af960">UpdateAllStats</a>();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// failsafe check</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    savedhealth = savedhealth &gt; <a class="code" href="classUnit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() ? <a class="code" href="classUnit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() : savedhealth;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    savedpower = savedpower &gt; <a class="code" href="classUnit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(powerType) ? <a class="code" href="classUnit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(powerType) : savedpower;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (!savedhealth)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a> &amp;&amp; healthPercentage)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            savedhealth = <a class="code" href="classUnit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() * (float(healthPercentage) / 100);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            savedpower = 0;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a>)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="classUnit.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(savedhealth);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="classUnit.html#afcc2a2d47162fc8c4792eac575025086">SetPower</a>(powerType, savedpower);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    map-&gt;<a class="code" href="classMap.html#af928c75fd7374971a2abdc658c89e9d6">Add</a>((<a class="code" href="classCreature.html">Creature</a>*)<span class="keyword">this</span>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="classCreature.html#a9b1dbfcecf2abb5edc5d5b824ec8e139">AIM_Initialize</a>();</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="classPet.html#afa01db5646d3731545cae58b41f551e1">AI</a>()-&gt;<a class="code" href="classUnitAI.html#ae2445daebeb77190b34bcd0ab937813e">SetReactState</a>(reactState);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="classPet.html#a8f56752c756a9a41e647e03712b9466b">CleanupActionBar</a>();                                     <span class="comment">// remove unknown spells from action bar after load</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="classPet.html#a3cbd2b762d3181631799fec78c4f54ed">_LoadSpellCooldowns</a>();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    owner-&gt;<a class="code" href="classUnit.html#a694208f5c89fef8e9d968150dbb5b274">SetPet</a>(<span class="keyword">this</span>);                                    <span class="comment">// in DB stored only full controlled creature</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <a class="code" href="Log_8h.html#a21a2c7330a04ac78200a986f66609369">DEBUG_LOG</a>(<span class="stringliteral">&quot;New Pet has guid %u&quot;</span>, <a class="code" href="classObject.html#a4777844356842a389621c1bad1433109">GetGUIDLow</a>());</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    owner-&gt;<a class="code" href="classPlayer.html#ae5979ac44c9da24ecab41e210f01eeb0">PetSpellInitialize</a>();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classPlayer.html#a3acf7eadb0ec1ae686858ea11ee87302">GetGroup</a>())</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        owner-&gt;<a class="code" href="classPlayer.html#a238a1c1e97cad7d27a5a9f0a0807180e">SetGroupUpdateFlag</a>(<a class="code" href="Group_8h.html#a914819bad74fbd5e30a14b5250e00e22ac4eec7ebcdd88fe72703af3fbcdeef65">GROUP_UPDATE_PET</a>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    owner-&gt;<a class="code" href="classPlayer.html#a134bcbd463d0048b59372a89f6c455af">SendTalentsInfoData</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        result = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;SELECT genitive, dative, accusative, instrumental, prepositional FROM character_pet_declinedname WHERE owner = &#39;%u&#39; AND id = &#39;%u&#39;&quot;</span>, owner-&gt;<a class="code" href="classObject.html#a4777844356842a389621c1bad1433109">GetGUIDLow</a>(), <a class="code" href="classUnit.html#a68db20366e7ce843216f5024b94f154c">GetCharmInfo</a>()-&gt;GetPetNumber());</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keyword">delete</span> <a class="code" href="classPet.html#a245b16b47d16108f7871c482bb36db8b">m_declinedname</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <a class="code" href="classPet.html#a245b16b47d16108f7871c482bb36db8b">m_declinedname</a> = <span class="keyword">new</span> <a class="code" href="structDeclinedName.html">DeclinedName</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <a class="code" href="classField.html">Field</a>* fields2 = result-&gt;<a class="code" href="classQueryResult.html#ae59bcb12d59b9a369953be91ddb5c446">Fetch</a>();</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group__u2w.html#ga8c9f2cb96962bbba77bd38e8bd014659">MAX_DECLINED_NAME_CASES</a>; ++i)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                <a class="code" href="classPet.html#a245b16b47d16108f7871c482bb36db8b">m_declinedname</a>-&gt;<a class="code" href="structDeclinedName.html#acda589ff9e0fdb0a813707736191d049">name</a>[i] = fields2[i].<a class="code" href="classField.html#ac3fe5bf9cdc61b5be66a4c79598cba5e">GetCppString</a>();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="classPet.html#a1223cf843907fc54e5428e12b3f85de6">m_loading</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="classPet.html#a5318c4fc909c15b4ac3ed440f8ad5f2b">SynchronizeLevelWithOwner</a>();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="classPet.html#a7615c24d34c9dd55d15719fc50eba498">SavePetToDB</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>, owner);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classGenericTransport.html">GenericTransport</a>* transport = owner-&gt;<a class="code" href="classWorldObject.html#a87ee372cff9cd5f87dc4171ad3a7efef">GetTransport</a>())</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        transport-&gt;AddPetToTransport(owner, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="classPet.html#a7615c24d34c9dd55d15719fc50eba498">  414</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a7615c24d34c9dd55d15719fc50eba498">Pet::SavePetToDB</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fd">PetSaveMode</a> mode, <a class="code" href="classPlayer.html">Player</a>* owner)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;{</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classObject.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>())</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// save only fully controlled creature</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a9d623f0127c82864f885e09a9ddd2eb8">isControlled</a>())</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471afb3caeecb823c7b5ee717d5e24d5e879">GUARDIAN_PET</a> &amp;&amp; !<a class="code" href="classPet.html#a59fc53c82202f6be549e26d9d109f694">IsSaveAutoCast</a>())</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// current/stable/not_in_slot</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">if</span> (mode &gt;= <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="comment">// reagents must be returned before save call</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">if</span> (mode == <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdad4213e75267dd772a1811da6336e447a">PET_SAVE_REAGENTS</a>)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            mode = <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="comment">// not save pet as current if another pet temporary unsummoned</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode == <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a> &amp;&amp; owner-&gt;<a class="code" href="classPlayer.html#a246517a0bb1f6fcc04c9fb9060586676">GetTemporaryUnsummonedPetNumber</a>() &amp;&amp;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                 owner-&gt;<a class="code" href="classPlayer.html#a246517a0bb1f6fcc04c9fb9060586676">GetTemporaryUnsummonedPetNumber</a>() != <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>())</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="comment">// pet will lost anyway at restore temporary unsummoned</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="comment">// for warlock case</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            mode = <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> curhealth = <a class="code" href="classUnit.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> curpower = <a class="code" href="classUnit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="classUnit.html#a4ae648f71881fd67bcdd861ec4ef2363">GetPowerType</a>());</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="comment">// stable and not in slot saves</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">if</span> (mode == <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="comment">// pet is dead so it doesn&#39;t have to be shown at character login</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classUnit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                mode = <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <a class="code" href="classUnit.html#af76c373284936181942a6f594cd720fd">RemoveAllAuras</a>();</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="comment">// save pet&#39;s data as one single transaction</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#a05a126869fcd32e43c8db16ed63a2591">BeginTransaction</a>();</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <a class="code" href="classPet.html#a3f8ed80e6e090b493ffdf95b4b7b6e6d">_SaveSpells</a>();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <a class="code" href="classPet.html#a57219fd6c392f0dd5658708c01e4bc18">_SaveSpellCooldowns</a>();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="classPet.html#a60687b22fb22eae52e1a286134bd5fe5">_SaveAuras</a>();</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> ownerLow = <a class="code" href="classUnit.html#a6d1af92863df5e94a0d4431c454f5b2d">GetOwnerGuid</a>().<a class="code" href="classObjectGuid.html#a66935d98ce09dcb80d05a34b2697496a">GetCounter</a>();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="comment">// remove current data</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> delPet ;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> insPet ;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <a class="code" href="classSqlStatement.html">SqlStatement</a> stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(delPet, <span class="stringliteral">&quot;DELETE FROM character_pet WHERE owner = ? AND id = ?&quot;</span>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(ownerLow, <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>());</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="comment">// prevent duplicate using slot (except PET_SAVE_NOT_IN_SLOT)</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">if</span> (mode &lt;= <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fda20411938f7cc7a5140e3b7006d54d851">PET_SAVE_LAST_STABLE_SLOT</a>)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> updPet ;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(updPet, <span class="stringliteral">&quot;UPDATE character_pet SET slot = ? WHERE owner = ? AND slot = ?&quot;</span>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>), ownerLow, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(mode));</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="comment">// prevent existence another hunter pet in PET_SAVE_AS_CURRENT and PET_SAVE_NOT_IN_SLOT</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a> &amp;&amp; (mode == <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a> || mode &gt; <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fda20411938f7cc7a5140e3b7006d54d851">PET_SAVE_LAST_STABLE_SLOT</a>))</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> del ;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(del, <span class="stringliteral">&quot;DELETE FROM character_pet WHERE owner = ? AND (slot = ? OR slot &gt; ?)&quot;</span>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(ownerLow, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a>), <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fda20411938f7cc7a5140e3b7006d54d851">PET_SAVE_LAST_STABLE_SLOT</a>));</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">// save pet</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="classSqlStatement.html">SqlStatement</a> savePet = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(insPet, <span class="stringliteral">&quot;INSERT INTO character_pet ( id, entry,  owner, modelid, level, exp, Reactstate, slot, name, renamed, curhealth, &quot;</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                               <span class="stringliteral">&quot;curmana, curhappiness, abdata, savetime, resettalents_cost, resettalents_time, CreatedBySpell, PetType) &quot;</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                               <span class="stringliteral">&quot;VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)&quot;</span>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>());</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="classObject.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>());</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(ownerLow);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="classUnit.html#a8ac9fa13ad31b42e5d1372694d22a799">GetNativeDisplayId</a>());</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>());</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="classObject.html#aebc9e7589e372ab99544e474c07609f0">GetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a132df4597ea73a26d0574cbcfe3d9b5c">UNIT_FIELD_PETEXPERIENCE</a>));</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="classPet.html#afa01db5646d3731545cae58b41f551e1">AI</a>()-&gt;GetReactState()));</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(mode));</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#ac6965fc7a26fc5475e826156eed945cd">addString</a>(<a class="code" href="classWorldObject.html#a185b15e6aa5be8ab5f914f8a27cfea06">m_name</a>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="classObject.html#ad837c14c5766b8c13f4a5ce2532b0657">HasByteFlag</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af2d4e268d5842c9b63100cfa2876c8cd">UNIT_FIELD_BYTES_2</a>, 2, <a class="code" href="group__game.html#gga0ea77d345dd1f26d151dde7a688de945ac5b1e1a1d4ad6576bafaf9880e0cb7a5">UNIT_CAN_BE_RENAMED</a>) ? 0 : 1));</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(curhealth);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(curpower);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="classUnit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>));</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        std::ostringstream ss;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = <a class="code" href="group__game.html#gga5656c6dd354cdc76da16094dd6f96724ac963f447654b9785c3236c79ea310b09">ACTION_BAR_INDEX_START</a>; i &lt; <a class="code" href="group__game.html#gga5656c6dd354cdc76da16094dd6f96724a64eaabebc81e8d02513089d4d5591264">ACTION_BAR_INDEX_END</a>; ++i)</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            ss &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a9efb3e23e5e9230eef461da27f3e1da6">GetActionBarEntry</a>(i)-&gt;<a class="code" href="structUnitActionBarEntry.html#a0615e6ad9cf5523d6dc85bd529e65f32">GetType</a>()) &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;               &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a9efb3e23e5e9230eef461da27f3e1da6">GetActionBarEntry</a>(i)-&gt;<a class="code" href="structUnitActionBarEntry.html#afd77e2f64ec856059759d05ddf77876e">GetAction</a>()) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#ac6965fc7a26fc5475e826156eed945cd">addString</a>(ss);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a1e4442d4f5e8ea685c078ecdcc769daa">addUInt64</a>(<a class="code" href="Define_8h.html#ac4dd6ce78ce3b840c53bd4b3c63ed09b">uint64</a>(time(<span class="keyword">nullptr</span>)));</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="classPet.html#ab25d770bb5fd81698918ac82b406afa5">m_resetTalentsCost</a>));</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a1e4442d4f5e8ea685c078ecdcc769daa">addUInt64</a>(<a class="code" href="Define_8h.html#ac4dd6ce78ce3b840c53bd4b3c63ed09b">uint64</a>(<a class="code" href="classPet.html#a9fa6b4dc1e14acf60ac9d4abd8fd8f31">m_resetTalentsTime</a>));</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="classObject.html#aebc9e7589e372ab99544e474c07609f0">GetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af6ab95e21ce3e6cd8f5f7ec4a3c5d24a">UNIT_CREATED_BY_SPELL</a>));</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>()));</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        savePet.<a class="code" href="classSqlStatement.html#a18377e3e03f9397eafbab91ae8675066">Execute</a>();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#af4d03f875b7540de19eb1e8ccd0fb841">CommitTransaction</a>();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="classUnit.html#af76c373284936181942a6f594cd720fd">RemoveAllAuras</a>(<a class="code" href="group__game.html#gga9a4f502870485ba32e759067c9adca94a3df9358887fb26facbbb5b619d6ccab3">AURA_REMOVE_BY_DELETE</a>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="classPet.html#ae9f6f4b4936dc8c0470bfb5af8625632">DeleteFromDB</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>());</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="classPet.html#a1730d31831f1e7077fb2ea5579eb95c1">  535</a></span>&#160;<a class="code" href="structPosition.html">Position</a> <a class="code" href="classPet.html#a1730d31831f1e7077fb2ea5579eb95c1">Pet::GetPetSpawnPosition</a>(<a class="code" href="classUnit.html">Unit</a>* owner)</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="structPosition.html">Position</a> pos;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    owner-&gt;<a class="code" href="classWorldObject.html#a8655e3e9a37c11c4da647cd496f8f497">GetFirstCollisionPosition</a>(pos, 2.f, owner-&gt;<a class="code" href="classWorldObject.html#ab6ca0a11a0d2bb8a7ec0110adb732857">GetOrientation</a>() + <a class="code" href="Common_8h.html#ab9c3c609e1d02430671de0a109410ac8">M_PI_F</a> / 2);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;}</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="classPet.html#a4cad61c8d903a446fd3a4e358afabec2">  542</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#ae9f6f4b4936dc8c0470bfb5af8625632">Pet::DeleteFromDB</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> guidlow, <span class="keywordtype">bool</span> separate_transaction)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (separate_transaction)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#a05a126869fcd32e43c8db16ed63a2591">BeginTransaction</a>();</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> delPet ;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> delDeclName ;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> delAuras ;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> delSpells ;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> delSpellCD ;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="classSqlStatement.html">SqlStatement</a> stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(delPet, <span class="stringliteral">&quot;DELETE FROM character_pet WHERE id = ?&quot;</span>);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(guidlow);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(delDeclName, <span class="stringliteral">&quot;DELETE FROM character_pet_declinedname WHERE id = ?&quot;</span>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(guidlow);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(delAuras, <span class="stringliteral">&quot;DELETE FROM pet_aura WHERE guid = ?&quot;</span>);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(guidlow);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(delSpells, <span class="stringliteral">&quot;DELETE FROM pet_spell WHERE guid = ?&quot;</span>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(guidlow);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(delSpellCD, <span class="stringliteral">&quot;DELETE FROM pet_spell_cooldown WHERE guid = ?&quot;</span>);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(guidlow);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span> (separate_transaction)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#af4d03f875b7540de19eb1e8ccd0fb841">CommitTransaction</a>();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="classPet.html#a918966d5c7b2f17c003d35f802dca03c">  572</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#ae9f6f4b4936dc8c0470bfb5af8625632">Pet::DeleteFromDB</a>(<a class="code" href="classUnit.html">Unit</a>* owner, <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fd">PetSaveMode</a> slot)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="classQueryResult.html">QueryResult</a>* result = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;SELECT id FROM character_pet WHERE owner = &#39;%u&#39;  AND slot = &#39;%u&#39; &quot;</span>, owner-&gt;<a class="code" href="classObject.html#a4777844356842a389621c1bad1433109">GetGUIDLow</a>(), <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(slot));</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <a class="code" href="classField.html">Field</a>* fields = result-&gt;<a class="code" href="classQueryResult.html#ae59bcb12d59b9a369953be91ddb5c446">Fetch</a>();</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> petNumber = fields[0].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">if</span> (petNumber)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <a class="code" href="classPet.html#ae9f6f4b4936dc8c0470bfb5af8625632">DeleteFromDB</a>(petNumber);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;}</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="classPet.html#afb2bcf12c0a0167c38e649bf52562f4b">  587</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#afb2bcf12c0a0167c38e649bf52562f4b">Pet::SetOwnerGuid</a>(<a class="code" href="classObjectGuid.html">ObjectGuid</a> owner)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;{</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="classPet.html#a0595dccf2ddfc73bffb69512ca6c79ce">m_petType</a>))</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471afb3caeecb823c7b5ee717d5e24d5e879">GUARDIAN_PET</a>:</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a83bec8aa36224306974de205d77c2872">m_controllableGuardian</a>)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a>:</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>:</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <a class="code" href="classUnit.html#a365a5c26b5457c0693631d19801383c3">SetSummonerGuid</a>(owner);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="classUnit.html#af69a9cad7f3f78b594bcb0f1cdb10d2b">Unit::SetOwnerGuid</a>(owner);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="classPet.html#aeab60e66f36c220af88496a43b8270cf">  602</a></span>&#160;<a class="code" href="classPlayer.html">Player</a>* <a class="code" href="classPet.html#aeab60e66f36c220af88496a43b8270cf">Pet::GetSpellModOwner</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">if</span> (owner &amp;&amp; owner-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() == <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classPlayer.html">Player</a>*<span class="keyword">&gt;</span>(owner);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="classPet.html#a3c2dcf8c9e0f9a836cc678a9479ebb64">  610</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a3c2dcf8c9e0f9a836cc678a9479ebb64">Pet::SetDeathState</a>(<a class="code" href="group__game.html#ga671007e5c9d47b3ccb212f971e65baed">DeathState</a> s)                       <span class="comment">// overwrite virtual Creature::SetDeathState and Unit::SetDeathState</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;{</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="classCreature.html#a665aa1317b2045108c0edc3eab569ca1">Creature::SetDeathState</a>(s);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#ad74653f89ff18e00153b1fd0520830e4">GetDeathState</a>() == <a class="code" href="group__game.html#gga671007e5c9d47b3ccb212f971e65baeda067c6778cd7570678dc70dc2e8b09e68">CORPSE</a>) <span class="comment">// will despawn at corpse despawning (Pet::Update code)</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="comment">// pet corpse non lootable and non skinnable</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d">UNIT_DYNAMIC_FLAGS</a>, <a class="code" href="SharedDefines_8h.html#a6d2f7a5452237dadf8fd3aed70f44039a7846c0137067e3870ef646bc0f6d0a05">UNIT_DYNFLAG_NONE</a>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <a class="code" href="classObject.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552ad990ec1dc8c9d2fd611f145e9f752885">UNIT_FLAG_SKINNABLE</a>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a>)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <span class="comment">// lose happiness when died and not in BG/Arena</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <a class="code" href="structMapEntry.html">MapEntry</a> <span class="keyword">const</span>* mapEntry = <a class="code" href="DBCStores_8cpp.html#ac28198d1c28605951e9debe1298b8304">sMapStore</a>.LookupEntry(<a class="code" href="classWorldObject.html#a485ded18163bda1b789be2283781780e">GetMapId</a>());</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="keywordflow">if</span> (!mapEntry || (mapEntry-&gt;<a class="code" href="structMapEntry.html#adc919dc1d095da8c0f1624abfcca2cf6">map_type</a> != <a class="code" href="DBCEnums_8h.html#a28c252fd678ff644cdad7b1b835f24c9ab4f612b5c13e82251823d80d0ab728b6">MAP_ARENA</a> &amp;&amp; mapEntry-&gt;<a class="code" href="structMapEntry.html#adc919dc1d095da8c0f1624abfcca2cf6">map_type</a> != <a class="code" href="DBCEnums_8h.html#a28c252fd678ff644cdad7b1b835f24c9aa9a058d60db14ffc3f1cc5ef8339ff14">MAP_BATTLEGROUND</a>))</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <a class="code" href="classUnit.html#a6591e720a2cfa309b6d693231b1fdbc0">ModifyPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>, -<a class="code" href="Pet_8h.html#a76712c47838e51c9fe44aa5043816d40">HAPPINESS_LEVEL_SIZE</a>);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="classObject.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552a20d03528858479b31941a42820257eeb">UNIT_FLAG_STUNNED</a>);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>())</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471afb3caeecb823c7b5ee717d5e24d5e879">GUARDIAN_PET</a>)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                owner-&gt;RemoveGuardian(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#ad74653f89ff18e00153b1fd0520830e4">GetDeathState</a>() == <a class="code" href="group__game.html#gga671007e5c9d47b3ccb212f971e65baeda4f34c5c191d6e0d028ca831b6c0b1571">ALIVE</a>)</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <a class="code" href="classObject.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552a20d03528858479b31941a42820257eeb">UNIT_FLAG_STUNNED</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <a class="code" href="classPet.html#a462dc421828060d0478ca6a3ae0a2a57">CastPetAuras</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="classPet.html#aa630a19bfa429ccf53e5d89d521bc0c5">CastOwnerTalentAuras</a>();</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="classPet.html#aa140e5fe151461ac6943c748d6de44fd">  643</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#aa140e5fe151461ac6943c748d6de44fd">Pet::Update</a>(<span class="keyword">const</span> <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> diff)</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;{</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#aaac68db137c1dd9b03527cfd84b9b8b1">m_removed</a>)                                          <span class="comment">// pet already removed, just wait in remove queue, no updates</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="classUnit.html#a6095270dbf0be2614592c880d455fa3c">m_deathState</a>)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__game.html#gga671007e5c9d47b3ccb212f971e65baeda067c6778cd7570678dc70dc2e8b09e68">CORPSE</a>:</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classCreature.html#a91f62e4e056b9877c843379e0bec9630">IsCorpseExpired</a>())</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                <span class="comment">// pet is dead so it doesn&#39;t have to be shown at character login</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                <a class="code" href="classPet.html#a20709cab46c2146092bce7aff49807b4">Unsummon</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__game.html#gga671007e5c9d47b3ccb212f971e65baeda4f34c5c191d6e0d028ca831b6c0b1571">ALIVE</a>:</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="comment">// unsummon pet that lost owner</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <span class="keywordflow">if</span> ((!owner || !owner-&gt;<a class="code" href="classUnit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() ||</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                    (!<a class="code" href="classWorldObject.html#afd0488a6497cff9e233990646ec78011">IsWithinDistInMap</a>(owner, <a class="code" href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;GetVisibilityDistance()) &amp;&amp; (owner-&gt;<a class="code" href="classUnit.html#abe91abe7303db7af828a1e5044785295">HasCharm</a>() &amp;&amp; !owner-&gt;<a class="code" href="classUnit.html#abe91abe7303db7af828a1e5044785295">HasCharm</a>(<a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>()))) ||</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                    (<a class="code" href="classPet.html#a9d623f0127c82864f885e09a9ddd2eb8">isControlled</a>() &amp;&amp; !owner-&gt;<a class="code" href="classUnit.html#a57870b79c2a356567afd5febedf79a61">GetPetGuid</a>())) &amp;&amp; (!<a class="code" href="classPet.html#a33ad9f84219eb2b2114c4a57e9827d37">IsGuardian</a>() || !<a class="code" href="classUnit.html#af5e75d013dfa8a8b888d7714992e3f2a">IsInCombat</a>()))</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                <a class="code" href="classPet.html#a20709cab46c2146092bce7aff49807b4">Unsummon</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdad4213e75267dd772a1811da6336e447a">PET_SAVE_REAGENTS</a>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a9d623f0127c82864f885e09a9ddd2eb8">isControlled</a>())</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classUnit.html#a57870b79c2a356567afd5febedf79a61">GetPetGuid</a>() != <a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>() &amp;&amp; !<a class="code" href="classPet.html#adaa0dcce5c4945bbb929f88baa687f32">IsControllableGuardian</a>())</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                    <a class="code" href="classPet.html#a20709cab46c2146092bce7aff49807b4">Unsummon</a>(<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a> ? <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae32b2ad103ad490f5f16a85f9a173dd1">PET_SAVE_AS_DELETED</a> : <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>, owner);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classPet.html#afdfa009d077666e72f7c26bd4240c0c9">m_duration</a> &gt; 0)</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classPet.html#afdfa009d077666e72f7c26bd4240c0c9">m_duration</a> &gt; (<a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)diff)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                    <a class="code" href="classPet.html#afdfa009d077666e72f7c26bd4240c0c9">m_duration</a> -= (<a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)diff;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                    <a class="code" href="classPet.html#a20709cab46c2146092bce7aff49807b4">Unsummon</a>(<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a> &amp;&amp; !<a class="code" href="classPet.html#a59fc53c82202f6be549e26d9d109f694">IsSaveAutoCast</a>() ? <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae32b2ad103ad490f5f16a85f9a173dd1">PET_SAVE_AS_DELETED</a> : <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>, owner);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="classCreature.html#af884c2ac6a93ade8fc3dbdcc59ba12e8">Creature::Update</a>(diff);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="classPet.html#ab7e0ce91f6cf5e070ce384a889c02edd">  700</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#ab7e0ce91f6cf5e070ce384a889c02edd">Pet::RegenerateAll</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> diff)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;{</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">// regenerate focus for hunter pets or energy for deathknight&#39;s ghoul</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="classUnit.html#a2aca1bf125beec599e3141f077509329">m_regenTimer</a> += diff;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a2aca1bf125beec599e3141f077509329">m_regenTimer</a> &gt;= 4000)</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classUnit.html#af5e75d013dfa8a8b888d7714992e3f2a">IsInCombat</a>())</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <a class="code" href="classPet.html#ac5f8f3be4ef227b63bbd0c8d32aad5ac">RegenerateHealth</a>();</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="classCreature.html#ae6229b598c07b66d87488c6c94928c16">RegeneratePower</a>(4.f);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <a class="code" href="classUnit.html#a2aca1bf125beec599e3141f077509329">m_regenTimer</a> -= 4000;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a7ece3cdc2e0cb85900c7de101689697d">m_happinessTimer</a> &lt;= diff)</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <a class="code" href="classPet.html#a326d28211e89bd89834e3c920e8bda52">LooseHappiness</a>();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <a class="code" href="classPet.html#a7ece3cdc2e0cb85900c7de101689697d">m_happinessTimer</a> = 7500;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <a class="code" href="classPet.html#a7ece3cdc2e0cb85900c7de101689697d">m_happinessTimer</a> -= diff;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="classPet.html#a326d28211e89bd89834e3c920e8bda52">  725</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a326d28211e89bd89834e3c920e8bda52">Pet::LooseHappiness</a>()</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;{</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> curValue = <a class="code" href="classUnit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> (curValue &lt;= 0)</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> addvalue = 670;                                   <span class="comment">// value is 70/35/17/8/4 (per min) * 1000 / 8 (timer 7.5 secs)</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#af5e75d013dfa8a8b888d7714992e3f2a">IsInCombat</a>())                                       <span class="comment">// we know in combat happiness fades faster, multiplier guess</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        addvalue = <a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(addvalue * 1.5);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="classUnit.html#a6591e720a2cfa309b6d693231b1fdbc0">ModifyPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>, -addvalue);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;}</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="classPet.html#a1178b67b0ef6bd30ce684ec98d78986f">  736</a></span>&#160;<a class="code" href="Pet_8h.html#addd416d6eeaa9cd92339aa437caedb3e">HappinessState</a> <a class="code" href="classPet.html#a1178b67b0ef6bd30ce684ec98d78986f">Pet::GetHappinessState</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>) &lt; <a class="code" href="Pet_8h.html#a76712c47838e51c9fe44aa5043816d40">HAPPINESS_LEVEL_SIZE</a>)</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Pet_8h.html#addd416d6eeaa9cd92339aa437caedb3eae373c6b52d4a8b45084f4a276fb6d6c5">UNHAPPY</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>) &gt;= <a class="code" href="Pet_8h.html#a76712c47838e51c9fe44aa5043816d40">HAPPINESS_LEVEL_SIZE</a> * 2)</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Pet_8h.html#addd416d6eeaa9cd92339aa437caedb3ea5592cf91bd70788e64c412b3cc642e2c">HAPPY</a>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Pet_8h.html#addd416d6eeaa9cd92339aa437caedb3ea59ae17a687995046ac7025dcc53156e3">CONTENT</a>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;}</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno"><a class="line" href="classPet.html#ad43b86352ec61b8483e60e442e0a6e3b">  745</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#ad43b86352ec61b8483e60e442e0a6e3b">Pet::CanTakeMoreActiveSpells</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellid)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;{</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="Define_8h.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>  activecount = 1;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> chainstartstore[<a class="code" href="Pet_8h.html#a2eba0c745572c0d75f7127597344e769">ACTIVE_SPELLS_MAX</a>];</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="SpellMgr_8cpp.html#a28b958e9db34bdad035df1f81ed2a280">IsPassiveSpell</a>(spellid))</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    chainstartstore[0] = <a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.GetFirstSpellInChain(spellid);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">for</span> (PetSpellMap::const_iterator itr = <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.begin(); itr != <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.end(); ++itr)</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">if</span> (itr-&gt;second.state == <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5aa45b4f700fe69b9edae4fb979b988ffe">PETSPELL_REMOVED</a>)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="SpellMgr_8cpp.html#a28b958e9db34bdad035df1f81ed2a280">IsPassiveSpell</a>(itr-&gt;first))</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> chainstart = <a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.GetFirstSpellInChain(itr-&gt;first);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <a class="code" href="Define_8h.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> x;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; activecount; ++x)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <span class="keywordflow">if</span> (chainstart == chainstartstore[x])</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">if</span> (x == activecount)                               <span class="comment">// spellchain not yet saved -&gt; add active count</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            ++activecount;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="keywordflow">if</span> (activecount &gt; <a class="code" href="Pet_8h.html#a2eba0c745572c0d75f7127597344e769">ACTIVE_SPELLS_MAX</a>)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            chainstartstore[x] = chainstart;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;}</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno"><a class="line" href="classPet.html#a20709cab46c2146092bce7aff49807b4">  784</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a20709cab46c2146092bce7aff49807b4">Pet::Unsummon</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fd">PetSaveMode</a> mode, <a class="code" href="classUnit.html">Unit</a>* owner <span class="comment">/*= nullptr*/</span>)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;{</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">if</span> (!owner)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#af5e75d013dfa8a8b888d7714992e3f2a">IsInCombat</a>())</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <a class="code" href="classUnit.html#a7ac2348be8b685fce0037fbbac3ceacb">CombatStop</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="classPet.html#afa01db5646d3731545cae58b41f551e1">AI</a>()-&gt;<a class="code" href="classUnitAI.html#af882fcabacd9a2b54700e38fa48afd6f">OnUnsummon</a>();</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span> (owner)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <a class="code" href="classPlayer.html">Player</a>* p_owner = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a6d1af92863df5e94a0d4431c454f5b2d">GetOwnerGuid</a>() != owner-&gt;<a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>())</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() == <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            p_owner = <span class="keyword">static_cast&lt;</span><a class="code" href="classPlayer.html">Player</a>*<span class="keyword">&gt;</span>(owner);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="comment">// not save secondary permanent pet as current</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <span class="keywordflow">if</span> (mode == <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a> &amp;&amp; p_owner-&gt;<a class="code" href="classPlayer.html#a246517a0bb1f6fcc04c9fb9060586676">GetTemporaryUnsummonedPetNumber</a>() &amp;&amp;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                    p_owner-&gt;<a class="code" href="classPlayer.html#a246517a0bb1f6fcc04c9fb9060586676">GetTemporaryUnsummonedPetNumber</a>() != <a class="code" href="classUnit.html#a68db20366e7ce843216f5024b94f154c">GetCharmInfo</a>()-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>())</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                mode = <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = <a class="code" href="classObject.html#aebc9e7589e372ab99544e474c07609f0">GetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af6ab95e21ce3e6cd8f5f7ec4a3c5d24a">UNIT_CREATED_BY_SPELL</a>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            <a class="code" href="structSpellEntry.html">SpellEntry</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="SQLStorages_8cpp.html#a6e07b93ae2737d35f4214041a6f735f4">sSpellTemplate</a>.<a class="code" href="classSQLStorage.html#ace42ec0424ef41d187eb7c1bdcfa8c62">LookupEntry</a>&lt;<a class="code" href="structSpellEntry.html">SpellEntry</a>&gt;(spellId);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            <span class="comment">// save minion for resummoning at resurrection in BGs</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            <span class="comment">// only save the summon spell in the case where the minion did not die before the warlock, otherwise reset it</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            <span class="keywordflow">if</span> (mode == <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdad4213e75267dd772a1811da6336e447a">PET_SAVE_REAGENTS</a> &amp;&amp; p_owner-&gt;<a class="code" href="classUnit.html#a58a507ebe628930b8a506144b364d84b">getClass</a>() == <a class="code" href="SharedDefines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa72922255ea5f13ce70f2c5cec3e33369">CLASS_WARLOCK</a> &amp;&amp; p_owner-&gt;<a class="code" href="classPlayer.html#ab8ca1acd2144026883cf27f5ebd900b8">InBattleGround</a>() &amp;&amp; <a class="code" href="classPet.html#a9d623f0127c82864f885e09a9ddd2eb8">isControlled</a>() &amp;&amp; !<a class="code" href="classPet.html#a92463c5ce83b9c8f0a74ccd685a86078">isTemporarySummoned</a>() &amp;&amp; spellInfo)</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                p_owner-&gt;<a class="code" href="classPlayer.html#a500fcf236fa76f67ad0e7f164db523bf">SetBGPetSpell</a>(spellId);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                p_owner-&gt;<a class="code" href="classPlayer.html#a500fcf236fa76f67ad0e7f164db523bf">SetBGPetSpell</a>(0);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <span class="keywordflow">if</span> (mode == <a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdad4213e75267dd772a1811da6336e447a">PET_SAVE_REAGENTS</a> &amp;&amp; !p_owner-&gt;<a class="code" href="classPlayer.html#ab8ca1acd2144026883cf27f5ebd900b8">InBattleGround</a>()) <span class="comment">// don&#39;t restore reagents in BGs - minion will be automatically ressurected</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                <span class="comment">// returning of reagents only for players, so best done here</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                <span class="keywordflow">if</span> (spellInfo)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; <a class="code" href="DBCStructure_8h.html#a7dfd9b5e0adb5c5e3ebf3173f80fbcce">MAX_SPELL_REAGENTS</a>; ++i)</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                    {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                        <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code" href="structSpellEntry.html#a1c912ec366db72086130df35f219f46b">Reagent</a>[i] &gt; 0)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                        {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                            <a class="code" href="Player_8h.html#a06f492a0a20f5264c8395684220fec84">ItemPosCountVec</a> dest;           <span class="comment">// for succubus, voidwalker, felhunter and felguard credit soulshard when despawn reason other than death (out of range, logout)</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                            <a class="code" href="Define_8h.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> msg = p_owner-&gt;<a class="code" href="classPlayer.html#af059a10625d50ca7674771ea1c1c4c4c">CanStoreNewItem</a>(<a class="code" href="Bag_8h.html#aadcc1e3338f8cbbe511ad060db42dfb5a843659af0a40139bfa505d7e7982477b">NULL_BAG</a>, <a class="code" href="Bag_8h.html#aadcc1e3338f8cbbe511ad060db42dfb5aeb5cbd7990d2f5e679ec4ecc65e83130">NULL_SLOT</a>, dest, spellInfo-&gt;<a class="code" href="structSpellEntry.html#a1c912ec366db72086130df35f219f46b">Reagent</a>[i], spellInfo-&gt;<a class="code" href="structSpellEntry.html#a0fdf9afa2dbe95e2e8b2aeb31dc7dfa1">ReagentCount</a>[i]);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                            <span class="keywordflow">if</span> (msg == <a class="code" href="Item_8h.html#a73617af2b3e5e935646638fa13678391a939b6661cd19d6c18274906abb28021c">EQUIP_ERR_OK</a>)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                            {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                                <a class="code" href="classItem.html">Item</a>* item = p_owner-&gt;<a class="code" href="classPlayer.html#abee0486768b6758f76a7a0052863d0ea">StoreNewItem</a>(dest, spellInfo-&gt;<a class="code" href="structSpellEntry.html#a1c912ec366db72086130df35f219f46b">Reagent</a>[i], <span class="keyword">true</span>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                <span class="keywordflow">if</span> (p_owner-&gt;<a class="code" href="classObject.html#a8acb91caf94322dc0289d3e60eb8e0e7">IsInWorld</a>())</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                                    p_owner-&gt;<a class="code" href="classPlayer.html#a4aae79469ff88509ac84269d17dd66b7">SendNewItem</a>(item, spellInfo-&gt;<a class="code" href="structSpellEntry.html#a0fdf9afa2dbe95e2e8b2aeb31dc7dfa1">ReagentCount</a>[i], <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                            }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                        }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                    }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a9d623f0127c82864f885e09a9ddd2eb8">isControlled</a>())</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                p_owner-&gt;<a class="code" href="classPlayer.html#a17e3e6c3a84039d2b8717488bb433250">RemovePetActionBar</a>();</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                <span class="keywordflow">if</span> (p_owner-&gt;<a class="code" href="classPlayer.html#a3acf7eadb0ec1ae686858ea11ee87302">GetGroup</a>())</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                    p_owner-&gt;<a class="code" href="classPlayer.html#a238a1c1e97cad7d27a5a9f0a0807180e">SetGroupUpdateFlag</a>(<a class="code" href="Group_8h.html#a914819bad74fbd5e30a14b5250e00e22ac4eec7ebcdd88fe72703af3fbcdeef65">GROUP_UPDATE_PET</a>);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        }</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span> (p_owner)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <a class="code" href="classCreature.html#ac17de5b958df3b98f1ae974315c15a8e">StartCooldown</a>(p_owner);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="comment">// only if current pet in slot</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>())</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471ae855adcbda374b2c654ae4e9a9bf2ce1">MINI_PET</a>:</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                <span class="keywordflow">if</span> (p_owner)</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                    p_owner-&gt;<a class="code" href="classUnit.html#a070093265604ae1cf5972dc032bb655b">SetMiniPet</a>(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a23adf99a764bb4b2fa21add244c5b38b">PROTECTOR_PET</a>:</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471afb3caeecb823c7b5ee717d5e24d5e879">GUARDIAN_PET</a>:</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                owner-&gt;<a class="code" href="classUnit.html#aae47c6238a31a814381be6848915b13a">RemoveGuardian</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a83bec8aa36224306974de205d77c2872">m_controllableGuardian</a>)</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                    <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classUnit.html#a57870b79c2a356567afd5febedf79a61">GetPetGuid</a>() == <a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>())</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                        owner-&gt;<a class="code" href="classUnit.html#a694208f5c89fef8e9d968150dbb5b274">SetPet</a>(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                        <a class="code" href="classPet.html#a1b5f3fb677def2f7e7140f723e56301b">m_saveAutocast</a> = <span class="keyword">false</span>; <span class="comment">// only save the main one</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classUnit.html#a57870b79c2a356567afd5febedf79a61">GetPetGuid</a>() == <a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>())</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                    owner-&gt;<a class="code" href="classUnit.html#a694208f5c89fef8e9d968150dbb5b274">SetPet</a>(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordflow">if</span> (p_owner)</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <a class="code" href="classPet.html#a7615c24d34c9dd55d15719fc50eba498">SavePetToDB</a>(mode, p_owner);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a9d623f0127c82864f885e09a9ddd2eb8">isControlled</a>())</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classObject.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            <span class="keyword">static_cast&lt;</span><a class="code" href="classPlayer.html">Player</a>*<span class="keyword">&gt;</span>(owner)-&gt;RemoveControllable(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <a class="code" href="classWorldObject.html#a8b5bf67b1f64fee748e20a147455c141">AddObjectToRemoveList</a>();</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="classPet.html#aaac68db137c1dd9b03527cfd84b9b8b1">m_removed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="classPet.html#af2290a3c05bee3e31937f3bcfe3de603">  889</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#af2290a3c05bee3e31937f3bcfe3de603">Pet::GivePetXP</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> xp)</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;{</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> (xp &lt; 1)</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classUnit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> level = <a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>();</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> maxlevel = std::min(<a class="code" href="group__world.html#ga05dfb35c344e5b947a19e4284e7f5fa7">sWorld</a>.getConfig(<a class="code" href="group__world.html#gga89a532a320ff8bd5866836fee5541232a7baa2c71b7b249a1cfdc13d4e8da705a">CONFIG_UINT32_MAX_PLAYER_LEVEL</a>), <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>()-&gt;<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>());</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">// pet not receive xp for level equal to owner level</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">if</span> (level &lt; maxlevel)</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        xp *= <a class="code" href="group__world.html#ga05dfb35c344e5b947a19e4284e7f5fa7">sWorld</a>.getConfig(<a class="code" href="group__world.html#ggad7288d27ab8a1132a5f30148c227f2bea818b176f2651e6f11e6f8a841e271e31">CONFIG_FLOAT_RATE_PET_XP_KILL</a>);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> nextLvlXP = <a class="code" href="classObject.html#aebc9e7589e372ab99544e474c07609f0">GetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aa05729ef8c6250d5ed65b77838b49983">UNIT_FIELD_PETNEXTLEVELEXP</a>);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> curXP = <a class="code" href="classObject.html#aebc9e7589e372ab99544e474c07609f0">GetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a132df4597ea73a26d0574cbcfe3d9b5c">UNIT_FIELD_PETEXPERIENCE</a>);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> newXP = curXP + xp;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordflow">while</span> (newXP &gt;= nextLvlXP &amp;&amp; level &lt; maxlevel)</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            newXP -= nextLvlXP;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            ++level;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <a class="code" href="classPet.html#ae7a38fa1c07c594775ef7b28e61f0475">GivePetLevel</a>(level);                              <span class="comment">// also update UNIT_FIELD_PETNEXTLEVELEXP and UNIT_FIELD_PETEXPERIENCE to level start</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            nextLvlXP = <a class="code" href="classObject.html#aebc9e7589e372ab99544e474c07609f0">GetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aa05729ef8c6250d5ed65b77838b49983">UNIT_FIELD_PETNEXTLEVELEXP</a>);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a132df4597ea73a26d0574cbcfe3d9b5c">UNIT_FIELD_PETEXPERIENCE</a>, level &lt; maxlevel ? newXP : 0);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno"><a class="line" href="classPet.html#ae7a38fa1c07c594775ef7b28e61f0475">  927</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#ae7a38fa1c07c594775ef7b28e61f0475">Pet::GivePetLevel</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> level)</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;{</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">if</span> (!level || level == <a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>())</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>)</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a132df4597ea73a26d0574cbcfe3d9b5c">UNIT_FIELD_PETEXPERIENCE</a>, 0);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aa05729ef8c6250d5ed65b77838b49983">UNIT_FIELD_PETNEXTLEVELEXP</a>, <a class="code" href="ObjectMgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>.GetXPForPetLevel(level));</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <a class="code" href="classPet.html#aaa0288323bfc9d12566ec9188d5f7632">InitStatsForLevel</a>(level);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="classPet.html#afeb6b4e172c202a327ae853c132a1247">InitLevelupSpellsForLevel</a>();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <a class="code" href="classPet.html#a43a35bdd7f233f6ae5233ad55f30c641">InitTalentForLevel</a>();</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;}</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno"><a class="line" href="classPet.html#a8ed323b81d6c9692ab2455d14e9e640e">  943</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a8ed323b81d6c9692ab2455d14e9e640e">Pet::CreateBaseAtCreature</a>(<a class="code" href="classCreature.html">Creature</a>* creature)</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;{</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">if</span> (!creature)</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outError(<span class="stringliteral">&quot;CRITICAL: NULL pointer passed into CreateBaseAtCreature()&quot;</span>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="structCreatureCreatePos.html">CreatureCreatePos</a> pos(creature, creature-&gt;<a class="code" href="classWorldObject.html#ab6ca0a11a0d2bb8a7ec0110adb732857">GetOrientation</a>());</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> guid = creature-&gt;<a class="code" href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="classMap.html#ae6d148d8a684f0fdb49211fc6524d2d0">GenerateLocalLowGuid</a>(<a class="code" href="ObjectGuid_8h.html#abe8666ac87665ba963053cdd2b014750a1615463418bf6aeaacb8df3af61b018e">HIGHGUID_PET</a>);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="Log_8h.html#a66ee45c2c4582addc7fba4147eb4741c">BASIC_LOG</a>(<span class="stringliteral">&quot;Create pet&quot;</span>);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> pet_number = <a class="code" href="ObjectMgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>.GeneratePetNumber();</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a42cf6a2fc2dc5882396db1fc06fb6edc">Create</a>(guid, pos, creature-&gt;<a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>(), pet_number))</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="structCreatureInfo.html">CreatureInfo</a> <span class="keyword">const</span>* cInfo = <a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>();</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">if</span> (!cInfo)</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outError(<span class="stringliteral">&quot;CreateBaseAtCreature() failed, creatureInfo is missing!&quot;</span>);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    }</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <a class="code" href="classUnit.html#aab919c89c1c0fead6ece2c26e6c565a4">SetDisplayId</a>(creature-&gt;<a class="code" href="classUnit.html#a86b4d9e6cfa52d722608466a285cac0c">GetDisplayId</a>());</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <a class="code" href="classUnit.html#aa16143de8ebccefd088f51b53ec84458">SetNativeDisplayId</a>(creature-&gt;<a class="code" href="classUnit.html#a8ac9fa13ad31b42e5d1372694d22a799">GetNativeDisplayId</a>());</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <a class="code" href="classUnit.html#a665cb09340bb34d09800ac518f8b40b8">SetMaxPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>, <a class="code" href="classUnit.html#a085d47fd164802e379e9a90a528da2d3">GetCreatePowers</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>));</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <a class="code" href="classUnit.html#afcc2a2d47162fc8c4792eac575025086">SetPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a>, 166500);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <a class="code" href="classUnit.html#aef3abd7c33c5a6578dbd3efadd6f49ca">SetPowerType</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27adf1e2c1dbfbecd82a3bdcef559ac8cc3">POWER_FOCUS</a>);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a8a4774bff9e2c26fe65610992b9bfb37">UNIT_FIELD_PET_NAME_TIMESTAMP</a>, 0);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a132df4597ea73a26d0574cbcfe3d9b5c">UNIT_FIELD_PETEXPERIENCE</a>, 0);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aa05729ef8c6250d5ed65b77838b49983">UNIT_FIELD_PETNEXTLEVELEXP</a>, <a class="code" href="ObjectMgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>.GetXPForPetLevel(creature-&gt;<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>()));</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a10674c45e01f88895742624d8065dea7">UNIT_NPC_FLAGS</a>, <a class="code" href="group__game.html#gga020b49642bdc8ff68e087e36cf07fb97a7d75bb1546efb3a78c8ca3798667e2ef">UNIT_NPC_FLAG_NONE</a>);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160; </div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structCreatureFamilyEntry.html">CreatureFamilyEntry</a> <span class="keyword">const</span>* cFamily = <a class="code" href="DBCStores_8cpp.html#a83ea3f8701464968bcfc119ad499b756">sCreatureFamilyStore</a>.LookupEntry(cInfo-&gt;<a class="code" href="structCreatureInfo.html#a55f9e7b8189a5de4ef01d0787b161801">Family</a>))</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <a class="code" href="classWorldObject.html#ab0e25e8aff1c21bb10a1e2d2319363d1">SetName</a>(cFamily-&gt;Name[<a class="code" href="group__world.html#ga05dfb35c344e5b947a19e4284e7f5fa7">sWorld</a>.GetDefaultDbcLocale()]);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <a class="code" href="classWorldObject.html#ab0e25e8aff1c21bb10a1e2d2319363d1">SetName</a>(creature-&gt;<a class="code" href="classCreature.html#afccd80c6dd2ce153d8219c086822fe55">GetNameForLocaleIdx</a>(<a class="code" href="ObjectMgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>.GetDbc2StorageLocaleIndex()));</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="classObject.html#a0a29933a2da73d788a130f971511f2f5">SetByteValue</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a49274b75b31edf1b32e1922b5e37fb0c">UNIT_FIELD_BYTES_0</a>, <a class="code" href="group__game.html#gga1c9606f347ccaa6eee4d1036b4bc5299af354d7bb7fe5f4ab0fca635363e11d40">UNIT_BYTES_0_OFFSET_CLASS</a>, <a class="code" href="SharedDefines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa679de5e410197d42cea53f371aba7f59">CLASS_WARRIOR</a>);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <a class="code" href="classObject.html#a0a29933a2da73d788a130f971511f2f5">SetByteValue</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a49274b75b31edf1b32e1922b5e37fb0c">UNIT_FIELD_BYTES_0</a>, <a class="code" href="group__game.html#gga1c9606f347ccaa6eee4d1036b4bc5299abf848159b5014516f03305c803b26741">UNIT_BYTES_0_OFFSET_GENDER</a>, <a class="code" href="SharedDefines_8h.html#a3667e3c5ec056737c8789615a989324fafe69f428f13193dcfd8ed8f30d6d2e07">GENDER_NONE</a>);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="classObject.html#a0a29933a2da73d788a130f971511f2f5">SetByteValue</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a49274b75b31edf1b32e1922b5e37fb0c">UNIT_FIELD_BYTES_0</a>, <a class="code" href="group__game.html#gga1c9606f347ccaa6eee4d1036b4bc5299a07bebc15b9616c108f18532079cb9460">UNIT_BYTES_0_OFFSET_POWER_TYPE</a>, <a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27adf1e2c1dbfbecd82a3bdcef559ac8cc3">POWER_FOCUS</a>);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <a class="code" href="classUnit.html#a7ae13a942847716011855720fb4a1d3a">SetSheath</a>(<a class="code" href="group__game.html#ggab7f73bef2e8c2d6be5e65b55062f3ceba72a383a4d8b9eacc45b04550148927f0">SHEATH_STATE_MELEE</a>);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="classObject.html#a0a29933a2da73d788a130f971511f2f5">SetByteValue</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af2d4e268d5842c9b63100cfa2876c8cd">UNIT_FIELD_BYTES_2</a>, 1, <a class="code" href="group__game.html#ggadfd426d7c800ae9b37ca91f5f2fd5d01a2513b9adc3e0167e38ec3835d5d3e5bf">UNIT_BYTE2_FLAG_AURAS</a>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="classObject.html#afe65b1ab32dbcd51890b754fb8b5e1b0">SetByteFlag</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af2d4e268d5842c9b63100cfa2876c8cd">UNIT_FIELD_BYTES_2</a>, 2, <a class="code" href="group__game.html#gga0ea77d345dd1f26d151dde7a688de945ac5b1e1a1d4ad6576bafaf9880e0cb7a5">UNIT_CAN_BE_RENAMED</a> | <a class="code" href="group__game.html#gga0ea77d345dd1f26d151dde7a688de945ad71ccc862237150755b91ae8132975b5">UNIT_CAN_BE_ABANDONED</a>);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552ac75aa2eacc0e809ae582c85d245c1e4c">UNIT_FLAG_PLAYER_CONTROLLED</a> | <a class="code" href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552a9d7b684ff2b06e94dffa670b96f295cb">UNIT_FLAG_RENAME</a>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a>, creature-&gt;<a class="code" href="classObject.html#aebc9e7589e372ab99544e474c07609f0">GetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a>));</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;}</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno"><a class="line" href="classPet.html#aaa0288323bfc9d12566ec9188d5f7632">  997</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#aaa0288323bfc9d12566ec9188d5f7632">Pet::InitStatsForLevel</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> petlevel)</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;{</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <a class="code" href="structCreatureInfo.html">CreatureInfo</a> <span class="keyword">const</span>* cInfo = <a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>();</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="Errors_8h.html#a7b94d20194b84dde056465e12496d3f4">MANGOS_ASSERT</a>(cInfo);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <a class="code" href="classUnit.html#a5058c827438f21ba95b0b404e5bb0258">SetLevel</a>(petlevel);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <a class="code" href="classObject.html#abc072fa242381b397e4d282e31bcb950">SetFloatValue</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a>, 1.0);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <a class="code" href="classUnit.html#a9eba66db4d38ec822657041599cb458e">SetMeleeDamageSchool</a>(<a class="code" href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a>(<a class="code" href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>));</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <a class="code" href="classUnit.html#adeb215374587957e59c2551053895fa1">SetAttackTime</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#ga6e75af6bfeb72695535b30f4523d119a">BASE_ATTACK_TIME</a>);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="classUnit.html#adeb215374587957e59c2551053895fa1">SetAttackTime</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>, <a class="code" href="group__game.html#ga6e75af6bfeb72695535b30f4523d119a">BASE_ATTACK_TIME</a>);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <a class="code" href="classUnit.html#adeb215374587957e59c2551053895fa1">SetAttackTime</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>, <a class="code" href="group__game.html#ga6e75af6bfeb72695535b30f4523d119a">BASE_ATTACK_TIME</a>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="classUnit.html#a9eba66db4d38ec822657041599cb458e">SetMeleeDamageSchool</a>(<a class="code" href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a>(cInfo-&gt;<a class="code" href="structCreatureInfo.html#afc90efba3cd9b2c8bb34ddacc04a5a02">DamageSchool</a>));</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <a class="code" href="classUnit.html#adeb215374587957e59c2551053895fa1">SetAttackTime</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#a2462d7479a796828ff9b4cf4b9b5a11a">MeleeBaseAttackTime</a>);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <a class="code" href="classUnit.html#adeb215374587957e59c2551053895fa1">SetAttackTime</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#a2462d7479a796828ff9b4cf4b9b5a11a">MeleeBaseAttackTime</a>);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <a class="code" href="classUnit.html#adeb215374587957e59c2551053895fa1">SetAttackTime</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#ae1870fa889cda87d0ffb15de526d0e3d">RangedBaseAttackTime</a>);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="classUnit.html#a174a156cc2366b993373ffa603859fdb">SetCreateResistance</a>(<a class="code" href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62">SPELL_SCHOOL_HOLY</a>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#a43f5d0804edaca3c5f3ab268c2ce5491">ResistanceHoly</a>);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <a class="code" href="classUnit.html#a174a156cc2366b993373ffa603859fdb">SetCreateResistance</a>(<a class="code" href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca81fa2e882b9ff91d97f1966ecec53cc5">SPELL_SCHOOL_FIRE</a>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#abf2c3bb394e97dd1108820ae36b0c06b">ResistanceFire</a>);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="classUnit.html#a174a156cc2366b993373ffa603859fdb">SetCreateResistance</a>(<a class="code" href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca09fc89d828412bd44caab029414ef572">SPELL_SCHOOL_NATURE</a>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#a7ef66e7ee81c4ee78a1d48e06e17eec5">ResistanceNature</a>);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <a class="code" href="classUnit.html#a174a156cc2366b993373ffa603859fdb">SetCreateResistance</a>(<a class="code" href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0f89e62868c910d070db0ce176e7e4ad">SPELL_SCHOOL_FROST</a>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#add8ade8c4f067a33e677d2eace48edaf">ResistanceFrost</a>);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <a class="code" href="classUnit.html#a174a156cc2366b993373ffa603859fdb">SetCreateResistance</a>(<a class="code" href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca012e4eaa4bc0f0534aa45cec3f854193">SPELL_SCHOOL_SHADOW</a>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#a105ff440597545ce970a6cbca63e2eb7">ResistanceShadow</a>);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <a class="code" href="classUnit.html#a174a156cc2366b993373ffa603859fdb">SetCreateResistance</a>(<a class="code" href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca5fffe6beea5302fef06839a6b1ff3bb0">SPELL_SCHOOL_ARCANE</a>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#a33e5707c3201ab0ef5296a47c6f2ceae">ResistanceArcane</a>);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordtype">float</span> health = 0.f;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordtype">float</span> mana = 0.f;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordtype">float</span> armor = 0.f;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471">PetType</a> petType = <a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>();</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classUnit.html#a6d1af92863df5e94a0d4431c454f5b2d">GetOwnerGuid</a>().<a class="code" href="classObject.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        petType = <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471afb3caeecb823c7b5ee717d5e24d5e879">GUARDIAN_PET</a>; <span class="comment">// for purpose of pet scaling, NPC summoned SUMMON_PET scale as GUARDIAN_PET</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">switch</span> (petType)</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>:</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <a class="code" href="structCreatureFamilyEntry.html">CreatureFamilyEntry</a> <span class="keyword">const</span>* cFamily = <a class="code" href="DBCStores_8cpp.html#a83ea3f8701464968bcfc119ad499b756">sCreatureFamilyStore</a>.LookupEntry(cInfo-&gt;<a class="code" href="structCreatureInfo.html#a55f9e7b8189a5de4ef01d0787b161801">Family</a>);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <span class="keywordflow">if</span> (cFamily &amp;&amp; cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#a3eacdd8639c6dd25dbd3205a58860cf9">minScale</a> &gt; 0.0f)</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                <span class="keywordtype">float</span> scale;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>() &gt;= cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#ad5d722d74bc08d4de3edd54c2f24addb">maxScaleLevel</a>)</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                    scale = cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#a23ca0ae7c45790a24f58546970194abf">maxScale</a>;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>() &lt;= cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#a49d9d7847cc4d54891d83166eb277740">minScaleLevel</a>)</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    scale = cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#a3eacdd8639c6dd25dbd3205a58860cf9">minScale</a>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    scale = cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#a3eacdd8639c6dd25dbd3205a58860cf9">minScale</a> + float(<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>() - cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#a49d9d7847cc4d54891d83166eb277740">minScaleLevel</a>) / cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#ad5d722d74bc08d4de3edd54c2f24addb">maxScaleLevel</a> * (cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#a23ca0ae7c45790a24f58546970194abf">maxScale</a> - cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#a3eacdd8639c6dd25dbd3205a58860cf9">minScale</a>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                <a class="code" href="classObject.html#ab1221153d59ef17ba4790cec60eaa9bf">SetObjectScale</a>(scale);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                <a class="code" href="classUnit.html#a845005156a1602638123fad05aec9f1a">UpdateModelData</a>();</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            <span class="comment">// Max level</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <span class="keywordflow">if</span> (petlevel &lt; <a class="code" href="group__world.html#ga05dfb35c344e5b947a19e4284e7f5fa7">sWorld</a>.getConfig(<a class="code" href="group__world.html#gga89a532a320ff8bd5866836fee5541232a7baa2c71b7b249a1cfdc13d4e8da705a">CONFIG_UINT32_MAX_PLAYER_LEVEL</a>))</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aa05729ef8c6250d5ed65b77838b49983">UNIT_FIELD_PETNEXTLEVELEXP</a>, <a class="code" href="ObjectMgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>.GetXPForPetLevel(petlevel));</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a132df4597ea73a26d0574cbcfe3d9b5c">UNIT_FIELD_PETEXPERIENCE</a>, 0);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aa05729ef8c6250d5ed65b77838b49983">UNIT_FIELD_PETNEXTLEVELEXP</a>, 1000);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            }</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <span class="comment">// Info found in pet_levelstats</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structPetLevelInfo.html">PetLevelInfo</a> <span class="keyword">const</span>* pInfo = <a class="code" href="ObjectMgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>.GetPetLevelInfo(1, petlevel))</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="SharedDefines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code" href="SharedDefines_8h.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; ++i)</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                    <a class="code" href="classUnit.html#a0d8467fc487ce4c1eaecdbaab6cddd6f">SetCreateStat</a>(<a class="code" href="SharedDefines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), <span class="keywordtype">float</span>(pInfo-&gt;stats[i]));</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                health = pInfo-&gt;health;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                mana = 0;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                armor = pInfo-&gt;armor;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                <span class="comment">// First we divide attack time by standard attack time, and then multipy by level and damage mod.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> mDmg = (<a class="code" href="classUnit.html#aa4192d3622a4c41d4c5a46a60209e62e">GetAttackTime</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>) * petlevel) / 2000;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                <span class="comment">// Set damage</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                <a class="code" href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">SetBaseWeaponDamage</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#gga4961ced707837d09157e8296ab8a2507a353ec7972b73e76751349c9abe91e80b">MINDAMAGE</a>, <span class="keywordtype">float</span>(mDmg - mDmg / 4.f));</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                <a class="code" href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">SetBaseWeaponDamage</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#gga4961ced707837d09157e8296ab8a2507a5e4c68960c0bd10b439817ec3f1112ca">MAXDAMAGE</a>, <span class="keywordtype">float</span>((mDmg - mDmg / 4.f) * 1.5));</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outErrorDb(<span class="stringliteral">&quot;HUNTER PET levelstats missing in DB! &#39;Weakifying&#39; pet. Entry: 1 PetLevel: %u.&quot;</span>, petlevel);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="SharedDefines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code" href="SharedDefines_8h.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; ++i)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                    <a class="code" href="classUnit.html#a0d8467fc487ce4c1eaecdbaab6cddd6f">SetCreateStat</a>(<a class="code" href="SharedDefines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), 1.0f);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                health = 1;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                mana = 0;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                armor = 0;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                <span class="comment">// Set damage</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                <a class="code" href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">SetBaseWeaponDamage</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#gga4961ced707837d09157e8296ab8a2507a353ec7972b73e76751349c9abe91e80b">MINDAMAGE</a>, 1);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                <a class="code" href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">SetBaseWeaponDamage</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#gga4961ced707837d09157e8296ab8a2507a5e4c68960c0bd10b439817ec3f1112ca">MAXDAMAGE</a>, 1);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a>:</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a132df4597ea73a26d0574cbcfe3d9b5c">UNIT_FIELD_PETEXPERIENCE</a>, 0);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            <a class="code" href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">SetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aa05729ef8c6250d5ed65b77838b49983">UNIT_FIELD_PETNEXTLEVELEXP</a>, 1000);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            <span class="comment">// Info found in pet_levelstats</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structPetLevelInfo.html">PetLevelInfo</a> <span class="keyword">const</span>* pInfo = <a class="code" href="ObjectMgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>.GetPetLevelInfo(cInfo-&gt;<a class="code" href="structCreatureInfo.html#a9a144b4f19fa41dd20ea542e6d913808">Entry</a>, petlevel))</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="SharedDefines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code" href="SharedDefines_8h.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; ++i)</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                    <a class="code" href="classUnit.html#a0d8467fc487ce4c1eaecdbaab6cddd6f">SetCreateStat</a>(<a class="code" href="SharedDefines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), <span class="keywordtype">float</span>(pInfo-&gt;stats[i]));</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                health = pInfo-&gt;health;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                mana = pInfo-&gt;mana;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                armor = pInfo-&gt;armor;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                <span class="comment">// Info found in ClassLevelStats</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="structCreatureClassLvlStats.html">CreatureClassLvlStats</a> <span class="keyword">const</span>* cCLS = <a class="code" href="ObjectMgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>.GetCreatureClassLvlStats(petlevel, cInfo-&gt;<a class="code" href="structCreatureInfo.html#a3f983a5b1595210d7c4464191f1f2827">UnitClass</a>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#a760e58211be07f296e6371f3ee2f6d07">Expansion</a>))</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                    <span class="keywordtype">float</span> minDmg = (cCLS-&gt;BaseDamage * cInfo-&gt;<a class="code" href="structCreatureInfo.html#ac95af50873b9388231e286e47a47d63b">DamageVariance</a> + (cCLS-&gt;BaseMeleeAttackPower / 14) * (cInfo-&gt;<a class="code" href="structCreatureInfo.html#a2462d7479a796828ff9b4cf4b9b5a11a">MeleeBaseAttackTime</a> / 1000.f)) * cInfo-&gt;<a class="code" href="structCreatureInfo.html#a53cf74a73fe2f7e0ac1e925d3ab8ec1d">DamageMultiplier</a>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                    <span class="comment">// Apply custom damage setting (from config)</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                    minDmg *= <a class="code" href="classCreature.html#adfcb8bc5a745c30f0db20024bf397dab">_GetDamageMod</a>(cInfo-&gt;<a class="code" href="structCreatureInfo.html#a8dc1430294293bea573b63171ec1369e">Rank</a>);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                    <a class="code" href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">SetBaseWeaponDamage</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#gga4961ced707837d09157e8296ab8a2507a353ec7972b73e76751349c9abe91e80b">MINDAMAGE</a>, <span class="keywordtype">float</span>(minDmg));</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                    <a class="code" href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">SetBaseWeaponDamage</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#gga4961ced707837d09157e8296ab8a2507a5e4c68960c0bd10b439817ec3f1112ca">MAXDAMAGE</a>, <span class="keywordtype">float</span>(minDmg * 1.5));</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                    <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outErrorDb(<span class="stringliteral">&quot;SUMMON_PET creature_template not finished (expansion field = -1) on creature %s! (entry: %u)&quot;</span>, <a class="code" href="classObject.html#a5c2f31b9fb0a083ff4caca3de93fac90">GetGuidStr</a>().c_str(), cInfo-&gt;<a class="code" href="structCreatureInfo.html#a9a144b4f19fa41dd20ea542e6d913808">Entry</a>);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                    <span class="keywordtype">float</span> dMinLevel = cInfo-&gt;<a class="code" href="structCreatureInfo.html#a2b7a22496d2d170593af140e9294ccd8">MinMeleeDmg</a> / cInfo-&gt;<a class="code" href="structCreatureInfo.html#a3e8132a98e9bb6143023c97e72b5a739">MinLevel</a>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                    <span class="keywordtype">float</span> dMaxLevel = cInfo-&gt;<a class="code" href="structCreatureInfo.html#a71161eb15a125f98e11d7e5daa84b4ca">MaxMeleeDmg</a> / cInfo-&gt;<a class="code" href="structCreatureInfo.html#ae52c39a94d77b11abdf1f93028bf9937">MaxLevel</a>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                    <span class="keywordtype">float</span> mDmg = (dMaxLevel - ((dMaxLevel - dMinLevel) / 2)) * petlevel;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                    <span class="comment">// Set damage</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                    <a class="code" href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">SetBaseWeaponDamage</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#gga4961ced707837d09157e8296ab8a2507a353ec7972b73e76751349c9abe91e80b">MINDAMAGE</a>, <span class="keywordtype">float</span>(mDmg - mDmg / 4));</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                    <a class="code" href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">SetBaseWeaponDamage</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#gga4961ced707837d09157e8296ab8a2507a5e4c68960c0bd10b439817ec3f1112ca">MAXDAMAGE</a>, <span class="keywordtype">float</span>((mDmg - mDmg / 4) * 1.5));</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            {</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outErrorDb(<span class="stringliteral">&quot;SUMMON_PET levelstats missing in DB! &#39;Weakifying&#39; pet and giving it mana to make it obvious. Entry: %u Level: %u&quot;</span>, cInfo-&gt;<a class="code" href="structCreatureInfo.html#a9a144b4f19fa41dd20ea542e6d913808">Entry</a>, petlevel);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="SharedDefines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code" href="SharedDefines_8h.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; ++i)</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                    <a class="code" href="classUnit.html#a0d8467fc487ce4c1eaecdbaab6cddd6f">SetCreateStat</a>(<a class="code" href="SharedDefines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), 1.0f);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                health = 1;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                mana = 1;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                armor = 1;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                <span class="comment">// Set damage</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                <a class="code" href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">SetBaseWeaponDamage</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#gga4961ced707837d09157e8296ab8a2507a353ec7972b73e76751349c9abe91e80b">MINDAMAGE</a>, 1);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                <a class="code" href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">SetBaseWeaponDamage</a>(<a class="code" href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code" href="group__game.html#gga4961ced707837d09157e8296ab8a2507a5e4c68960c0bd10b439817ec3f1112ca">MAXDAMAGE</a>, 1);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a23adf99a764bb4b2fa21add244c5b38b">PROTECTOR_PET</a>:</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471afb3caeecb823c7b5ee717d5e24d5e879">GUARDIAN_PET</a>:</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <a class="code" href="classCreature.html#aeabcba8703e2e98708f80894a8e6c976">SelectLevel</a>(petlevel);  <span class="comment">// guardians reuse CLS function SelectLevel, so we stop here</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <a class="code" href="classPet.html#a289e06779baced17e3788b0b7ee3debc">InitPetScalingAuras</a>();</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outError(<span class="stringliteral">&quot;Pet have incorrect type (%u) for level handling.&quot;</span>, <a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>());</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// Hunter and Warlock pets should NOT use creature&#39;s original modifiers/multipliers</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a> &amp;&amp; <a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a>)</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        health *= cInfo-&gt;<a class="code" href="structCreatureInfo.html#a2d6ea83588e36f5dbd6f9ea473edf749">HealthMultiplier</a>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">if</span> (mana &gt; 0)</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            mana *= cInfo-&gt;<a class="code" href="structCreatureInfo.html#aceb233a74bbf2d2bcad51c15c2b82198">PowerMultiplier</a>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        armor *= cInfo-&gt;<a class="code" href="structCreatureInfo.html#a0536b06a2da3275f15af044fe84fffc4">ArmorMultiplier</a>;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    }</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="comment">// Apply custom health setting (from config)</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    health *= <a class="code" href="classCreature.html#a8e79b5c25db2911cb945219bc460dfdc">_GetHealthMod</a>(cInfo-&gt;<a class="code" href="structCreatureInfo.html#a8dc1430294293bea573b63171ec1369e">Rank</a>);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="comment">// A pet cannot not have health</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">if</span> (health &lt; 1)</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        health = 1;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="comment">// Set base Health and Mana</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <a class="code" href="classUnit.html#a2b4a942157fb3a7ca2f01f9fe11c260d">SetCreateHealth</a>(health);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <a class="code" href="classUnit.html#a776d97f611480fe42e082cc967b05498">SetCreateMana</a>(mana);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="comment">// Set base Armor</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <a class="code" href="classUnit.html#ab7bfc8688e1cc14d336d6e2ad9ecc94d">SetModifierValue</a>(<a class="code" href="group__game.html#gga4c5336cd4be5f0162bd4874b0a1e5bdea0d5ec0678c61e8de24b4e3d731bd4716">UNIT_MOD_ARMOR</a>, <a class="code" href="group__game.html#ggaa21edecdaa2e077b2b87bbe5f2b2e7eea6e506f81d8257be9b031ecaf9d9922d1">BASE_VALUE</a>, armor);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <a class="code" href="classPet.html#a289e06779baced17e3788b0b7ee3debc">InitPetScalingAuras</a>();</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="comment">// Need to update stats - calculates max health/mana etc</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <a class="code" href="classPet.html#acca9c8377e6b78b164eccadea41af960">UpdateAllStats</a>();</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="comment">// Need to set Health to full</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <a class="code" href="classUnit.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(<a class="code" href="classUnit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>());</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160; </div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="comment">// Need to set Mana to full</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a4ae648f71881fd67bcdd861ec4ef2363">GetPowerType</a>() == <a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <a class="code" href="classUnit.html#afcc2a2d47162fc8c4792eac575025086">SetPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>, <a class="code" href="classUnit.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>));</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160; </div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="comment">// Remove rage bar from pets (By setting rage = 0, and ensuring it stays that way by setting max rage = 0 as well)</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <a class="code" href="classUnit.html#a665cb09340bb34d09800ac518f8b40b8">SetMaxPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>, 0);</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <a class="code" href="classUnit.html#afcc2a2d47162fc8c4792eac575025086">SetPower</a>(<a class="code" href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>, 0);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;}</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160; </div>
<div class="line"><a name="l01211"></a><span class="lineno"><a class="line" href="classPet.html#a289e06779baced17e3788b0b7ee3debc"> 1211</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a289e06779baced17e3788b0b7ee3debc">Pet::InitPetScalingAuras</a>()</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;{</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a05824b76b9efd191adffe3b6a198728e">m_scalingAuras</a>.size() &gt; 0) <span class="comment">// levelup rebuild case</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <a class="code" href="classUnit.html#a57f92100c6f61533e6653aac66775e7c">UpdateScalingAuras</a>();</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    }</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    std::vector&lt;uint32&gt; scalingAuras;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>)</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        scalingAuras.insert(scalingAuras.end(), { 34902, 34903, 34904 });</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="classObject.html#aebc9e7589e372ab99544e474c07609f0">GetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af6ab95e21ce3e6cd8f5f7ec4a3c5d24a">UNIT_CREATED_BY_SPELL</a>))</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            <span class="keywordflow">case</span> 688: <span class="comment">// Imp - Warlock</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            <span class="keywordflow">case</span> 691: <span class="comment">// Felhunter</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <span class="keywordflow">case</span> 697: <span class="comment">// Voidwalker</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            <span class="keywordflow">case</span> 712: <span class="comment">// Succubus</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <span class="keywordflow">case</span> 30146: <span class="comment">// Felguard</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                scalingAuras.insert(scalingAuras.end(), { 34947, 34956, 34957, 34958 });</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <span class="keywordflow">case</span> 12740: <span class="comment">// Infernal - Warlock - unique - isnt updated on stat changes</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            <span class="keywordflow">case</span> 18541: <span class="comment">// Doomguard - Ritual of Doom</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            <span class="keywordflow">case</span> 18662: <span class="comment">// Doomguard - Curse of Doom</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                scalingAuras.insert(scalingAuras.end(), { 36186, 36188, 36189, 36190 });</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            <span class="keywordflow">case</span> 31687: <span class="comment">// Water Elemental - Mage</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                scalingAuras.insert(scalingAuras.end(), { 35657, 35658, 35659, 35660 });</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            <span class="keywordflow">case</span> 32982: <span class="comment">// Fire Elemental - Shaman</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                scalingAuras.insert(scalingAuras.end(), { 35665, 35666, 35667, 35668 });</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            <span class="keywordflow">case</span> 33663: <span class="comment">// Earth Elemental - Shaman</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                scalingAuras.insert(scalingAuras.end(), { 35674, 35675, 35676 });</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="keywordflow">case</span> 33831: <span class="comment">// Force Of Nature - Treants - Druid</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                scalingAuras.insert(scalingAuras.end(), { 35669, 35670, 35671, 35672 });</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <span class="keywordflow">case</span> 34433: <span class="comment">// Shadowfiend - Priest</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                scalingAuras.insert(scalingAuras.end(), { 35661, 35662, 35663, 35664 });</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        }</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId : scalingAuras)</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <a class="code" href="classUnit.html#a211876b6b1dcea2eedcc52e754093d70">CastSpell</a>(<span class="keyword">nullptr</span>, spellId, <a class="code" href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29ad2e82d2342b545f831dfe79d922a3b20">TRIGGERED_NONE</a>);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;}</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"><a class="line" href="classPet.html#a13f56cb7da4abfd020929741d21628dd"> 1262</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a13f56cb7da4abfd020929741d21628dd">Pet::PlayDismissSound</a>()</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;{</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> soundId = 0;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="classObject.html#aebc9e7589e372ab99544e474c07609f0">GetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af6ab95e21ce3e6cd8f5f7ec4a3c5d24a">UNIT_CREATED_BY_SPELL</a>))</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        <span class="keywordflow">case</span> 688: <span class="comment">// Imp - Warlock</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            soundId = <a class="code" href="Util_8cpp.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1) ? 11 : 371;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <span class="comment">//case 691: // Felhunter</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="comment">//    soundId = 11;</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="comment">//    break;</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <span class="keywordflow">case</span> 697: <span class="comment">// Voidwalker</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            soundId = 162;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <span class="keywordflow">case</span> 712: <span class="comment">// Succubus</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            soundId = 37;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="keywordflow">case</span> 22865: <span class="comment">// Doomguard</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            soundId = 68;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <span class="keywordflow">case</span> 30146: <span class="comment">// Felguard</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            soundId = 551;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    }</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="classUnit.html#a18f9eea242a311fdf78898c42fba12c8">SendPetDismiss</a>(soundId);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;}</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"><a class="line" href="classPet.html#a14dac45e5b46ed30df4713f98a69bece"> 1289</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a14dac45e5b46ed30df4713f98a69bece">Pet::HaveInDiet</a>(<a class="code" href="structItemPrototype.html">ItemPrototype</a> <span class="keyword">const</span>* item)<span class="keyword"> const</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordflow">if</span> (!item-&gt;<a class="code" href="structItemPrototype.html#a8b500820accc0beeb24cbdef8a8bf185">FoodType</a>)</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <a class="code" href="structCreatureInfo.html">CreatureInfo</a> <span class="keyword">const</span>* cInfo = <a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>();</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keywordflow">if</span> (!cInfo)</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <a class="code" href="structCreatureFamilyEntry.html">CreatureFamilyEntry</a> <span class="keyword">const</span>* cFamily = <a class="code" href="DBCStores_8cpp.html#a83ea3f8701464968bcfc119ad499b756">sCreatureFamilyStore</a>.LookupEntry(cInfo-&gt;<a class="code" href="structCreatureInfo.html#a55f9e7b8189a5de4ef01d0787b161801">Family</a>);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">if</span> (!cFamily)</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keyword">const</span> <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> diet = cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#a4d9dd8baa3f7981633248513bb25f4ca">petFoodMask</a>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keyword">const</span> <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> FoodMask = 1 &lt;&lt; (item-&gt;<a class="code" href="structItemPrototype.html#a8b500820accc0beeb24cbdef8a8bf185">FoodType</a> - 1);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">return</span> (diet &amp; FoodMask) != 0;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;}</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"><a class="line" href="classPet.html#ad5eaac78f6eace6db0d40d2f388c90f5"> 1307</a></span>&#160;<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> <a class="code" href="classPet.html#ad5eaac78f6eace6db0d40d2f388c90f5">Pet::GetCurrentFoodBenefitLevel</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> itemlevel)<span class="keyword"> const</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="comment">// -5 or greater food level</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>() &lt;= itemlevel + 5)                        <span class="comment">// possible to feed level 60 pet with level 55 level food for full effect</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="keywordflow">return</span> 35000;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="comment">// -10..-6</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>() &lt;= itemlevel + 10)                  <span class="comment">// pure guess, but sounds good</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="keywordflow">return</span> 17000;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="comment">// -14..-11</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>() &lt;= itemlevel + 14)                  <span class="comment">// level 55 food gets green on 70, makes sense to me</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="keywordflow">return</span> 8000;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="comment">// -15 or less</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="comment">// food too low level</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;}</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"><a class="line" href="classPet.html#a3cbd2b762d3181631799fec78c4f54ed"> 1323</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a3cbd2b762d3181631799fec78c4f54ed">Pet::_LoadSpellCooldowns</a>()</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;{</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="classQueryResult.html">QueryResult</a>* result = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;SELECT spell,time FROM pet_spell_cooldown WHERE guid = &#39;%u&#39;&quot;</span>, <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>());</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <a class="code" href="classByteBuffer.html">ByteBuffer</a> cdData;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> cdCount = 0;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160; </div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="keyword">auto</span> curTime = <a class="code" href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="classMap.html#ae061a2836480ed6702252224d49a19e2">GetCurrentClockTime</a>();</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            <a class="code" href="classField.html">Field</a>* fields = result-&gt;<a class="code" href="classQueryResult.html#ae59bcb12d59b9a369953be91ddb5c446">Fetch</a>();</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spell_id   = fields[0].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            <a class="code" href="Define_8h.html#ac4dd6ce78ce3b840c53bd4b3c63ed09b">uint64</a> spell_time = fields[1].<a class="code" href="classField.html#a757dd8cac1b769fdb82d8a529bad9d5b">GetUInt64</a>();</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <a class="code" href="structSpellEntry.html">SpellEntry</a> <span class="keyword">const</span>* spellEntry = <a class="code" href="SQLStorages_8cpp.html#a6e07b93ae2737d35f4214041a6f735f4">sSpellTemplate</a>.<a class="code" href="classSQLStorage.html#ace42ec0424ef41d187eb7c1bdcfa8c62">LookupEntry</a>&lt;<a class="code" href="structSpellEntry.html">SpellEntry</a>&gt;(spell_id);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="keywordflow">if</span> (!spellEntry)</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outError(<span class="stringliteral">&quot;%s has unknown spell %u in `character_spell_cooldown`, skipping.&quot;</span>, <a class="code" href="classObject.html#a5c2f31b9fb0a083ff4caca3de93fac90">GetGuidStr</a>().c_str(), spell_id);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            }</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;            <a class="code" href="Common_8h.html#a4261a6a40855caeed69661cc67faca82">TimePoint</a> spellExpireTime = std::chrono::time_point_cast&lt;std::chrono::milliseconds&gt;(Clock::from_time_t(spell_time));</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            std::chrono::milliseconds spellRecTime = std::chrono::milliseconds::zero();</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            <span class="keywordflow">if</span> (spellExpireTime &gt; curTime)</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                spellRecTime = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(spellExpireTime - curTime);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <span class="comment">// skip outdated cooldown</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            <span class="keywordflow">if</span> (spellRecTime == std::chrono::milliseconds::zero())</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            cdData &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(spell_id);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            cdData &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(spellRecTime.count()));</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            ++cdCount;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160; </div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            <a class="code" href="classWorldObject.html#a1eae905a04c755457c63fd1df93b6099">m_cooldownMap</a>.<a class="code" href="classCooldownContainer.html#a8a77bcfea68ceefe0623b2e08ee01045">AddCooldown</a>(<a class="code" href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;GetCurrentClockTime(), spell_id, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(spellRecTime.count()));</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellCDDuration = std::chrono::duration_cast&lt;std::chrono::seconds&gt;(spellRecTime).count();</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outDebug(<span class="stringliteral">&quot;Adding spell cooldown to %s, SpellID(%u), recDuration(%us).&quot;</span>, <a class="code" href="classObject.html#a5c2f31b9fb0a083ff4caca3de93fac90">GetGuidStr</a>().c_str(), spell_id, spellCDDuration);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <span class="keywordflow">while</span> (result-&gt;<a class="code" href="classQueryResult.html#a8f1f135d431fe357bf2b9373dc8d59be">NextRow</a>());</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <span class="keywordflow">if</span> (cdCount &amp;&amp; <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>() &amp;&amp; <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>()-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() == <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            <a class="code" href="classWorldPacket.html">WorldPacket</a> data(<a class="code" href="group__u2w.html#ggabeeee4622d9285fa92e9b61857002caca7297689e6a8523d73cc84f5a9b6333f0">SMSG_SPELL_COOLDOWN</a>, 8 + 1 + cdData.<a class="code" href="classByteBuffer.html#ac06a598447807d32f6594a97a32bce94">size</a>());</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;            data &lt;&lt; <a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>();</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            data &lt;&lt; <a class="code" href="Define_8h.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>(0x0);                                     <span class="comment">// flags (0x1, 0x2)</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;            data.<a class="code" href="classByteBuffer.html#ab71feec2acb9ff88a5c7c7d0adaa7653">append</a>(cdData);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;            <span class="keyword">static_cast&lt;</span><a class="code" href="classPlayer.html">Player</a>*<span class="keyword">&gt;</span>(<a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>())-&gt;GetSession()-&gt;SendPacket(data);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        }</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;}</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"><a class="line" href="classPet.html#a57219fd6c392f0dd5658708c01e4bc18"> 1380</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a57219fd6c392f0dd5658708c01e4bc18">Pet::_SaveSpellCooldowns</a>()</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;{</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="comment">// controllable guardians only save spells and main entry</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a83bec8aa36224306974de205d77c2872">m_controllableGuardian</a>)</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> delSpellCD ;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> insSpellCD ;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <a class="code" href="classSqlStatement.html">SqlStatement</a> stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(delSpellCD, <span class="stringliteral">&quot;DELETE FROM pet_spell_cooldown WHERE guid = ?&quot;</span>);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>());</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="Common_8h.html#a4261a6a40855caeed69661cc67faca82">TimePoint</a> currTime = <a class="code" href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="classMap.html#ae061a2836480ed6702252224d49a19e2">GetCurrentClockTime</a>();</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; cdItr : <a class="code" href="classWorldObject.html#a1eae905a04c755457c63fd1df93b6099">m_cooldownMap</a>)</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <span class="keyword">auto</span>&amp; cdData = cdItr.second;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <span class="keywordflow">if</span> (!cdData-&gt;IsPermanent())</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        {</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            <a class="code" href="Common_8h.html#a4261a6a40855caeed69661cc67faca82">TimePoint</a> sTime = currTime;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;            cdData-&gt;GetSpellCDExpireTime(sTime);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            <a class="code" href="Define_8h.html#ac4dd6ce78ce3b840c53bd4b3c63ed09b">uint64</a> spellExpireTime = <a class="code" href="Define_8h.html#ac4dd6ce78ce3b840c53bd4b3c63ed09b">uint64</a>(Clock::to_time_t(sTime));</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(insSpellCD, <span class="stringliteral">&quot;INSERT INTO pet_spell_cooldown (guid,spell,time) VALUES (?, ?, ?)&quot;</span>);</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>(), cdItr.first, spellExpireTime);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    }</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;}</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"><a class="line" href="classPet.html#a707f2c992ddc77ba6b2aebd08fd31104"> 1409</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a707f2c992ddc77ba6b2aebd08fd31104">Pet::_LoadSpells</a>()</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;{</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    std::unique_ptr&lt;QueryResult&gt; result(<a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;SELECT spell,active FROM pet_spell WHERE guid = &#39;%u&#39;&quot;</span>, <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>()));</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    {</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        {</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            <a class="code" href="classField.html">Field</a>* fields = result-&gt;Fetch();</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160; </div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            <a class="code" href="classPet.html#a281cffe87c86627350f05a3aa15b4aff">addSpell</a>(fields[0].GetUInt32(), <a class="code" href="group__game.html#gad8aa4c16328a5729560bd9a1ad0d392e">ActiveStates</a>(fields[1].GetUInt8()), <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a67cfad7aa3b55a87a692db5c7eeac936">PETSPELL_UNCHANGED</a>);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        }</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        <span class="keywordflow">while</span> (result-&gt;NextRow());</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160; </div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;}</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160; </div>
<div class="line"><a name="l01429"></a><span class="lineno"><a class="line" href="classPet.html#a3f8ed80e6e090b493ffdf95b4b7b6e6d"> 1429</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a3f8ed80e6e090b493ffdf95b4b7b6e6d">Pet::_SaveSpells</a>()</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;{</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> delSpell ;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> insSpell ;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">for</span> (PetSpellMap::iterator itr = <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.begin(), next = <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.begin(); itr != <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.end(); itr = next)</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        ++next;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160; </div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="comment">// prevent saving family passives to DB</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <span class="keywordflow">if</span> (itr-&gt;second.type == <a class="code" href="Pet_8h.html#ac12b13d4da0688112812b2c7976550cead8f157e9e157c6042ec5fa09e17edafb">PETSPELL_FAMILY</a>)</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        <span class="keywordflow">switch</span> (itr-&gt;second.state)</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5aa45b4f700fe69b9edae4fb979b988ffe">PETSPELL_REMOVED</a>:</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                <a class="code" href="classSqlStatement.html">SqlStatement</a> stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(delSpell, <span class="stringliteral">&quot;DELETE FROM pet_spell WHERE guid = ? and spell = ?&quot;</span>);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>(), itr-&gt;first);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.erase(itr);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            }</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a9b8bacded9035aeabc92430edece787c">PETSPELL_CHANGED</a>:</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                <a class="code" href="classSqlStatement.html">SqlStatement</a> stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(delSpell, <span class="stringliteral">&quot;DELETE FROM pet_spell WHERE guid = ? and spell = ?&quot;</span>);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>(), itr-&gt;first);</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(insSpell, <span class="stringliteral">&quot;INSERT INTO pet_spell (guid,spell,active) VALUES (?, ?, ?)&quot;</span>);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>(), itr-&gt;first, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(itr-&gt;second.active));</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            }</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a12e005d42fccd3aadeac9008e95eb5b8">PETSPELL_NEW</a>:</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;            {</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                <a class="code" href="classSqlStatement.html">SqlStatement</a> stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(insSpell, <span class="stringliteral">&quot;INSERT INTO pet_spell (guid,spell,active) VALUES (?, ?, ?)&quot;</span>);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>(), itr-&gt;first, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(itr-&gt;second.active));</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;            }</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a67cfad7aa3b55a87a692db5c7eeac936">PETSPELL_UNCHANGED</a>:</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        }</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        itr-&gt;second.state = <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a67cfad7aa3b55a87a692db5c7eeac936">PETSPELL_UNCHANGED</a>;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    }</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;}</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"><a class="line" href="classPet.html#a6fc6d5dd4545496a07c8294c0122bc31"> 1474</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a6fc6d5dd4545496a07c8294c0122bc31">Pet::_LoadGuardianPetNumber</a>()</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;{</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    std::unique_ptr&lt;QueryResult&gt; result(<a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;SELECT id FROM character_pet WHERE entry=&#39;%u&#39; AND owner = &#39;%u&#39;&quot;</span>, <a class="code" href="classObject.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>(), <a class="code" href="classUnit.html#a6d1af92863df5e94a0d4431c454f5b2d">GetOwnerGuid</a>().GetCounter()));</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        <a class="code" href="classField.html">Field</a>* fields = result-&gt;Fetch();</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a684f1b79808da046218775009189b2e8">SetPetNumber</a>(fields[0].GetUInt32(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160; </div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    }</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;}</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"><a class="line" href="classPet.html#a27147bde866e6f2382799a6d2e84b363"> 1489</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a27147bde866e6f2382799a6d2e84b363">Pet::_LoadAuras</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> timediff)</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;{</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="classQueryResult.html">QueryResult</a>* result = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(<span class="stringliteral">&quot;SELECT caster_guid,item_guid,spell,stackcount,remaincharges,basepoints0,basepoints1,basepoints2,periodictime0,periodictime1,periodictime2,maxduration,remaintime,effIndexMask FROM pet_aura WHERE guid = &#39;%u&#39;&quot;</span>, <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>());</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160; </div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;            <a class="code" href="classField.html">Field</a>* fields = result-&gt;<a class="code" href="classQueryResult.html#ae59bcb12d59b9a369953be91ddb5c446">Fetch</a>();</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;            <a class="code" href="classObjectGuid.html">ObjectGuid</a> casterGuid = <a class="code" href="classObjectGuid.html">ObjectGuid</a>(fields[0].GetUInt64());</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> item_lowguid = fields[1].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellid = fields[2].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> stackcount = fields[3].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> remaincharges = fields[4].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;            <a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>  damage[<a class="code" href="DBCEnums_8h.html#a038867f3f1d822b38a6cad2411c8006a">MAX_EFFECT_INDEX</a>];</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> periodicTime[<a class="code" href="DBCEnums_8h.html#a038867f3f1d822b38a6cad2411c8006a">MAX_EFFECT_INDEX</a>];</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160; </div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> i = 0; i &lt; <a class="code" href="DBCEnums_8h.html#a038867f3f1d822b38a6cad2411c8006a">MAX_EFFECT_INDEX</a>; ++i)</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                damage[i] = fields[i + 5].<a class="code" href="classField.html#afc9e673b7e6607f5f52bf16c77a73e5e">GetInt32</a>();</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                periodicTime[i] = fields[i + 8].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;            <a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> maxduration = fields[11].<a class="code" href="classField.html#afc9e673b7e6607f5f52bf16c77a73e5e">GetInt32</a>();</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;            <a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> remaintime = fields[12].<a class="code" href="classField.html#afc9e673b7e6607f5f52bf16c77a73e5e">GetInt32</a>();</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> effIndexMask = fields[13].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160; </div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;            <a class="code" href="structSpellEntry.html">SpellEntry</a> <span class="keyword">const</span>* spellproto = <a class="code" href="SQLStorages_8cpp.html#a6e07b93ae2737d35f4214041a6f735f4">sSpellTemplate</a>.<a class="code" href="classSQLStorage.html#ace42ec0424ef41d187eb7c1bdcfa8c62">LookupEntry</a>&lt;<a class="code" href="structSpellEntry.html">SpellEntry</a>&gt;(spellid);</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;            <span class="keywordflow">if</span> (!spellproto)</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outError(<span class="stringliteral">&quot;Unknown spell (spellid %u), ignore.&quot;</span>, spellid);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            }</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160; </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;            <span class="comment">// do not load single target auras (unless they were cast by the player)</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;            <span class="keywordflow">if</span> (casterGuid != <a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>() &amp;&amp; <a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.IsSingleTargetSpell(spellproto))</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160; </div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            <span class="keywordflow">if</span> (remaintime != -1)</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;            {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                <span class="keywordflow">if</span> (remaintime / <a class="code" href="Common_8h.html#aa4b4ca918855952bdb5a1c2026b1432da168decfa64c1d194af3d763203fe33d3">IN_MILLISECONDS</a> &lt;= <a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(timediff))</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160; </div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                remaintime -= timediff * <a class="code" href="Common_8h.html#aa4b4ca918855952bdb5a1c2026b1432da168decfa64c1d194af3d763203fe33d3">IN_MILLISECONDS</a>;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;            }</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160; </div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            <span class="comment">// prevent wrong values of remaincharges</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;            <span class="keywordflow">if</span> (spellproto-&gt;<a class="code" href="structSpellEntry.html#a06d096af1d10fbc048c2a6f3659d480b">procCharges</a> == 0)</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                remaincharges = 0;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;            <span class="keywordflow">if</span> (!spellproto-&gt;<a class="code" href="structSpellEntry.html#a800c4530cf509731e4c51d1c14e21c99">StackAmount</a>)</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                stackcount = 1;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (spellproto-&gt;<a class="code" href="structSpellEntry.html#a800c4530cf509731e4c51d1c14e21c99">StackAmount</a> &lt; stackcount)</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                stackcount = spellproto-&gt;<a class="code" href="structSpellEntry.html#a800c4530cf509731e4c51d1c14e21c99">StackAmount</a>;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!stackcount)</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                stackcount = 1;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;            <a class="code" href="classSpellAuraHolder.html">SpellAuraHolder</a>* holder = <a class="code" href="SpellAuras_8cpp.html#a89ce2a8162f56943bafaaa4c4f4fb2ea">CreateSpellAuraHolder</a>(spellproto, <span class="keyword">this</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            holder-&gt;<a class="code" href="classSpellAuraHolder.html#adca0d65cdb3c9ed599b0902e7e23bfad">SetLoadedState</a>(casterGuid, <a class="code" href="classObjectGuid.html">ObjectGuid</a>(<a class="code" href="ObjectGuid_8h.html#abe8666ac87665ba963053cdd2b014750ada4bc6e3b0a067d4fc236f7e9dcde919">HIGHGUID_ITEM</a>, item_lowguid), stackcount, remaincharges, maxduration, remaintime);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> i = 0; i &lt; <a class="code" href="DBCEnums_8h.html#a038867f3f1d822b38a6cad2411c8006a">MAX_EFFECT_INDEX</a>; ++i)</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                <span class="keywordflow">if</span> ((effIndexMask &amp; (1 &lt;&lt; i)) == 0)</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160; </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;                <a class="code" href="classAura.html">Aura</a>* aura = <a class="code" href="SpellAuras_8cpp.html#a8c5e168a30525814773df4982274d9b5">CreateAura</a>(spellproto, <a class="code" href="DBCEnums_8h.html#a6be7938b7bea685e9f021da7acb6d9b6">SpellEffectIndex</a>(i), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, holder, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                <span class="keywordflow">if</span> (!damage[i])</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                    damage[i] = aura-&gt;<a class="code" href="classAura.html#a8a5eb1e90972a14b8ba482991decebc8">GetModifier</a>()-&gt;<a class="code" href="structModifier.html#a263897ed5eeab39b03bc3007d8b331ec">m_amount</a>;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160; </div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                aura-&gt;<a class="code" href="classAura.html#a3c2b57d640c76bd0ad1fb871165d3d41">SetLoadedState</a>(damage[i], periodicTime[i]);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                holder-&gt;<a class="code" href="classSpellAuraHolder.html#ac5dd9bcbe41bfffc408f849f9e53071f">AddAura</a>(aura, <a class="code" href="DBCEnums_8h.html#a6be7938b7bea685e9f021da7acb6d9b6">SpellEffectIndex</a>(i));</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;            }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> empty = holder-&gt;<a class="code" href="classSpellAuraHolder.html#ab7f8cf8e30f83ace3f9b6771e945d51a">IsEmptyHolder</a>();</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;            <span class="keywordflow">if</span> (!empty)</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;            {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                <span class="comment">// reset stolen single target auras</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                <span class="keywordflow">if</span> (casterGuid != <a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>() &amp;&amp; holder-&gt;<a class="code" href="classSpellAuraHolder.html#ae3f58ba4d19c699b841d9b4c753d0fae">GetTrackedAuraType</a>() == <a class="code" href="SharedDefines_8h.html#a764cf61fb299aad0b3b985d48745fb9da8cc0a2364751ce316ed5a98a0a77a1eb">TRACK_AURA_TYPE_SINGLE_TARGET</a>)</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                    holder-&gt;<a class="code" href="classSpellAuraHolder.html#aeacac6b44093daefebf452a0beb1a5cb">SetTrackedAuraType</a>(<a class="code" href="SharedDefines_8h.html#a764cf61fb299aad0b3b985d48745fb9da8d1e4a1e75343d374916530e639c4ef3">TRACK_AURA_TYPE_NOT_TRACKED</a>);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160; </div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                holder-&gt;<a class="code" href="classSpellAuraHolder.html#ab092e45184bc9f7b8c897578567fe5d2">SetState</a>(<a class="code" href="SpellAuras_8h.html#a1b224092d87cd57536cbe0dafe6dc44aa5e297678a5f149e18120ee488c3f7a4b">SPELLAURAHOLDER_STATE_DB_LOAD</a>); <span class="comment">// Safeguard mechanism against some actions</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160; </div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            <span class="keywordflow">if</span> (!empty &amp;&amp; <a class="code" href="classUnit.html#af3fdd69056fa0e608f38f5b7579a349e">AddSpellAuraHolder</a>(holder))</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;            {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                holder-&gt;<a class="code" href="classSpellAuraHolder.html#ab092e45184bc9f7b8c897578567fe5d2">SetState</a>(<a class="code" href="SpellAuras_8h.html#a1b224092d87cd57536cbe0dafe6dc44aa5a4725ef493acd702a0b3f7b46c72c96">SPELLAURAHOLDER_STATE_READY</a>);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                <a class="code" href="Log_8h.html#adbee991aac31d91a88ae6276d32ba9f6">DETAIL_LOG</a>(<span class="stringliteral">&quot;Added pet auras from spellid %u&quot;</span>, spellproto-&gt;<a class="code" href="structSpellEntry.html#a6092f385a545aa33ba1e5ee28d21e92a">Id</a>);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;            }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                <span class="keyword">delete</span> holder;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        }</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="keywordflow">while</span> (result-&gt;<a class="code" href="classQueryResult.html#a8f1f135d431fe357bf2b9373dc8d59be">NextRow</a>());</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; </div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    }</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;}</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160; </div>
<div class="line"><a name="l01586"></a><span class="lineno"><a class="line" href="classPet.html#a60687b22fb22eae52e1a286134bd5fe5"> 1586</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a60687b22fb22eae52e1a286134bd5fe5">Pet::_SaveAuras</a>()</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;{</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="comment">// controllable guardians only save spells and main entry</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a83bec8aa36224306974de205d77c2872">m_controllableGuardian</a>)</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160; </div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> delAuras ;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keyword">static</span> <a class="code" href="classSqlStatementID.html">SqlStatementID</a> insAuras ;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <a class="code" href="classSqlStatement.html">SqlStatement</a> stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(delAuras, <span class="stringliteral">&quot;DELETE FROM pet_aura WHERE guid = ?&quot;</span>);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    stmt.<a class="code" href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">PExecute</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>());</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160; </div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <a class="code" href="classUnit.html#a3142f62691c432eddb212ec58e81e3f9">SpellAuraHolderMap</a> <span class="keyword">const</span>&amp; auraHolders = <a class="code" href="classUnit.html#a7b9262f2f3fb35fed66a1807edcd7fc0">GetSpellAuraHolderMap</a>();</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">if</span> (auraHolders.empty())</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    stmt = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">CreateStatement</a>(insAuras, <span class="stringliteral">&quot;INSERT INTO pet_aura (guid, caster_guid, item_guid, spell, stackcount, remaincharges, &quot;</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;            <span class="stringliteral">&quot;basepoints0, basepoints1, basepoints2, periodictime0, periodictime1, periodictime2, maxduration, remaintime, effIndexMask) &quot;</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            <span class="stringliteral">&quot;VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)&quot;</span>);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160; </div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; auraHolder : auraHolders)</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <a class="code" href="classSpellAuraHolder.html">SpellAuraHolder</a>* holder = auraHolder.second;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160; </div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <span class="keywordtype">bool</span> save = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> j = 0; j &lt; <a class="code" href="DBCEnums_8h.html#a038867f3f1d822b38a6cad2411c8006a">MAX_EFFECT_INDEX</a>; ++j)</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;            <a class="code" href="structSpellEntry.html">SpellEntry</a> <span class="keyword">const</span>* spellInfo = holder-&gt;<a class="code" href="classSpellAuraHolder.html#a1fd2e2389179ee0daeb7cdbb3a67a294">GetSpellProto</a>();</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code" href="structSpellEntry.html#a9bc1d3daa3394463e7ce5cfb403b0a68">EffectApplyAuraName</a>[j] == <a class="code" href="SpellAuraDefines_8h.html#a538cdc259460b365f406fe0b3a981799aeb8f5c79c441187541514b36a00918a1">SPELL_AURA_MOD_STEALTH</a> ||</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                    spellInfo-&gt;<a class="code" href="structSpellEntry.html#a1fe21cdb9e2620e112b80009131cc79f">Effect</a>[j] == <a class="code" href="SpellEffectDefines_8h.html#a292c893150c454dd75628b719db1fe97affaa057383042f4e64d387fb592eecb6">SPELL_EFFECT_APPLY_AREA_AURA_OWNER</a> ||</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                    spellInfo-&gt;<a class="code" href="structSpellEntry.html#a1fe21cdb9e2620e112b80009131cc79f">Effect</a>[j] == <a class="code" href="SpellEffectDefines_8h.html#a292c893150c454dd75628b719db1fe97a56fb7001bff11474629f084fda6953a1">SPELL_EFFECT_APPLY_AREA_AURA_PET</a>)</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;            {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                save = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;            }</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160; </div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <span class="comment">// skip all holders from spells that are passive or channeled</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="comment">// do not save single target holders (unless they were cast by the player)</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <span class="keywordflow">if</span> (save &amp;&amp; holder-&gt;<a class="code" href="classSpellAuraHolder.html#ab8496e9188d55a61f7123cb26603dcd1">IsSaveToDbHolder</a>())</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        {</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;            <a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>  damage[<a class="code" href="DBCEnums_8h.html#a038867f3f1d822b38a6cad2411c8006a">MAX_EFFECT_INDEX</a>];</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> periodicTime[<a class="code" href="DBCEnums_8h.html#a038867f3f1d822b38a6cad2411c8006a">MAX_EFFECT_INDEX</a>];</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> effIndexMask = 0;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160; </div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; <a class="code" href="DBCEnums_8h.html#a038867f3f1d822b38a6cad2411c8006a">MAX_EFFECT_INDEX</a>; ++i)</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            {</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                damage[i] = 0;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                periodicTime[i] = 0;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160; </div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classAura.html">Aura</a>* aur = holder-&gt;<a class="code" href="classSpellAuraHolder.html#addbe7e55c9815740d915d5116ba8352d">GetAuraByEffectIndex</a>(<a class="code" href="DBCEnums_8h.html#a6be7938b7bea685e9f021da7acb6d9b6">SpellEffectIndex</a>(i)))</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                {</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                    <span class="comment">// don&#39;t save not own area auras</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                    <span class="keywordflow">if</span> (!aur-&gt;IsSaveToDbAura())</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                    damage[i] = aur-&gt;GetModifier()-&gt;m_amount;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                    periodicTime[i] = aur-&gt;GetModifier()-&gt;periodictime;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                    effIndexMask |= (1 &lt;&lt; i);</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                }</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;            }</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160; </div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;            <span class="keywordflow">if</span> (!effIndexMask)</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160; </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(<a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>());</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#a1e4442d4f5e8ea685c078ecdcc769daa">addUInt64</a>(holder-&gt;<a class="code" href="classSpellAuraHolder.html#a2424ccc610b10ff5e89e86d46522c178">GetCasterGuid</a>().<a class="code" href="classObjectGuid.html#a65626f4640cb4f79c66ce9d5dda8ab27">GetRawValue</a>());</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(holder-&gt;<a class="code" href="classSpellAuraHolder.html#a8dc7353fe4c371046d0156fa28466d29">GetCastItemGuid</a>().<a class="code" href="classObjectGuid.html#a66935d98ce09dcb80d05a34b2697496a">GetCounter</a>());</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(holder-&gt;<a class="code" href="classSpellAuraHolder.html#ade21bd9f9788d2017dc3a48d90e37013">GetId</a>());</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(holder-&gt;<a class="code" href="classSpellAuraHolder.html#abf7c7aaae409c3c059fc3395aac5f44e">GetStackAmount</a>());</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#ac50286f02b8261212ecc237bb190afa3">addUInt8</a>(holder-&gt;<a class="code" href="classSpellAuraHolder.html#a4f7e44700b43fbbd1dae605c0a06d79e">GetAuraCharges</a>());</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160; </div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i : damage)</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                stmt.<a class="code" href="classSqlStatement.html#a2429d9344ee33990c10ed19a95d80c9f">addInt32</a>(i);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160; </div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i : periodicTime)</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                stmt.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(i);</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160; </div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#a2429d9344ee33990c10ed19a95d80c9f">addInt32</a>(holder-&gt;<a class="code" href="classSpellAuraHolder.html#af69c8cd9624dc41a345e775c075518c3">GetAuraMaxDuration</a>());</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#a2429d9344ee33990c10ed19a95d80c9f">addInt32</a>(holder-&gt;<a class="code" href="classSpellAuraHolder.html#a68b6f7eddd0adafd5d4e2f493b6dbce3">GetAuraDuration</a>());</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">addUInt32</a>(effIndexMask);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            stmt.<a class="code" href="classSqlStatement.html#a18377e3e03f9397eafbab91ae8675066">Execute</a>();</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        }</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    }</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;}</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160; </div>
<div class="line"><a name="l01673"></a><span class="lineno"><a class="line" href="classPet.html#a281cffe87c86627350f05a3aa15b4aff"> 1673</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a281cffe87c86627350f05a3aa15b4aff">Pet::addSpell</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spell_id, <a class="code" href="group__game.html#gad8aa4c16328a5729560bd9a1ad0d392e">ActiveStates</a> active <span class="comment">/*= ACT_DECIDE*/</span>, <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5">PetSpellState</a> state <span class="comment">/*= PETSPELL_NEW*/</span>, <a class="code" href="Pet_8h.html#ac12b13d4da0688112812b2c7976550ce">PetSpellType</a> type <span class="comment">/*= PETSPELL_NORMAL*/</span>)</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;{</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <a class="code" href="structSpellEntry.html">SpellEntry</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="SQLStorages_8cpp.html#a6e07b93ae2737d35f4214041a6f735f4">sSpellTemplate</a>.<a class="code" href="classSQLStorage.html#ace42ec0424ef41d187eb7c1bdcfa8c62">LookupEntry</a>&lt;<a class="code" href="structSpellEntry.html">SpellEntry</a>&gt;(spell_id);</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <span class="keywordflow">if</span> (!spellInfo)</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    {</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        <span class="comment">// do pet spell book cleanup</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        <span class="keywordflow">if</span> (state == <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a67cfad7aa3b55a87a692db5c7eeac936">PETSPELL_UNCHANGED</a>)                    <span class="comment">// spell load case</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outError(<span class="stringliteral">&quot;Pet::addSpell: nonexistent in SpellStore spell #%u request, deleting for all pets in `pet_spell`.&quot;</span>, spell_id);</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#a1379d88f95a689d8b6f7ff0fd9215b4d">PExecute</a>(<span class="stringliteral">&quot;DELETE FROM pet_spell WHERE spell = &#39;%u&#39;&quot;</span>, spell_id);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        }</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;            <a class="code" href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a>.outError(<span class="stringliteral">&quot;Pet::addSpell: nonexistent in SpellStore spell #%u request.&quot;</span>, spell_id);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160; </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    }</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160; </div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    PetSpellMap::iterator itr = <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.find(spell_id);</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">if</span> (itr != <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.end())</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        <span class="keywordflow">if</span> (itr-&gt;second.state == <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5aa45b4f700fe69b9edae4fb979b988ffe">PETSPELL_REMOVED</a>)</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        {</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;            <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.erase(itr);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            state = <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a9b8bacded9035aeabc92430edece787c">PETSPELL_CHANGED</a>;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        }</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state == <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a67cfad7aa3b55a87a692db5c7eeac936">PETSPELL_UNCHANGED</a> &amp;&amp; itr-&gt;second.state != <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a67cfad7aa3b55a87a692db5c7eeac936">PETSPELL_UNCHANGED</a>)</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            <span class="comment">// can be in case spell loading but learned at some previous spell loading</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            itr-&gt;second.state = <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a67cfad7aa3b55a87a692db5c7eeac936">PETSPELL_UNCHANGED</a>;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160; </div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            <span class="keywordflow">if</span> (active == <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea60dbce51e005270fd5bc183457883952">ACT_ENABLED</a>)</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                <a class="code" href="classPet.html#a1edc00f967f14289223affb9e3c35d2d">ToggleAutocast</a>(spell_id, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (active == <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392eadeaf81cdbd16fe7cfbb9afd2ae17cc17">ACT_DISABLED</a>)</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                <a class="code" href="classPet.html#a1edc00f967f14289223affb9e3c35d2d">ToggleAutocast</a>(spell_id, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        }</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    }</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160; </div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <a class="code" href="structPetSpell.html">PetSpell</a> newspell;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    newspell.<a class="code" href="structPetSpell.html#a0600418cb460fdaf8093bfa609e796c8">state</a> = state;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    newspell.<a class="code" href="structPetSpell.html#a4c4a7d0f299ae4e2ceb146a741057032">type</a> = type;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160; </div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keywordflow">if</span> (active == <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea24d8db1d523431e423ef8354296ed162">ACT_DECIDE</a>)                               <span class="comment">// active was not used before, so we save it&#39;s autocast/passive state here</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="SpellMgr_8h.html#a891f616061b87ded477929015ea961fe">IsAutocastable</a>(spellInfo))</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            newspell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a> = <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea60dbce51e005270fd5bc183457883952">ACT_ENABLED</a>;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            newspell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a> = <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ead917b891f555940a135b2634d2e72b3b">ACT_PASSIVE</a>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        newspell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a> = active;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="comment">// talent: unlearn all other talent ranks (high and low)</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structTalentSpellPos.html">TalentSpellPos</a> <span class="keyword">const</span>* talentPos = <a class="code" href="DBCStores_8cpp.html#a9041f2cf553692019968cf09df184a00">GetTalentSpellPos</a>(spell_id))</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    {</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structTalentEntry.html">TalentEntry</a> <span class="keyword">const</span>* talentInfo = <a class="code" href="DBCStores_8cpp.html#abdab3b372fb6ffd5dde09caf6967ac8f">sTalentStore</a>.LookupEntry(talentPos-&gt;talent_id))</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rankSpellId : talentInfo-&gt;RankID)</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                <span class="comment">// skip learning spell and no rank spell case</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;                <span class="keywordflow">if</span> (!rankSpellId || rankSpellId == spell_id)</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;                <span class="comment">// skip unknown ranks</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#ac7fbb6ab06f140e8843b0a8af83229e0">HasSpell</a>(rankSpellId))</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                <a class="code" href="classPet.html#a8b746e4d29e8c0b9f1ed2d7b3be2c0f7">removeSpell</a>(rankSpellId, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            }</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    }</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.GetSpellRank(spell_id) != 0)</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    {</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        <span class="keywordflow">for</span> (PetSpellMap::const_iterator itr2 = <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.begin(); itr2 != <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.end(); ++itr2)</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            <span class="keywordflow">if</span> (itr2-&gt;second.state == <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5aa45b4f700fe69b9edae4fb979b988ffe">PETSPELL_REMOVED</a>)</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160; </div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> <span class="keyword">const</span> oldspell_id = itr2-&gt;first;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.IsSpellAnotherRankOfSpell(spell_id, oldspell_id))</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            {</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                <span class="comment">// replace by new high rank</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.IsSpellHigherRankOfSpell(spell_id, oldspell_id))</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                    newspell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a> = itr2-&gt;second.active;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160; </div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                    <span class="keywordflow">if</span> (newspell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a> == <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea60dbce51e005270fd5bc183457883952">ACT_ENABLED</a>)</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                        <a class="code" href="classPet.html#a1edc00f967f14289223affb9e3c35d2d">ToggleAutocast</a>(oldspell_id, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                    <a class="code" href="classPet.html#a211a1e0df229610952fbec24c9d3240b">unlearnSpell</a>(oldspell_id, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                }</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                <span class="comment">// ignore new lesser rank</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.IsSpellHigherRankOfSpell(oldspell_id, spell_id))</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            }</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    }</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160; </div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>[spell_id] = newspell;</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160; </div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="SpellMgr_8cpp.html#a28b958e9db34bdad035df1f81ed2a280">IsPassiveSpell</a>(spellInfo))</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <a class="code" href="classUnit.html#a211876b6b1dcea2eedcc52e754093d70">CastSpell</a>(<span class="keyword">this</span>, spell_id, <a class="code" href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29ab89fa5cc12475f894d85c381bed7a2f2">TRIGGERED_OLD_TRIGGERED</a>);</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a35e05833d2c56b749ef5b57ce6a1cca0">AddSpellToActionBar</a>(spell_id, <a class="code" href="group__game.html#gad8aa4c16328a5729560bd9a1ad0d392e">ActiveStates</a>(newspell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a>));</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="keywordflow">if</span> (newspell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a> == <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea60dbce51e005270fd5bc183457883952">ACT_ENABLED</a>)</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <a class="code" href="classPet.html#a1edc00f967f14289223affb9e3c35d2d">ToggleAutocast</a>(spell_id, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160; </div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> talentCost = <a class="code" href="DBCStores_8cpp.html#ad0884cc1c1a88f83eda9b4bf5f4905a0">GetTalentSpellCost</a>(spell_id);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="keywordflow">if</span> (talentCost)</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <a class="code" href="classPet.html#a29db51ddfb19ca7fe27815b9cbe11f9f">m_usedTalentCount</a> += talentCost;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        <a class="code" href="classPet.html#a4b77f76c28bd1db9e207731b80e735a8">UpdateFreeTalentPoints</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    }</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;}</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160; </div>
<div class="line"><a name="l01794"></a><span class="lineno"><a class="line" href="classPet.html#af641ae2d7d873000862ac953f850d068"> 1794</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#af641ae2d7d873000862ac953f850d068">Pet::learnSpell</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spell_id)</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;{</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="comment">// prevent duplicated entires in spell book</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a281cffe87c86627350f05a3aa15b4aff">addSpell</a>(spell_id))</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160; </div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a1223cf843907fc54e5428e12b3f85de6">m_loading</a>)</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        <span class="keywordflow">if</span> (owner &amp;&amp; owner-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() == <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            <a class="code" href="classWorldPacket.html">WorldPacket</a> data(<a class="code" href="group__u2w.html#ggabeeee4622d9285fa92e9b61857002cacaf29344d01f8f868912f67c8dbeddbd51">SMSG_PET_LEARNED_SPELL</a>, 4);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            data &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(spell_id);</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            ((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;GetSession()-&gt;SendPacket(data);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160; </div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            ((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;PetSpellInitialize();</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    }</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;}</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160; </div>
<div class="line"><a name="l01815"></a><span class="lineno"><a class="line" href="classPet.html#afeb6b4e172c202a327ae853c132a1247"> 1815</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#afeb6b4e172c202a327ae853c132a1247">Pet::InitLevelupSpellsForLevel</a>()</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;{</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> level = <a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>();</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160; </div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="SpellMgr_8h.html#aff302d7ad23409ef738f15bcb560ed89">PetLevelupSpellSet</a> <span class="keyword">const</span>* levelupSpells = <a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>()-&gt;Family ? <a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.GetPetLevelupSpellList(<a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>()-&gt;Family) : <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    {</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        <span class="comment">// PetLevelupSpellSet ordered by levels, process in reversed order</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        <span class="keywordflow">for</span> (PetLevelupSpellSet::const_reverse_iterator itr = levelupSpells-&gt;rbegin(); itr != levelupSpells-&gt;rend(); ++itr)</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        {</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            <span class="comment">// will called first if level down</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;            <span class="keywordflow">if</span> (itr-&gt;first &gt; level)</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                <a class="code" href="classPet.html#a211a1e0df229610952fbec24c9d3240b">unlearnSpell</a>(itr-&gt;second, <span class="keyword">true</span>);            <span class="comment">// will learn prev rank if any</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;            <span class="comment">// will called if level up</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                <a class="code" href="classPet.html#af641ae2d7d873000862ac953f850d068">learnSpell</a>(itr-&gt;second);                    <span class="comment">// will unlearn prev rank if any</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        }</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    }</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> petSpellsId = <a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>()-&gt;<a class="code" href="structCreatureInfo.html#a63b19d1dcb983422d0b43aba7aaaf047">PetSpellDataId</a> ? -(<a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)<a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>()-&gt;<a class="code" href="structCreatureInfo.html#a63b19d1dcb983422d0b43aba7aaaf047">PetSpellDataId</a> : <a class="code" href="classObject.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>();</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160; </div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="comment">// default spells (can be not learned if pet level (as owner level decrease result for example) less first possible in normal game)</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structPetDefaultSpellsEntry.html">PetDefaultSpellsEntry</a> <span class="keyword">const</span>* defSpells = <a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.GetPetDefaultSpellsEntry(petSpellsId))</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i : defSpells-&gt;spellid)</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        {</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;            <a class="code" href="structSpellEntry.html">SpellEntry</a> <span class="keyword">const</span>* spellEntry = <a class="code" href="SQLStorages_8cpp.html#a6e07b93ae2737d35f4214041a6f735f4">sSpellTemplate</a>.<a class="code" href="classSQLStorage.html#ace42ec0424ef41d187eb7c1bdcfa8c62">LookupEntry</a>&lt;<a class="code" href="structSpellEntry.html">SpellEntry</a>&gt;(i);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            <span class="keywordflow">if</span> (!spellEntry)</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160; </div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            <span class="comment">// will called first if level down</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            <span class="keywordflow">if</span> (spellEntry-&gt;<a class="code" href="structSpellEntry.html#aa401405fe3221db2723b2b8e6fe48c9b">spellLevel</a> &gt; level)</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                <a class="code" href="classPet.html#a211a1e0df229610952fbec24c9d3240b">unlearnSpell</a>(spellEntry-&gt;<a class="code" href="structSpellEntry.html#a6092f385a545aa33ba1e5ee28d21e92a">Id</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            <span class="comment">// will called if level up</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                <a class="code" href="classPet.html#af641ae2d7d873000862ac953f850d068">learnSpell</a>(spellEntry-&gt;<a class="code" href="structSpellEntry.html#a6092f385a545aa33ba1e5ee28d21e92a">Id</a>);</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        }</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    }</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;}</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160; </div>
<div class="line"><a name="l01854"></a><span class="lineno"><a class="line" href="classPet.html#a211a1e0df229610952fbec24c9d3240b"> 1854</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a211a1e0df229610952fbec24c9d3240b">Pet::unlearnSpell</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spell_id, <span class="keywordtype">bool</span> learn_prev, <span class="keywordtype">bool</span> clear_ab)</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;{</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a8b746e4d29e8c0b9f1ed2d7b3be2c0f7">removeSpell</a>(spell_id, learn_prev, clear_ab))</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    {</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a1223cf843907fc54e5428e12b3f85de6">m_loading</a>)</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>())</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            {</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                <span class="keywordflow">if</span> (owner-&gt;GetTypeId() == <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                    <a class="code" href="classWorldPacket.html">WorldPacket</a> data(<a class="code" href="group__u2w.html#ggabeeee4622d9285fa92e9b61857002caca5bdefd91f137c6e851caac3a61073105">SMSG_PET_REMOVED_SPELL</a>, 4);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                    data &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(spell_id);</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                    ((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;GetSession()-&gt;SendPacket(data);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                }</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        }</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;}</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160; </div>
<div class="line"><a name="l01875"></a><span class="lineno"><a class="line" href="classPet.html#a8b746e4d29e8c0b9f1ed2d7b3be2c0f7"> 1875</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a8b746e4d29e8c0b9f1ed2d7b3be2c0f7">Pet::removeSpell</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spell_id, <span class="keywordtype">bool</span> learn_prev, <span class="keywordtype">bool</span> clear_ab)</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;{</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    PetSpellMap::iterator itr = <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.find(spell_id);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="keywordflow">if</span> (itr == <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.end())</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="keywordflow">if</span> (itr-&gt;second.state == <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5aa45b4f700fe69b9edae4fb979b988ffe">PETSPELL_REMOVED</a>)</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160; </div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="keywordflow">if</span> (itr-&gt;second.state == <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a12e005d42fccd3aadeac9008e95eb5b8">PETSPELL_NEW</a>)</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.erase(itr);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        itr-&gt;second.state = <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5aa45b4f700fe69b9edae4fb979b988ffe">PETSPELL_REMOVED</a>;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <a class="code" href="classUnit.html#a1a38bdc4f3c0a9b9cfa22f51365e37a4">RemoveAurasDueToSpell</a>(spell_id);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160; </div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> talentCost = <a class="code" href="DBCStores_8cpp.html#ad0884cc1c1a88f83eda9b4bf5f4905a0">GetTalentSpellCost</a>(spell_id);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="keywordflow">if</span> (talentCost &gt; 0)</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a29db51ddfb19ca7fe27815b9cbe11f9f">m_usedTalentCount</a> &gt; talentCost)</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;            <a class="code" href="classPet.html#a29db51ddfb19ca7fe27815b9cbe11f9f">m_usedTalentCount</a> -= talentCost;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            <a class="code" href="classPet.html#a29db51ddfb19ca7fe27815b9cbe11f9f">m_usedTalentCount</a> = 0;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        <a class="code" href="classPet.html#a4b77f76c28bd1db9e207731b80e735a8">UpdateFreeTalentPoints</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    }</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keywordflow">if</span> (learn_prev)</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> prev_id = <a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.GetPrevSpellInChain(spell_id))</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            <a class="code" href="classPet.html#af641ae2d7d873000862ac953f850d068">learnSpell</a>(prev_id);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;            learn_prev = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    }</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160; </div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="comment">// if remove last rank or non-ranked then update action bar at server and client if need</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">if</span> (clear_ab &amp;&amp; !learn_prev &amp;&amp; <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a7f3444689181ee86e31003f766ea0a32">RemoveSpellFromActionBar</a>(spell_id))</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    {</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a1223cf843907fc54e5428e12b3f85de6">m_loading</a>)</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;        {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;            <span class="comment">// need update action bar for last removed rank</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>())</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;                <span class="keywordflow">if</span> (owner-&gt;GetTypeId() == <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;                    ((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;PetSpellInitialize();</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        }</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    }</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160; </div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;}</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160; </div>
<div class="line"><a name="l01925"></a><span class="lineno"><a class="line" href="classPet.html#a8f56752c756a9a41e647e03712b9466b"> 1925</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a8f56752c756a9a41e647e03712b9466b">Pet::CleanupActionBar</a>()</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;{</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group__game.html#ga155b8633f243004497699c184b903901">MAX_UNIT_ACTION_BAR_INDEX</a>; ++i)</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structUnitActionBarEntry.html">UnitActionBarEntry</a> <span class="keyword">const</span>* ab = <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a9efb3e23e5e9230eef461da27f3e1da6">GetActionBarEntry</a>(i))</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> action = ab-&gt;GetAction())</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                <span class="keywordflow">if</span> (ab-&gt;IsActionBarForSpell() &amp;&amp; !<a class="code" href="classPet.html#ac7fbb6ab06f140e8843b0a8af83229e0">HasSpell</a>(action))</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                    <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a4951b83a10c85f36f25f2236983a51a3">SetActionBar</a>(i, 0, <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392eadeaf81cdbd16fe7cfbb9afd2ae17cc17">ACT_DISABLED</a>);</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;}</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"><a class="line" href="classPet.html#ac6c70dc906ba28d1bc991fdf9a79225f"> 1934</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#ac6c70dc906ba28d1bc991fdf9a79225f">Pet::InitPetCreateSpells</a>()</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;{</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a6f348d8d362564c7a4d150517dccc369">InitPetActionBar</a>();</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.clear();</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160; </div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <a class="code" href="classPet.html#a04c9223accb74363902edd455c7b836e">LearnPetPassives</a>();</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160; </div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <a class="code" href="classPet.html#a462dc421828060d0478ca6a3ae0a2a57">CastPetAuras</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;}</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160; </div>
<div class="line"><a name="l01944"></a><span class="lineno"><a class="line" href="classPet.html#a6921309da1d6a20be19b48f04b4558bf"> 1944</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a6921309da1d6a20be19b48f04b4558bf">Pet::resetTalents</a>(<span class="keywordtype">bool</span> no_cost)</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;{</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <span class="keywordflow">if</span> (!owner || owner-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() != <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160; </div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="comment">// not need after this call</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="keywordflow">if</span> (((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;HasAtLoginFlag(<a class="code" href="Player_8h.html#aa6b2dcfd7e0c4f62b238241afe792fcba3cd8cf3374b3079026df290c3fed8505">AT_LOGIN_RESET_PET_TALENTS</a>))</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        ((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;RemoveAtLoginFlag(<a class="code" href="Player_8h.html#aa6b2dcfd7e0c4f62b238241afe792fcba3cd8cf3374b3079026df290c3fed8505">AT_LOGIN_RESET_PET_TALENTS</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <a class="code" href="structCreatureInfo.html">CreatureInfo</a> <span class="keyword">const</span>* ci = <a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>();</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="keywordflow">if</span> (!ci)</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <span class="comment">// Check pet talent type</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <a class="code" href="structCreatureFamilyEntry.html">CreatureFamilyEntry</a> <span class="keyword">const</span>* pet_family = <a class="code" href="DBCStores_8cpp.html#a83ea3f8701464968bcfc119ad499b756">sCreatureFamilyStore</a>.LookupEntry(ci-&gt;<a class="code" href="structCreatureInfo.html#a55f9e7b8189a5de4ef01d0787b161801">Family</a>);</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="keywordflow">if</span> (!pet_family || pet_family-&gt;<a class="code" href="structCreatureFamilyEntry.html#a802000cefb6c4d357edfc45cc291e21e">petTalentType</a> &lt; 0)</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160; </div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <a class="code" href="classPlayer.html">Player</a>* player = (<a class="code" href="classPlayer.html">Player</a>*)owner;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160; </div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a29db51ddfb19ca7fe27815b9cbe11f9f">m_usedTalentCount</a> == 0)</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        <a class="code" href="classPet.html#a4b77f76c28bd1db9e207731b80e735a8">UpdateFreeTalentPoints</a>(<span class="keyword">false</span>);                      <span class="comment">// for fix if need counter</span></div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160; </div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> cost = 0;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <span class="keywordflow">if</span> (!no_cost)</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        cost = <a class="code" href="classPet.html#a0a2c5bf833c48cace106f9c11c8cc937">resetTalentsCost</a>();</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160; </div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        <span class="keywordflow">if</span> (player-&gt;<a class="code" href="classPlayer.html#aa5ecbc83f83472a98aac1cff3497e806">GetMoney</a>() &lt; cost)</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;            player-&gt;<a class="code" href="classPlayer.html#a2569de77e6064b4657b080bf7451defb">SendBuyError</a>(<a class="code" href="Item_8h.html#a3019725fcb2ef7ad3892236a50138a92aaaa7970333ac75f264d5f3a14c888746">BUY_ERR_NOT_ENOUGHT_MONEY</a>, <span class="keyword">nullptr</span>, 0, 0);</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        }</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160; </div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="DBCStores_8cpp.html#abdab3b372fb6ffd5dde09caf6967ac8f">sTalentStore</a>.GetNumRows(); ++i)</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    {</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        <a class="code" href="structTalentEntry.html">TalentEntry</a> <span class="keyword">const</span>* talentInfo = <a class="code" href="DBCStores_8cpp.html#abdab3b372fb6ffd5dde09caf6967ac8f">sTalentStore</a>.LookupEntry(i);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        <span class="keywordflow">if</span> (!talentInfo) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160; </div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <a class="code" href="structTalentTabEntry.html">TalentTabEntry</a> <span class="keyword">const</span>* talentTabInfo = <a class="code" href="DBCStores_8cpp.html#a1698373b36d110ef114bbfe77abdf85e">sTalentTabStore</a>.LookupEntry(talentInfo-&gt;<a class="code" href="structTalentEntry.html#acefe6f8c0a5b3893e2a9f828d500df68">TalentTab</a>);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160; </div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <span class="keywordflow">if</span> (!talentTabInfo)</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160; </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="comment">// unlearn only talents for pets family talent type</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        <span class="keywordflow">if</span> (!((1 &lt;&lt; pet_family-&gt;<a class="code" href="structCreatureFamilyEntry.html#a802000cefb6c4d357edfc45cc291e21e">petTalentType</a>) &amp; talentTabInfo-&gt;<a class="code" href="structTalentTabEntry.html#a22ab1cf8ad05e57d91a63e3876ae2b77">petTalentMask</a>))</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160; </div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j : talentInfo-&gt;<a class="code" href="structTalentEntry.html#ab9216f97d2b7c7fe0ff4336b80869b88">RankID</a>)</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            <span class="keywordflow">if</span> (j)</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;                <a class="code" href="classPet.html#a8b746e4d29e8c0b9f1ed2d7b3be2c0f7">removeSpell</a>(j, !<a class="code" href="SpellMgr_8cpp.html#a28b958e9db34bdad035df1f81ed2a280">IsPassiveSpell</a>(j), <span class="keyword">false</span>);</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    }</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <a class="code" href="classPet.html#a4b77f76c28bd1db9e207731b80e735a8">UpdateFreeTalentPoints</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160; </div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <span class="keywordflow">if</span> (!no_cost)</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        player-&gt;<a class="code" href="classPlayer.html#ab2eee9d5a0dcc1bf22d0d3e1d9db3f44">ModifyMoney</a>(-(<a class="code" href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)cost);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160; </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;        <a class="code" href="classPet.html#ab25d770bb5fd81698918ac82b406afa5">m_resetTalentsCost</a> = cost;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        <a class="code" href="classPet.html#a9fa6b4dc1e14acf60ac9d4abd8fd8f31">m_resetTalentsTime</a> = time(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    }</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    player-&gt;<a class="code" href="classPlayer.html#ae5979ac44c9da24ecab41e210f01eeb0">PetSpellInitialize</a>();</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;}</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160; </div>
<div class="line"><a name="l02016"></a><span class="lineno"><a class="line" href="classPet.html#ab1abe749d93699ce7b7fba55403796c1"> 2016</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#ab1abe749d93699ce7b7fba55403796c1">Pet::resetTalentsForAllPetsOf</a>(<a class="code" href="classPlayer.html">Player</a>* owner, <a class="code" href="classPet.html">Pet</a>* online_pet <span class="comment">/*= nullptr*/</span>)</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;{</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <span class="comment">// not need after this call</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <span class="keywordflow">if</span> (((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;HasAtLoginFlag(<a class="code" href="Player_8h.html#aa6b2dcfd7e0c4f62b238241afe792fcba3cd8cf3374b3079026df290c3fed8505">AT_LOGIN_RESET_PET_TALENTS</a>))</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        ((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;RemoveAtLoginFlag(<a class="code" href="Player_8h.html#aa6b2dcfd7e0c4f62b238241afe792fcba3cd8cf3374b3079026df290c3fed8505">AT_LOGIN_RESET_PET_TALENTS</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160; </div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <span class="comment">// reset for online</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keywordflow">if</span> (online_pet)</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        online_pet-&gt;<a class="code" href="classPet.html#a6921309da1d6a20be19b48f04b4558bf">resetTalents</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160; </div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="comment">// now need only reset for offline pets (all pets except online case)</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> except_petnumber = online_pet ? online_pet-&gt;<a class="code" href="classUnit.html#a68db20366e7ce843216f5024b94f154c">GetCharmInfo</a>()-&gt;<a class="code" href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">GetPetNumber</a>() : 0;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <a class="code" href="classQueryResult.html">QueryResult</a>* resultPets = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                                  <span class="stringliteral">&quot;SELECT id FROM character_pet WHERE owner = &#39;%u&#39; AND id &lt;&gt; &#39;%u&#39;&quot;</span>,</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                                  owner-&gt;<a class="code" href="classObject.html#a4777844356842a389621c1bad1433109">GetGUIDLow</a>(), except_petnumber);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160; </div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <span class="comment">// no offline pets</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    <span class="keywordflow">if</span> (!resultPets)</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160; </div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <a class="code" href="classQueryResult.html">QueryResult</a>* result = <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">PQuery</a>(</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                              <span class="stringliteral">&quot;SELECT DISTINCT pet_spell.spell FROM pet_spell, character_pet &quot;</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                              <span class="stringliteral">&quot;WHERE character_pet.owner = &#39;%u&#39; AND character_pet.id = pet_spell.guid AND character_pet.id &lt;&gt; %u&quot;</span>,</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                              owner-&gt;<a class="code" href="classObject.html#a4777844356842a389621c1bad1433109">GetGUIDLow</a>(), except_petnumber);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160; </div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="keywordflow">if</span> (!result)</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    {</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        <span class="keyword">delete</span> resultPets;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    }</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160; </div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <span class="keywordtype">bool</span> need_comma = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    std::ostringstream ss;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    ss &lt;&lt; <span class="stringliteral">&quot;DELETE FROM pet_spell WHERE guid IN (&quot;</span>;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160; </div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    {</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;        <a class="code" href="classField.html">Field</a>* fields = resultPets-&gt;<a class="code" href="classQueryResult.html#ae59bcb12d59b9a369953be91ddb5c446">Fetch</a>();</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160; </div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> <span class="keywordtype">id</span> = fields[0].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160; </div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        <span class="keywordflow">if</span> (need_comma)</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;            ss &lt;&lt; <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160; </div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        ss &lt;&lt; id;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160; </div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;        need_comma = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    }</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="keywordflow">while</span> (resultPets-&gt;<a class="code" href="classQueryResult.html#a8f1f135d431fe357bf2b9373dc8d59be">NextRow</a>());</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160; </div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="keyword">delete</span> resultPets;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    ss &lt;&lt; <span class="stringliteral">&quot;) AND spell IN (&quot;</span>;</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160; </div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <span class="keywordtype">bool</span> need_execute = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <a class="code" href="classField.html">Field</a>* fields = result-&gt;<a class="code" href="classQueryResult.html#ae59bcb12d59b9a369953be91ddb5c446">Fetch</a>();</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160; </div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spell = fields[0].<a class="code" href="classField.html#af71c97fd38da328f4d9590b112f859c4">GetUInt32</a>();</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160; </div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="DBCStores_8cpp.html#ad0884cc1c1a88f83eda9b4bf5f4905a0">GetTalentSpellCost</a>(spell))</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160; </div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <span class="keywordflow">if</span> (need_execute)</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            ss &lt;&lt; <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160; </div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        ss &lt;&lt; spell;</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160; </div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        need_execute = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    }</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="keywordflow">while</span> (result-&gt;<a class="code" href="classQueryResult.html#a8f1f135d431fe357bf2b9373dc8d59be">NextRow</a>());</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160; </div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="keyword">delete</span> result;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160; </div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="keywordflow">if</span> (!need_execute)</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160; </div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    ss &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160; </div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <a class="code" href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a>.<a class="code" href="classDatabase.html#a0edc136df6714abd439745855618c4f8">Execute</a>(ss.str().c_str());</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;}</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160; </div>
<div class="line"><a name="l02100"></a><span class="lineno"><a class="line" href="classPet.html#a4b77f76c28bd1db9e207731b80e735a8"> 2100</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a4b77f76c28bd1db9e207731b80e735a8">Pet::UpdateFreeTalentPoints</a>(<span class="keywordtype">bool</span> resetIfNeed)</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;{</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> level = <a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>();</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> talentPointsForLevel = <a class="code" href="classPet.html#aa1062aacaca2534925d60e56f05139cf">GetMaxTalentPointsForLevel</a>(level);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <span class="comment">// Reset talents in case low level (on level down) or wrong points for level (hunter can unlearn TP increase talent)</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <span class="keywordflow">if</span> (talentPointsForLevel == 0 || <a class="code" href="classPet.html#a29db51ddfb19ca7fe27815b9cbe11f9f">m_usedTalentCount</a> &gt; talentPointsForLevel)</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    {</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        <span class="comment">// Remove all talent points (except for admin pets)</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        <span class="keywordflow">if</span> (resetIfNeed)</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        {</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;            <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;            <span class="keywordflow">if</span> (!owner || owner-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() != <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a> || ((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;GetSession()-&gt;GetSecurity() &lt; <a class="code" href="Common_8h.html#ad02db78fbe7773265246ca3010f23f6fa6a04b5fbbc52adb152bfb45b600db102">SEC_ADMINISTRATOR</a>)</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                <a class="code" href="classPet.html#a6921309da1d6a20be19b48f04b4558bf">resetTalents</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                <a class="code" href="classPet.html#aaccd1b242377432d3b3c79909a2d8ef4">SetFreeTalentPoints</a>(0);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        }</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;            <a class="code" href="classPet.html#aaccd1b242377432d3b3c79909a2d8ef4">SetFreeTalentPoints</a>(0);</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    }</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;        <a class="code" href="classPet.html#aaccd1b242377432d3b3c79909a2d8ef4">SetFreeTalentPoints</a>(talentPointsForLevel - <a class="code" href="classPet.html#a29db51ddfb19ca7fe27815b9cbe11f9f">m_usedTalentCount</a>);</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;}</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160; </div>
<div class="line"><a name="l02123"></a><span class="lineno"><a class="line" href="classPet.html#a43a35bdd7f233f6ae5233ad55f30c641"> 2123</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a43a35bdd7f233f6ae5233ad55f30c641">Pet::InitTalentForLevel</a>()</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;{</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <a class="code" href="classPet.html#a4b77f76c28bd1db9e207731b80e735a8">UpdateFreeTalentPoints</a>();</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160; </div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="keywordflow">if</span> (!owner || owner-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() != <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160; </div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a1223cf843907fc54e5428e12b3f85de6">m_loading</a>)</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;        ((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;SendTalentsInfoData(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;}</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160; </div>
<div class="line"><a name="l02135"></a><span class="lineno"><a class="line" href="classPet.html#a0a2c5bf833c48cace106f9c11c8cc937"> 2135</a></span>&#160;<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> <a class="code" href="classPet.html#a0a2c5bf833c48cace106f9c11c8cc937">Pet::resetTalentsCost</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> days = <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="group__world.html#ga05dfb35c344e5b947a19e4284e7f5fa7">sWorld</a>.GetGameTime() - <a class="code" href="classPet.html#a9fa6b4dc1e14acf60ac9d4abd8fd8f31">m_resetTalentsTime</a>) / <a class="code" href="Common_8h.html#aa4b4ca918855952bdb5a1c2026b1432da8e85ce474d6e6c5ef5b03a415dee454a">DAY</a>;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160; </div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="comment">// The first time reset costs 10 silver; after 1 day cost is reset to 10 silver</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="keywordflow">if</span> (m_resetTalentsCost &lt; 10 * SILVER || days &gt; 0)</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        <span class="keywordflow">return</span> 10 * <a class="code" href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448a6c87736f9fe31c8d2650db184cb2097f">SILVER</a>;</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="comment">// then 50 silver</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#ab25d770bb5fd81698918ac82b406afa5">m_resetTalentsCost</a> &lt; 50 * <a class="code" href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448a6c87736f9fe31c8d2650db184cb2097f">SILVER</a>)</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        <span class="keywordflow">return</span> 50 * <a class="code" href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448a6c87736f9fe31c8d2650db184cb2097f">SILVER</a>;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;        <span class="comment">// then 1 gold</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#ab25d770bb5fd81698918ac82b406afa5">m_resetTalentsCost</a> &lt; 1 * <a class="code" href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448aa7790837e9c1f7cb78b55743b9a67623">GOLD</a>)</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <span class="keywordflow">return</span> 1 * <a class="code" href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448aa7790837e9c1f7cb78b55743b9a67623">GOLD</a>;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <span class="comment">// then increasing at a rate of 1 gold; cap 10 gold</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classPet.html#ab25d770bb5fd81698918ac82b406afa5">m_resetTalentsCost</a> + 1 * <a class="code" href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448aa7790837e9c1f7cb78b55743b9a67623">GOLD</a> &gt; 10 * <a class="code" href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448aa7790837e9c1f7cb78b55743b9a67623">GOLD</a> ? 10 * <a class="code" href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448aa7790837e9c1f7cb78b55743b9a67623">GOLD</a> : <a class="code" href="classPet.html#ab25d770bb5fd81698918ac82b406afa5">m_resetTalentsCost</a> + 1 * <a class="code" href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448aa7790837e9c1f7cb78b55743b9a67623">GOLD</a>);</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;}</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"><a class="line" href="classPet.html#aa1062aacaca2534925d60e56f05139cf"> 2152</a></span>&#160;<a class="code" href="Define_8h.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> <a class="code" href="classPet.html#aa1062aacaca2534925d60e56f05139cf">Pet::GetMaxTalentPointsForLevel</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> level)<span class="keyword"> const</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    <a class="code" href="Define_8h.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> points = (level &gt;= 20) ? ((level - 16) / 4) : 0;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="comment">// Mod points from owner SPELL_AURA_MOD_PET_TALENT_POINTS</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>())</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        points += owner-&gt;GetTotalAuraModifier(<a class="code" href="SpellAuraDefines_8h.html#a538cdc259460b365f406fe0b3a981799a967f549cb14fb8bc956cda92a0a05adb">SPELL_AURA_MOD_PET_TALENT_POINTS</a>);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">return</span> points;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;}</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160; </div>
<div class="line"><a name="l02161"></a><span class="lineno"><a class="line" href="classPet.html#a0bbb592c195c10bf837b54643755653c"> 2161</a></span>&#160;<a class="code" href="structCharmInfo.html">CharmInfo</a>* <a class="code" href="classPet.html#a0bbb592c195c10bf837b54643755653c">Pet::InitCharmInfo</a>(<a class="code" href="classUnit.html">Unit</a>* charm)</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;{</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a97378444983f0395005ce68ff5918b11">m_originalCharminfo</a>)</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    {</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <a class="code" href="classPet.html#a97378444983f0395005ce68ff5918b11">m_originalCharminfo</a> = <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a> = <span class="keyword">new</span> <a class="code" href="structCharmInfo.html">CharmInfo</a>(charm);</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    }</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;}</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160; </div>
<div class="line"><a name="l02171"></a><span class="lineno"><a class="line" href="classPet.html#a3a943da60262e2fef6046828ee560963"> 2171</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a3a943da60262e2fef6046828ee560963">Pet::DeleteCharmInfo</a>()</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;{</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a97378444983f0395005ce68ff5918b11">m_originalCharminfo</a>)</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    {</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        <span class="keyword">delete</span> <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a> = <a class="code" href="classPet.html#a97378444983f0395005ce68ff5918b11">m_originalCharminfo</a>;</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        <a class="code" href="classPet.html#a97378444983f0395005ce68ff5918b11">m_originalCharminfo</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    }</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;}</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"><a class="line" href="classPet.html#a1edc00f967f14289223affb9e3c35d2d"> 2181</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a1edc00f967f14289223affb9e3c35d2d">Pet::ToggleAutocast</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellid, <span class="keywordtype">bool</span> <a class="code" href="namespaceByteConverter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;{</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="SpellMgr_8h.html#a891f616061b87ded477929015ea961fe">IsAutocastable</a>(spellid))</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160; </div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    PetSpellMap::iterator itr = <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.find(spellid);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <a class="code" href="structPetSpell.html">PetSpell</a>&amp; petSpell = itr-&gt;second;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160; </div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160; </div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceByteConverter.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>)</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    {</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classPet.html#a7018de24620b6982be4a4cc7f7cf889a">m_autospells</a>.size() &amp;&amp; <a class="code" href="classPet.html#a7018de24620b6982be4a4cc7f7cf889a">m_autospells</a>[i] != spellid; ++i)</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;            ;                                               <span class="comment">// just search</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        <span class="keywordflow">if</span> (i == <a class="code" href="classPet.html#a7018de24620b6982be4a4cc7f7cf889a">m_autospells</a>.size())</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        {</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;            <a class="code" href="classPet.html#a7018de24620b6982be4a4cc7f7cf889a">m_autospells</a>.push_back(spellid);</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160; </div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;            <span class="keywordflow">if</span> (petSpell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a> != <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea60dbce51e005270fd5bc183457883952">ACT_ENABLED</a>)</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;            {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                petSpell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a> = <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea60dbce51e005270fd5bc183457883952">ACT_ENABLED</a>;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                <span class="keywordflow">if</span> (petSpell.<a class="code" href="structPetSpell.html#a0600418cb460fdaf8093bfa609e796c8">state</a> != <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a12e005d42fccd3aadeac9008e95eb5b8">PETSPELL_NEW</a>)</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                    petSpell.<a class="code" href="structPetSpell.html#a0600418cb460fdaf8093bfa609e796c8">state</a> = <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a9b8bacded9035aeabc92430edece787c">PETSPELL_CHANGED</a>;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;            }</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        }</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    }</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    {</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        AutoSpellList::iterator itr2 = <a class="code" href="classPet.html#a7018de24620b6982be4a4cc7f7cf889a">m_autospells</a>.begin();</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classPet.html#a7018de24620b6982be4a4cc7f7cf889a">m_autospells</a>.size() &amp;&amp; <a class="code" href="classPet.html#a7018de24620b6982be4a4cc7f7cf889a">m_autospells</a>[i] != spellid; ++i, ++itr2)</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;            ;                                               <span class="comment">// just search</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160; </div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        <span class="keywordflow">if</span> (i &lt; <a class="code" href="classPet.html#a7018de24620b6982be4a4cc7f7cf889a">m_autospells</a>.size())</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        {</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;            <a class="code" href="classPet.html#a7018de24620b6982be4a4cc7f7cf889a">m_autospells</a>.erase(itr2);</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;            <span class="keywordflow">if</span> (petSpell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a> != <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392eadeaf81cdbd16fe7cfbb9afd2ae17cc17">ACT_DISABLED</a>)</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;            {</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                petSpell.<a class="code" href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">active</a> = <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392eadeaf81cdbd16fe7cfbb9afd2ae17cc17">ACT_DISABLED</a>;</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                <span class="keywordflow">if</span> (petSpell.<a class="code" href="structPetSpell.html#a0600418cb460fdaf8093bfa609e796c8">state</a> != <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a12e005d42fccd3aadeac9008e95eb5b8">PETSPELL_NEW</a>)</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                    petSpell.<a class="code" href="structPetSpell.html#a0600418cb460fdaf8093bfa609e796c8">state</a> = <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a9b8bacded9035aeabc92430edece787c">PETSPELL_CHANGED</a>;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            }</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        }</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    }</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;}</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160; </div>
<div class="line"><a name="l02227"></a><span class="lineno"><a class="line" href="classPet.html#a42cf6a2fc2dc5882396db1fc06fb6edc"> 2227</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a42cf6a2fc2dc5882396db1fc06fb6edc">Pet::Create</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> guidlow, <a class="code" href="structCreatureCreatePos.html">CreatureCreatePos</a>&amp; cPos, <a class="code" href="structCreatureInfo.html">CreatureInfo</a> <span class="keyword">const</span>* cinfo, <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> pet_number)</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;{</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <a class="code" href="classWorldObject.html#a7ef77a055df228f1e6580eb52d66cba8">SetMap</a>(cPos.<a class="code" href="structCreatureCreatePos.html#a7482034b9612ec1b155cceffc344608a">GetMap</a>());</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <a class="code" href="classUnit.html#aa3f511c51aa1082be9d4777c770a3485">SetPhaseMask</a>(cPos.<a class="code" href="structCreatureCreatePos.html#ac8f78af007314b6d27e6f8f2d0d6f409">GetPhaseMask</a>(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160; </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <a class="code" href="classObject.html#adfe424e32fc2aed91e1b0def7149b532">Object::_Create</a>(guidlow, guidlow, pet_number, <a class="code" href="ObjectGuid_8h.html#abe8666ac87665ba963053cdd2b014750a1615463418bf6aeaacb8df3af61b018e">HIGHGUID_PET</a>);</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160; </div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <a class="code" href="classCreature.html#ab861d1f64d1852833bf89f42c5412f0b">m_originalEntry</a> = cinfo-&gt;<a class="code" href="structCreatureInfo.html#a9a144b4f19fa41dd20ea542e6d913808">Entry</a>;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classCreature.html#ae125cf4a208fc76da3583701681ad148">InitEntry</a>(cinfo-&gt;<a class="code" href="structCreatureInfo.html#a9a144b4f19fa41dd20ea542e6d913808">Entry</a>))</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160; </div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    cPos.<a class="code" href="structCreatureCreatePos.html#ae48cf5213dde3a44bedc5a604e097323">SelectFinalPoint</a>(<span class="keyword">this</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160; </div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="keywordflow">if</span> (!cPos.<a class="code" href="structCreatureCreatePos.html#a4d528a6ab8e946056ee87901b9302835">Relocate</a>(<span class="keyword">this</span>))</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160; </div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <a class="code" href="classObject.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>, <a class="code" href="group__game.html#ggafd9f193edd86cc61d3f2413e3a1eaef5a9e9c750355ba14f30bc29800eb80bcb0">UNIT_FLAG2_REGENERATE_POWER</a>);</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <a class="code" href="classUnit.html#a7ae13a942847716011855720fb4a1d3a">SetSheath</a>(<a class="code" href="group__game.html#ggab7f73bef2e8c2d6be5e65b55062f3ceba72a383a4d8b9eacc45b04550148927f0">SHEATH_STATE_MELEE</a>);</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160; </div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471ae855adcbda374b2c654ae4e9a9bf2ce1">MINI_PET</a>)                           <span class="comment">// always non-attackable</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        <a class="code" href="classObject.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code" href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552af17c67cf54daaed77a829fbeacec801c">UNIT_FLAG_SPAWNING</a>);</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160; </div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() == <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a>)</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;        <a class="code" href="classCreature.html#aa8a50e4ad6c377c87844b6db31c1489f">SetCorpseDelay</a>(5);</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160; </div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;}</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160; </div>
<div class="line"><a name="l02256"></a><span class="lineno"><a class="line" href="classPet.html#ac7fbb6ab06f140e8843b0a8af83229e0"> 2256</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#ac7fbb6ab06f140e8843b0a8af83229e0">Pet::HasSpell</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spell)<span class="keyword"> const</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a83bec8aa36224306974de205d77c2872">m_controllableGuardian</a>)</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classCreature.html#a0740d9c891653ddbeb0fd797464eaef6">Creature::HasSpell</a>(spell);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160; </div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    PetSpellMap::const_iterator itr = <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.find(spell);</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordflow">return</span> (itr != <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.end() &amp;&amp; itr-&gt;second.state != <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5aa45b4f700fe69b9edae4fb979b988ffe">PETSPELL_REMOVED</a>);</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;}</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160; </div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="comment">// Get all passive spells in our skill line</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"><a class="line" href="classPet.html#a04c9223accb74363902edd455c7b836e"> 2266</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a04c9223accb74363902edd455c7b836e">Pet::LearnPetPassives</a>()</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;{</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <a class="code" href="structCreatureInfo.html">CreatureInfo</a> <span class="keyword">const</span>* cInfo = <a class="code" href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">GetCreatureInfo</a>();</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <span class="keywordflow">if</span> (!cInfo)</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160; </div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <a class="code" href="structCreatureFamilyEntry.html">CreatureFamilyEntry</a> <span class="keyword">const</span>* cFamily = <a class="code" href="DBCStores_8cpp.html#a83ea3f8701464968bcfc119ad499b756">sCreatureFamilyStore</a>.LookupEntry(cInfo-&gt;<a class="code" href="structCreatureInfo.html#a55f9e7b8189a5de4ef01d0787b161801">Family</a>);</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keywordflow">if</span> (!cFamily)</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160; </div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    PetFamilySpellsStore::const_iterator petStore = <a class="code" href="DBCStores_8cpp.html#adff3a199c893023323a04e8c6c35ddef">sPetFamilySpellsStore</a>.find(cFamily-&gt;<a class="code" href="structCreatureFamilyEntry.html#a84ba697182123cb3e7dd3ba07241e971">ID</a>);</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="keywordflow">if</span> (petStore != <a class="code" href="DBCStores_8cpp.html#adff3a199c893023323a04e8c6c35ddef">sPetFamilySpellsStore</a>.end())</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    {</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> petSet : petStore-&gt;second)</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;            <a class="code" href="classPet.html#a281cffe87c86627350f05a3aa15b4aff">addSpell</a>(petSet, <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea24d8db1d523431e423ef8354296ed162">ACT_DECIDE</a>, <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a12e005d42fccd3aadeac9008e95eb5b8">PETSPELL_NEW</a>, <a class="code" href="Pet_8h.html#ac12b13d4da0688112812b2c7976550cead8f157e9e157c6042ec5fa09e17edafb">PETSPELL_FAMILY</a>);</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    }</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;}</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"><a class="line" href="classPet.html#a462dc421828060d0478ca6a3ae0a2a57"> 2284</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a462dc421828060d0478ca6a3ae0a2a57">Pet::CastPetAuras</a>(<span class="keywordtype">bool</span> current)</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;{</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classPet.html#a9d623f0127c82864f885e09a9ddd2eb8">isControlled</a>())</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160; </div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160; </div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="keywordflow">for</span> (PetAuraSet::const_iterator itr = owner-&gt;<a class="code" href="classUnit.html#ad24816bf13af9aac3784f1c892cecd36">m_petAuras</a>.begin(); itr != owner-&gt;<a class="code" href="classUnit.html#ad24816bf13af9aac3784f1c892cecd36">m_petAuras</a>.end();)</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    {</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;        <a class="code" href="classPetAura.html">PetAura</a> <span class="keyword">const</span>* pa = *itr;</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;        ++itr;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160; </div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="keywordflow">if</span> (!current &amp;&amp; pa-&gt;<a class="code" href="classPetAura.html#adc1b329e1f303b5ad3f353abb4343cdf">IsRemovedOnChangePet</a>())</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;            owner-&gt;<a class="code" href="classUnit.html#a1350682846c1ddb65567ec85e75e2df3">RemovePetAura</a>(pa);</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;            <a class="code" href="classPet.html#a94a46240ffd80d7124918bb979f3c46d">CastPetAura</a>(pa);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    }</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;}</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"><a class="line" href="classPet.html#aa630a19bfa429ccf53e5d89d521bc0c5"> 2303</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#aa630a19bfa429ccf53e5d89d521bc0c5">Pet::CastOwnerTalentAuras</a>()</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;{</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>() || <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>()-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() != <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160; </div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <a class="code" href="classPlayer.html">Player</a>* pOwner = <span class="keyword">static_cast&lt;</span><a class="code" href="classPlayer.html">Player</a>*<span class="keyword">&gt;</span>(<a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>());</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160; </div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <span class="comment">// Handle Ferocious Inspiration Talent</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="keywordflow">if</span> (pOwner &amp;&amp; pOwner-&gt;<a class="code" href="classUnit.html#a58a507ebe628930b8a506144b364d84b">getClass</a>() == <a class="code" href="SharedDefines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa1c7c740a229946b31a477913e2e38fd8">CLASS_HUNTER</a>)</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    {</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        <span class="comment">// clear any existing Ferocious Inspiration auras</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        <a class="code" href="classUnit.html#a1a38bdc4f3c0a9b9cfa22f51365e37a4">RemoveAurasDueToSpell</a>(75593);</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        <a class="code" href="classUnit.html#a1a38bdc4f3c0a9b9cfa22f51365e37a4">RemoveAurasDueToSpell</a>(75446);</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        <a class="code" href="classUnit.html#a1a38bdc4f3c0a9b9cfa22f51365e37a4">RemoveAurasDueToSpell</a>(75447);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160; </div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        {</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            <span class="keyword">const</span> <a class="code" href="structSpellEntry.html">SpellEntry</a>* seTalent = pOwner-&gt;<a class="code" href="classPlayer.html#a1c3b22d45412cd870f86da240271ea83">GetKnownTalentRankById</a>(1800); <span class="comment">// Ferocious Inspiration</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160; </div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;            <span class="keywordflow">if</span> (seTalent)</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;            {</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                <span class="keywordflow">switch</span> (seTalent-&gt;<a class="code" href="structSpellEntry.html#a6092f385a545aa33ba1e5ee28d21e92a">Id</a>)</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                    <span class="keywordflow">case</span> 34455: <span class="comment">// Ferocious Inspiration Rank 1</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                        <a class="code" href="classUnit.html#a211876b6b1dcea2eedcc52e754093d70">CastSpell</a>(<span class="keyword">nullptr</span>, 75593, <a class="code" href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29ab89fa5cc12475f894d85c381bed7a2f2">TRIGGERED_OLD_TRIGGERED</a>); <span class="comment">// Ferocious Inspiration 1%</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                    <span class="keywordflow">case</span> 34459: <span class="comment">// Ferocious Inspiration Rank 2</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                        <a class="code" href="classUnit.html#a211876b6b1dcea2eedcc52e754093d70">CastSpell</a>(<span class="keyword">nullptr</span>, 75446, <a class="code" href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29ab89fa5cc12475f894d85c381bed7a2f2">TRIGGERED_OLD_TRIGGERED</a>); <span class="comment">// Ferocious Inspiration 2%</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                    <span class="keywordflow">case</span> 34460: <span class="comment">// Ferocious Inspiration Rank 3</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                        <a class="code" href="classUnit.html#a211876b6b1dcea2eedcc52e754093d70">CastSpell</a>(<span class="keyword">nullptr</span>, 75447, <a class="code" href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29ab89fa5cc12475f894d85c381bed7a2f2">TRIGGERED_OLD_TRIGGERED</a>); <span class="comment">// Ferocious Inspiration 3%</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                }</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            }</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        }</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    } <span class="comment">// End Ferocious Inspiration Talent</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;}</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"><a class="line" href="classPet.html#a94a46240ffd80d7124918bb979f3c46d"> 2341</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a94a46240ffd80d7124918bb979f3c46d">Pet::CastPetAura</a>(<a class="code" href="classPetAura.html">PetAura</a> <span class="keyword">const</span>* aura)</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;{</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> auraId = aura-&gt;<a class="code" href="classPetAura.html#a6f8318410229a89e0b3aa2af28d6cb2b">GetAura</a>(<a class="code" href="classObject.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>());</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="keywordflow">if</span> (!auraId)</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160; </div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <a class="code" href="classUnit.html#a211876b6b1dcea2eedcc52e754093d70">CastSpell</a>(<span class="keyword">nullptr</span>, auraId, <a class="code" href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29ab89fa5cc12475f894d85c381bed7a2f2">TRIGGERED_OLD_TRIGGERED</a>);</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;}</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"><a class="line" href="structDoPetLearnSpell.html"> 2350</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structDoPetLearnSpell.html">DoPetLearnSpell</a></div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;{</div>
<div class="line"><a name="l02352"></a><span class="lineno"><a class="line" href="structDoPetLearnSpell.html#a5816e38f99374b254ede21f71d6bf013"> 2352</a></span>&#160;    <a class="code" href="structDoPetLearnSpell.html#a5816e38f99374b254ede21f71d6bf013">DoPetLearnSpell</a>(<a class="code" href="classPet.html">Pet</a>&amp; _pet) : <a class="code" href="structDoPetLearnSpell.html#a1258e11dc26b93a83ef6b32706eddc6e">pet</a>(_pet) {}</div>
<div class="line"><a name="l02353"></a><span class="lineno"><a class="line" href="structDoPetLearnSpell.html#acc029c3bcaf3adcb9c42497268e8a631"> 2353</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structDoPetLearnSpell.html#acc029c3bcaf3adcb9c42497268e8a631">operator()</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spell_id) { <a class="code" href="structDoPetLearnSpell.html#a1258e11dc26b93a83ef6b32706eddc6e">pet</a>.<a class="code" href="classPet.html#af641ae2d7d873000862ac953f850d068">learnSpell</a>(spell_id); }</div>
<div class="line"><a name="l02354"></a><span class="lineno"><a class="line" href="structDoPetLearnSpell.html#a1258e11dc26b93a83ef6b32706eddc6e"> 2354</a></span>&#160;    <a class="code" href="classPet.html">Pet</a>&amp; <a class="code" href="structDoPetLearnSpell.html#a1258e11dc26b93a83ef6b32706eddc6e">pet</a>;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;};</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160; </div>
<div class="line"><a name="l02357"></a><span class="lineno"><a class="line" href="classPet.html#a641fba5945a2462c733fc98da6e4fee2"> 2357</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a641fba5945a2462c733fc98da6e4fee2">Pet::learnSpellHighRank</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellid)</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;{</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <a class="code" href="classPet.html#af641ae2d7d873000862ac953f850d068">learnSpell</a>(spellid);</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160; </div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <a class="code" href="structDoPetLearnSpell.html">DoPetLearnSpell</a> worker(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <a class="code" href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>.doForHighRanks(spellid, worker);</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;}</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160; </div>
<div class="line"><a name="l02365"></a><span class="lineno"><a class="line" href="classPet.html#a5318c4fc909c15b4ac3ed440f8ad5f2b"> 2365</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a5318c4fc909c15b4ac3ed440f8ad5f2b">Pet::SynchronizeLevelWithOwner</a>()</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;{</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="keywordflow">if</span> (!owner || owner-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() != <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160; </div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>())</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    {</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        <span class="comment">// always same level</span></div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a>:</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;            <a class="code" href="classPet.html#ae7a38fa1c07c594775ef7b28e61f0475">GivePetLevel</a>(owner-&gt;<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>());</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        <span class="comment">// can&#39;t be greater owner level</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>:</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>() &gt; owner-&gt;<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>())</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                <a class="code" href="classPet.html#ae7a38fa1c07c594775ef7b28e61f0475">GivePetLevel</a>(owner-&gt;<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>());</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>() + 5 &lt; owner-&gt;<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>())</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                <a class="code" href="classPet.html#ae7a38fa1c07c594775ef7b28e61f0475">GivePetLevel</a>(owner-&gt;<a class="code" href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">GetLevel</a>() - 5);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    }</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;}</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"><a class="line" href="classPet.html#a52ba391e71d4687347522e18fa845719"> 2389</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a52ba391e71d4687347522e18fa845719">Pet::SetModeFlags</a>(<a class="code" href="Pet_8h.html#a484a86780410fb960031b81ec70edf06">PetModeFlags</a> mode)</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;{</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <a class="code" href="classPet.html#ad6377c04c998de15a297bc42bc7b0456">m_petModeFlags</a> = mode;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160; </div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <span class="keywordflow">if</span> (!owner || owner-&gt;<a class="code" href="classObject.html#a7e985367f6a9997544bbc18253f3563d">GetTypeId</a>() != <a class="code" href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>)</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160; </div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <a class="code" href="classWorldPacket.html">WorldPacket</a> data(<a class="code" href="group__u2w.html#ggabeeee4622d9285fa92e9b61857002cacaef187d98019f6d590de8d7d195577ee1">SMSG_PET_MODE</a>, 12);</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    data &lt;&lt; <a class="code" href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">GetObjectGuid</a>();</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    data &lt;&lt; <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code" href="classPet.html#ad6377c04c998de15a297bc42bc7b0456">m_petModeFlags</a>);</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    ((<a class="code" href="classPlayer.html">Player</a>*)owner)-&gt;GetSession()-&gt;SendPacket(data);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;}</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160; </div>
<div class="line"><a name="l02403"></a><span class="lineno"><a class="line" href="classPet.html#ac5f8f3be4ef227b63bbd0c8d32aad5ac"> 2403</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#ac5f8f3be4ef227b63bbd0c8d32aad5ac">Pet::RegenerateHealth</a>()</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;{</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classCreature.html#a9d82bcc163c8a6c726c01950849fa2b1">IsRegeneratingHealth</a>())</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160; </div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> curValue = <a class="code" href="classUnit.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>();</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> maxValue = <a class="code" href="classUnit.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>();</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160; </div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <span class="keywordflow">if</span> (curValue &gt;= maxValue)</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160; </div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    <span class="keywordtype">float</span> HealthIncreaseRate = <a class="code" href="group__world.html#ga05dfb35c344e5b947a19e4284e7f5fa7">sWorld</a>.getConfig(<a class="code" href="group__world.html#ggad7288d27ab8a1132a5f30148c227f2bea00fd6fc10eaee642720e0c1e21c608d8">CONFIG_FLOAT_RATE_HEALTH</a>);</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> addvalue = 0;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160; </div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="classPet.html#a0595dccf2ddfc73bffb69512ca6c79ce">m_petType</a>)</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    {</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a>:</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>:</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        {</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;            addvalue = <a class="code" href="classUnit.html#afef38644eec7c185ae9bb0a848a98ad7">OCTRegenHPPerSpirit</a>() * HealthIncreaseRate * 4; <span class="comment">// pets regen per 4 seconds</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        }</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160; </div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471afb3caeecb823c7b5ee717d5e24d5e879">GUARDIAN_PET</a>:</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        {</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;            <span class="comment">// HACK: use this formula until we know the exact way to regen these type</span></div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;            addvalue = maxValue / 20;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        }</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160; </div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471ae855adcbda374b2c654ae4e9a9bf2ce1">MINI_PET</a>:</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        {</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;            <span class="comment">// HACK: use this formula until we know the exact way to regen these type</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;            addvalue = maxValue / 3;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        }</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    }</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160; </div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <a class="code" href="classUnit.html#a959cfb5dafa2f964adb440d2b53c02f6">ModifyHealth</a>(addvalue);</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;}</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160; </div>
<div class="line"><a name="l02446"></a><span class="lineno"><a class="line" href="classPet.html#a9fa5f385134015a3438ad7f5e6cba704"> 2446</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a9fa5f385134015a3438ad7f5e6cba704">Pet::ResetCorpseRespawn</a>()</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;{</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <a class="code" href="classCreature.html#a0f4963ea25609330724d847a404634e1">m_corpseExpirationTime</a> = <a class="code" href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">GetMap</a>()-&gt;<a class="code" href="classMap.html#ae061a2836480ed6702252224d49a19e2">GetCurrentClockTime</a>() + std::chrono::milliseconds(1000); <span class="comment">// rudimentary value - just need more than now</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;}</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160; </div>
<div class="line"><a name="l02451"></a><span class="lineno"><a class="line" href="classPet.html#a3b49f5373cea8b7536f5cf0db8cb4ae8"> 2451</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a3b49f5373cea8b7536f5cf0db8cb4ae8">Pet::ForcedDespawn</a>(<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> timeMSToDespawn, <span class="keywordtype">bool</span> onlyAlive)</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;{</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <span class="keywordflow">if</span> (timeMSToDespawn)</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    {</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        <a class="code" href="classCreature.html#ace485b762855ab4474691f213018dd0b">Creature::ForcedDespawn</a>(timeMSToDespawn, onlyAlive);</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    }</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160; </div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classCreature.html#a9ebb55decedd57541f51fb653a79f996">IsDespawned</a>())</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160; </div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    <a class="code" href="classUnit.html">Unit</a>* owner = <a class="code" href="classUnit.html#ac5deedcb47695a681523e416b8456848">GetOwner</a>();</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160; </div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classUnit.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        <a class="code" href="classPet.html#a3c2dcf8c9e0f9a836cc678a9479ebb64">SetDeathState</a>(<a class="code" href="group__game.html#gga671007e5c9d47b3ccb212f971e65baedab1727b82509eb59005a3b6b60107f51b">JUST_DIED</a>);</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160; </div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <a class="code" href="classCreature.html#a1de9334bbb56b74e0e4b170489361016">RemoveCorpse</a>(<span class="keyword">true</span>);                                     <span class="comment">// force corpse removal in the same grid</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160; </div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <a class="code" href="classPet.html#a20709cab46c2146092bce7aff49807b4">Unsummon</a>(<a class="code" href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>, owner);</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;}</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160; </div>
<div class="line"><a name="l02472"></a><span class="lineno"><a class="line" href="classPet.html#a5145a4c56ba7cfc46ade361b386ae2ec"> 2472</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPet.html#a5145a4c56ba7cfc46ade361b386ae2ec">Pet::InitializeSpellsForControllableGuardian</a>(<span class="keywordtype">bool</span> load)</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;{</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a6f348d8d362564c7a4d150517dccc369">InitPetActionBar</a>();</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160; </div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <a class="code" href="structCreatureSpellList.html">CreatureSpellList</a> <span class="keyword">const</span>&amp; spellList = <a class="code" href="classCreature.html#ab012f8d4df013324e7392c2f599013a7">GetSpellList</a>();</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160; </div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; spellData : spellList.<a class="code" href="structCreatureSpellList.html#a208f0daaf98b495e0bcc7151f0af6c0a">Spells</a>)</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        <a class="code" href="classPet.html#a281cffe87c86627350f05a3aa15b4aff">addSpell</a>(spellData.second.SpellId, <a class="code" href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea24d8db1d523431e423ef8354296ed162">ACT_DECIDE</a>, <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a12e005d42fccd3aadeac9008e95eb5b8">PETSPELL_NEW</a>);</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160; </div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <span class="keywordflow">if</span> (load &amp;&amp; <a class="code" href="classPet.html#a6fc6d5dd4545496a07c8294c0122bc31">_LoadGuardianPetNumber</a>() &amp;&amp; <a class="code" href="classPet.html#a707f2c992ddc77ba6b2aebd08fd31104">_LoadSpells</a>())</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    {</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        <span class="comment">// update autocast in bar</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = <a class="code" href="group__game.html#gga5656c6dd354cdc76da16094dd6f96724a1b9025dc7f8331f6ca9fd0cfce1b0ae9">ACTION_BAR_INDEX_PET_SPELL_START</a>; i &lt; <a class="code" href="group__game.html#gga5656c6dd354cdc76da16094dd6f96724a56eab700626db82e8012fc8daac5cee9">ACTION_BAR_INDEX_PET_SPELL_END</a>; ++i)</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        {</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;            <a class="code" href="structUnitActionBarEntry.html">UnitActionBarEntry</a> <span class="keyword">const</span>* bar = <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a9efb3e23e5e9230eef461da27f3e1da6">GetActionBarEntry</a>(i);</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;            <a class="code" href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">m_charmInfo</a>-&gt;<a class="code" href="structCharmInfo.html#a4951b83a10c85f36f25f2236983a51a3">SetActionBar</a>(i, bar-&gt;<a class="code" href="structUnitActionBarEntry.html#afd77e2f64ec856059759d05ddf77876e">GetAction</a>(), (<a class="code" href="group__game.html#gad8aa4c16328a5729560bd9a1ad0d392e">ActiveStates</a>)<a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>[bar-&gt;<a class="code" href="structUnitActionBarEntry.html#afd77e2f64ec856059759d05ddf77876e">GetAction</a>()].active);</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        }</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    }</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;}</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160; </div>
<div class="line"><a name="l02492"></a><span class="lineno"><a class="line" href="classPet.html#a6f8877f9c7bea7d6ca57e1b1a1605e65"> 2492</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPet.html#a6f8877f9c7bea7d6ca57e1b1a1605e65">Pet::IgnoresOwnersDeath</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a33ad9f84219eb2b2114c4a57e9827d37">IsGuardian</a>())</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    {</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = <a class="code" href="classObject.html#aebc9e7589e372ab99544e474c07609f0">GetUInt32Value</a>(<a class="code" href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af6ab95e21ce3e6cd8f5f7ec4a3c5d24a">UNIT_CREATED_BY_SPELL</a>))</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        {</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;            <a class="code" href="structSpellEntry.html">SpellEntry</a> <span class="keyword">const</span>* spellInfo = <a class="code" href="SQLStorages_8cpp.html#a6e07b93ae2737d35f4214041a6f735f4">sSpellTemplate</a>.<a class="code" href="classSQLStorage.html#ace42ec0424ef41d187eb7c1bdcfa8c62">LookupEntry</a>&lt;<a class="code" href="structSpellEntry.html">SpellEntry</a>&gt;(spellId);</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;            <span class="comment">// Remove infinity cooldown</span></div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            <span class="keywordflow">if</span> (spellInfo &amp;&amp; spellInfo-&gt;<a class="code" href="structSpellEntry.html#ab5ca60f93e4b1792578dcb5fe6b259e9">HasAttribute</a>(<a class="code" href="SpellDefines_8h.html#aab5e6a96aa8fdc62f97d37fec739d9c2a60c461e010de7ddf70241a79be5eee62">SPELL_ATTR_EX_IGNORE_OWNERS_DEATH</a>))</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        }</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    }</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;}</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"><a class="line" href="classPet.html#a26f3b5f2bbf67ed3fbe5bb43d01cc8c1"> 2508</a></span>&#160;std::vector&lt;uint32&gt; <a class="code" href="classPet.html#a26f3b5f2bbf67ed3fbe5bb43d01cc8c1">Pet::GetCharmSpells</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">getPetType</a>() != <a class="code" href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a>) <span class="comment">// this override is only for hunter pets with eye of the beast</span></div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classCreature.html#a13458e23ec02d1da709c1873fb1a3e05">Creature::GetCharmSpells</a>();</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160; </div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    std::vector&lt;uint32&gt; spells(<a class="code" href="group__game.html#ga9fb11c48873096dd4651aadf2e755bd9">CREATURE_MAX_SPELLS</a>, 0);</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <a class="code" href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> position = 0;</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="keywordflow">for</span> (PetSpellMap::const_iterator itr = <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.begin(); itr != <a class="code" href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">m_spells</a>.end() &amp;&amp; position &lt; <a class="code" href="group__game.html#ga9fb11c48873096dd4651aadf2e755bd9">CREATURE_MAX_SPELLS</a>; ++itr)</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    {</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        <span class="keywordflow">if</span> (itr-&gt;second.state == <a class="code" href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5aa45b4f700fe69b9edae4fb979b988ffe">PETSPELL_REMOVED</a>)</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160; </div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="SpellMgr_8cpp.html#a28b958e9db34bdad035df1f81ed2a280">IsPassiveSpell</a>(itr-&gt;first))</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160; </div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        spells[position] = itr-&gt;first;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        ++position;</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    }</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="keywordflow">return</span> spells;</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;}</div>
<div class="ttc" id="aBag_8h_html_aadcc1e3338f8cbbe511ad060db42dfb5a843659af0a40139bfa505d7e7982477b"><div class="ttname"><a href="Bag_8h.html#aadcc1e3338f8cbbe511ad060db42dfb5a843659af0a40139bfa505d7e7982477b">NULL_BAG</a></div><div class="ttdeci">@ NULL_BAG</div><div class="ttdef"><b>Definition:</b> <a href="Bag_8h_source.html#l00027">Bag.h:27</a></div></div>
<div class="ttc" id="aBag_8h_html_aadcc1e3338f8cbbe511ad060db42dfb5aeb5cbd7990d2f5e679ec4ecc65e83130"><div class="ttname"><a href="Bag_8h.html#aadcc1e3338f8cbbe511ad060db42dfb5aeb5cbd7990d2f5e679ec4ecc65e83130">NULL_SLOT</a></div><div class="ttdeci">@ NULL_SLOT</div><div class="ttdef"><b>Definition:</b> <a href="Bag_8h_source.html#l00029">Bag.h:28</a></div></div>
<div class="ttc" id="aCommon_8h_html_a4261a6a40855caeed69661cc67faca82"><div class="ttname"><a href="Common_8h.html#a4261a6a40855caeed69661cc67faca82">TimePoint</a></div><div class="ttdeci">std::chrono::time_point&lt; std::chrono::system_clock, std::chrono::milliseconds &gt; TimePoint</div><div class="ttdef"><b>Definition:</b> <a href="Common_8h_source.html#l00058">Common.h:58</a></div></div>
<div class="ttc" id="aCommon_8h_html_aa4b4ca918855952bdb5a1c2026b1432da168decfa64c1d194af3d763203fe33d3"><div class="ttname"><a href="Common_8h.html#aa4b4ca918855952bdb5a1c2026b1432da168decfa64c1d194af3d763203fe33d3">IN_MILLISECONDS</a></div><div class="ttdeci">@ IN_MILLISECONDS</div><div class="ttdef"><b>Definition:</b> <a href="Common_8h_source.html#l00119">Common.h:118</a></div></div>
<div class="ttc" id="aCommon_8h_html_aa4b4ca918855952bdb5a1c2026b1432da8e85ce474d6e6c5ef5b03a415dee454a"><div class="ttname"><a href="Common_8h.html#aa4b4ca918855952bdb5a1c2026b1432da8e85ce474d6e6c5ef5b03a415dee454a">DAY</a></div><div class="ttdeci">@ DAY</div><div class="ttdef"><b>Definition:</b> <a href="Common_8h_source.html#l00114">Common.h:114</a></div></div>
<div class="ttc" id="aCommon_8h_html_ab9c3c609e1d02430671de0a109410ac8"><div class="ttname"><a href="Common_8h.html#ab9c3c609e1d02430671de0a109410ac8">M_PI_F</a></div><div class="ttdeci">#define M_PI_F</div><div class="ttdef"><b>Definition:</b> <a href="Common_8h_source.html#l00166">Common.h:166</a></div></div>
<div class="ttc" id="aCommon_8h_html_ad02db78fbe7773265246ca3010f23f6fa6a04b5fbbc52adb152bfb45b600db102"><div class="ttname"><a href="Common_8h.html#ad02db78fbe7773265246ca3010f23f6fa6a04b5fbbc52adb152bfb45b600db102">SEC_ADMINISTRATOR</a></div><div class="ttdeci">@ SEC_ADMINISTRATOR</div><div class="ttdef"><b>Definition:</b> <a href="Common_8h_source.html#l00126">Common.h:126</a></div></div>
<div class="ttc" id="aCreature_8h_html_a0adc01a263d6c377feabd69772dd957aa9ec8abad4095c21592d208efdc4a866a"><div class="ttname"><a href="Creature_8h.html#a0adc01a263d6c377feabd69772dd957aa9ec8abad4095c21592d208efdc4a866a">CREATURE_SUBTYPE_PET</a></div><div class="ttdeci">@ CREATURE_SUBTYPE_PET</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00525">Creature.h:525</a></div></div>
<div class="ttc" id="aDBCEnums_8h_html_a038867f3f1d822b38a6cad2411c8006a"><div class="ttname"><a href="DBCEnums_8h.html#a038867f3f1d822b38a6cad2411c8006a">MAX_EFFECT_INDEX</a></div><div class="ttdeci">#define MAX_EFFECT_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="DBCEnums_8h_source.html#l00492">DBCEnums.h:492</a></div></div>
<div class="ttc" id="aDBCEnums_8h_html_a28c252fd678ff644cdad7b1b835f24c9aa9a058d60db14ffc3f1cc5ef8339ff14"><div class="ttname"><a href="DBCEnums_8h.html#a28c252fd678ff644cdad7b1b835f24c9aa9a058d60db14ffc3f1cc5ef8339ff14">MAP_BATTLEGROUND</a></div><div class="ttdeci">@ MAP_BATTLEGROUND</div><div class="ttdef"><b>Definition:</b> <a href="DBCEnums_8h_source.html#l00341">DBCEnums.h:341</a></div></div>
<div class="ttc" id="aDBCEnums_8h_html_a28c252fd678ff644cdad7b1b835f24c9ab4f612b5c13e82251823d80d0ab728b6"><div class="ttname"><a href="DBCEnums_8h.html#a28c252fd678ff644cdad7b1b835f24c9ab4f612b5c13e82251823d80d0ab728b6">MAP_ARENA</a></div><div class="ttdeci">@ MAP_ARENA</div><div class="ttdef"><b>Definition:</b> <a href="DBCEnums_8h_source.html#l00343">DBCEnums.h:342</a></div></div>
<div class="ttc" id="aDBCEnums_8h_html_a6be7938b7bea685e9f021da7acb6d9b6"><div class="ttname"><a href="DBCEnums_8h.html#a6be7938b7bea685e9f021da7acb6d9b6">SpellEffectIndex</a></div><div class="ttdeci">SpellEffectIndex</div><div class="ttdef"><b>Definition:</b> <a href="DBCEnums_8h_source.html#l00485">DBCEnums.h:486</a></div></div>
<div class="ttc" id="aDBCStores_8cpp_html_a1698373b36d110ef114bbfe77abdf85e"><div class="ttname"><a href="DBCStores_8cpp.html#a1698373b36d110ef114bbfe77abdf85e">sTalentTabStore</a></div><div class="ttdeci">DBCStorage&lt; TalentTabEntry &gt; sTalentTabStore(TalentTabEntryfmt)</div></div>
<div class="ttc" id="aDBCStores_8cpp_html_a83ea3f8701464968bcfc119ad499b756"><div class="ttname"><a href="DBCStores_8cpp.html#a83ea3f8701464968bcfc119ad499b756">sCreatureFamilyStore</a></div><div class="ttdeci">DBCStorage&lt; CreatureFamilyEntry &gt; sCreatureFamilyStore(CreatureFamilyfmt)</div></div>
<div class="ttc" id="aDBCStores_8cpp_html_a9041f2cf553692019968cf09df184a00"><div class="ttname"><a href="DBCStores_8cpp.html#a9041f2cf553692019968cf09df184a00">GetTalentSpellPos</a></div><div class="ttdeci">TalentSpellPos const  * GetTalentSpellPos(uint32 spellId)</div><div class="ttdef"><b>Definition:</b> <a href="DBCStores_8cpp_source.html#l00801">DBCStores.cpp:801</a></div></div>
<div class="ttc" id="aDBCStores_8cpp_html_abdab3b372fb6ffd5dde09caf6967ac8f"><div class="ttname"><a href="DBCStores_8cpp.html#abdab3b372fb6ffd5dde09caf6967ac8f">sTalentStore</a></div><div class="ttdeci">DBCStorage&lt; TalentEntry &gt; sTalentStore(TalentEntryfmt)</div></div>
<div class="ttc" id="aDBCStores_8cpp_html_ac28198d1c28605951e9debe1298b8304"><div class="ttname"><a href="DBCStores_8cpp.html#ac28198d1c28605951e9debe1298b8304">sMapStore</a></div><div class="ttdeci">DBCStorage&lt; MapEntry &gt; sMapStore(MapEntryfmt)</div></div>
<div class="ttc" id="aDBCStores_8cpp_html_ad0884cc1c1a88f83eda9b4bf5f4905a0"><div class="ttname"><a href="DBCStores_8cpp.html#ad0884cc1c1a88f83eda9b4bf5f4905a0">GetTalentSpellCost</a></div><div class="ttdeci">uint32 GetTalentSpellCost(TalentSpellPos const *pos)</div><div class="ttdef"><b>Definition:</b> <a href="DBCStores_8cpp_source.html#l00810">DBCStores.cpp:810</a></div></div>
<div class="ttc" id="aDBCStores_8cpp_html_adff3a199c893023323a04e8c6c35ddef"><div class="ttname"><a href="DBCStores_8cpp.html#adff3a199c893023323a04e8c6c35ddef">sPetFamilySpellsStore</a></div><div class="ttdeci">PetFamilySpellsStore sPetFamilySpellsStore</div><div class="ttdef"><b>Definition:</b> <a href="DBCStores_8cpp_source.html#l00173">DBCStores.cpp:173</a></div></div>
<div class="ttc" id="aDBCStructure_8h_html_a7dfd9b5e0adb5c5e3ebf3173f80fbcce"><div class="ttname"><a href="DBCStructure_8h.html#a7dfd9b5e0adb5c5e3ebf3173f80fbcce">MAX_SPELL_REAGENTS</a></div><div class="ttdeci">#define MAX_SPELL_REAGENTS</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01812">DBCStructure.h:1812</a></div></div>
<div class="ttc" id="aDatabaseEnv_8h_html"><div class="ttname"><a href="DatabaseEnv_8h.html">DatabaseEnv.h</a></div></div>
<div class="ttc" id="aDefine_8h_html_a0bf9964a3ce962c07ad3d8b5432bbbcd"><div class="ttname"><a href="Define_8h.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a></div><div class="ttdeci">std::int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="Define_8h_source.html#l00112">Define.h:112</a></div></div>
<div class="ttc" id="aDefine_8h_html_a15a8d014fadf85c99a2268d8cbd00767"><div class="ttname"><a href="Define_8h.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a></div><div class="ttdeci">std::uint8_t uint8</div><div class="ttdef"><b>Definition:</b> <a href="Define_8h_source.html#l00118">Define.h:118</a></div></div>
<div class="ttc" id="aDefine_8h_html_a22f78cc9780bf32aff91ae17c3101c8d"><div class="ttname"><a href="Define_8h.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a></div><div class="ttdeci">std::uint32_t uint32</div><div class="ttdef"><b>Definition:</b> <a href="Define_8h_source.html#l00116">Define.h:116</a></div></div>
<div class="ttc" id="aDefine_8h_html_ac4dd6ce78ce3b840c53bd4b3c63ed09b"><div class="ttname"><a href="Define_8h.html#ac4dd6ce78ce3b840c53bd4b3c63ed09b">uint64</a></div><div class="ttdeci">std::uint64_t uint64</div><div class="ttdef"><b>Definition:</b> <a href="Define_8h_source.html#l00115">Define.h:115</a></div></div>
<div class="ttc" id="aErrors_8h_html_a7b94d20194b84dde056465e12496d3f4"><div class="ttname"><a href="Errors_8h.html#a7b94d20194b84dde056465e12496d3f4">MANGOS_ASSERT</a></div><div class="ttdeci">#define MANGOS_ASSERT</div><div class="ttdef"><b>Definition:</b> <a href="Errors_8h_source.html#l00046">Errors.h:46</a></div></div>
<div class="ttc" id="aFormulas_8h_html"><div class="ttname"><a href="Formulas_8h.html">Formulas.h</a></div></div>
<div class="ttc" id="aGroup_8h_html_a914819bad74fbd5e30a14b5250e00e22ac4eec7ebcdd88fe72703af3fbcdeef65"><div class="ttname"><a href="Group_8h.html#a914819bad74fbd5e30a14b5250e00e22ac4eec7ebcdd88fe72703af3fbcdeef65">GROUP_UPDATE_PET</a></div><div class="ttdeci">@ GROUP_UPDATE_PET</div><div class="ttdef"><b>Definition:</b> <a href="Group_8h_source.html#l00103">Group.h:103</a></div></div>
<div class="ttc" id="aItem_8h_html_a3019725fcb2ef7ad3892236a50138a92aaaa7970333ac75f264d5f3a14c888746"><div class="ttname"><a href="Item_8h.html#a3019725fcb2ef7ad3892236a50138a92aaaa7970333ac75f264d5f3a14c888746">BUY_ERR_NOT_ENOUGHT_MONEY</a></div><div class="ttdeci">@ BUY_ERR_NOT_ENOUGHT_MONEY</div><div class="ttdef"><b>Definition:</b> <a href="Item_8h_source.html#l00136">Item.h:136</a></div></div>
<div class="ttc" id="aItem_8h_html_a73617af2b3e5e935646638fa13678391a939b6661cd19d6c18274906abb28021c"><div class="ttname"><a href="Item_8h.html#a73617af2b3e5e935646638fa13678391a939b6661cd19d6c18274906abb28021c">EQUIP_ERR_OK</a></div><div class="ttdeci">@ EQUIP_ERR_OK</div><div class="ttdef"><b>Definition:</b> <a href="Item_8h_source.html#l00040">Item.h:40</a></div></div>
<div class="ttc" id="aLog_8h_html"><div class="ttname"><a href="Log_8h.html">Log.h</a></div></div>
<div class="ttc" id="aLog_8h_html_a21a2c7330a04ac78200a986f66609369"><div class="ttname"><a href="Log_8h.html#a21a2c7330a04ac78200a986f66609369">DEBUG_LOG</a></div><div class="ttdeci">#define DEBUG_LOG(...)</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00262">Log.h:262</a></div></div>
<div class="ttc" id="aLog_8h_html_a66ee45c2c4582addc7fba4147eb4741c"><div class="ttname"><a href="Log_8h.html#a66ee45c2c4582addc7fba4147eb4741c">BASIC_LOG</a></div><div class="ttdeci">#define BASIC_LOG(...)</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00238">Log.h:238</a></div></div>
<div class="ttc" id="aLog_8h_html_ab5487500f5b4b12072043104b916d582"><div class="ttname"><a href="Log_8h.html#ab5487500f5b4b12072043104b916d582">sLog</a></div><div class="ttdeci">#define sLog</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00236">Log.h:236</a></div></div>
<div class="ttc" id="aLog_8h_html_adbee991aac31d91a88ae6276d32ba9f6"><div class="ttname"><a href="Log_8h.html#adbee991aac31d91a88ae6276d32ba9f6">DETAIL_LOG</a></div><div class="ttdeci">#define DETAIL_LOG(...)</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00250">Log.h:250</a></div></div>
<div class="ttc" id="aObjectGuid_8h_html_a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c"><div class="ttname"><a href="ObjectGuid_8h.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a></div><div class="ttdeci">@ TYPEID_PLAYER</div><div class="ttdef"><b>Definition:</b> <a href="ObjectGuid_8h_source.html#l00032">ObjectGuid.h:32</a></div></div>
<div class="ttc" id="aObjectGuid_8h_html_abe8666ac87665ba963053cdd2b014750a1615463418bf6aeaacb8df3af61b018e"><div class="ttname"><a href="ObjectGuid_8h.html#abe8666ac87665ba963053cdd2b014750a1615463418bf6aeaacb8df3af61b018e">HIGHGUID_PET</a></div><div class="ttdeci">@ HIGHGUID_PET</div><div class="ttdef"><b>Definition:</b> <a href="ObjectGuid_8h_source.html#l00069">ObjectGuid.h:69</a></div></div>
<div class="ttc" id="aObjectGuid_8h_html_abe8666ac87665ba963053cdd2b014750ada4bc6e3b0a067d4fc236f7e9dcde919"><div class="ttname"><a href="ObjectGuid_8h.html#abe8666ac87665ba963053cdd2b014750ada4bc6e3b0a067d4fc236f7e9dcde919">HIGHGUID_ITEM</a></div><div class="ttdeci">@ HIGHGUID_ITEM</div><div class="ttdef"><b>Definition:</b> <a href="ObjectGuid_8h_source.html#l00061">ObjectGuid.h:61</a></div></div>
<div class="ttc" id="aObjectMgr_8h_html"><div class="ttname"><a href="ObjectMgr_8h.html">ObjectMgr.h</a></div></div>
<div class="ttc" id="aObjectMgr_8h_html_a736e30da2b5261060ac6cdbb5de3b787"><div class="ttname"><a href="ObjectMgr_8h.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a></div><div class="ttdeci">#define sObjectMgr</div><div class="ttdef"><b>Definition:</b> <a href="ObjectMgr_8h_source.html#l01464">ObjectMgr.h:1464</a></div></div>
<div class="ttc" id="aPet_8h_html"><div class="ttname"><a href="Pet_8h.html">Pet.h</a></div></div>
<div class="ttc" id="aPet_8h_html_a006372e9693754ac0d923d8764ec55fd"><div class="ttname"><a href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fd">PetSaveMode</a></div><div class="ttdeci">PetSaveMode</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00040">Pet.h:41</a></div></div>
<div class="ttc" id="aPet_8h_html_a006372e9693754ac0d923d8764ec55fda20411938f7cc7a5140e3b7006d54d851"><div class="ttname"><a href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fda20411938f7cc7a5140e3b7006d54d851">PET_SAVE_LAST_STABLE_SLOT</a></div><div class="ttdeci">@ PET_SAVE_LAST_STABLE_SLOT</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00045">Pet.h:45</a></div></div>
<div class="ttc" id="aPet_8h_html_a006372e9693754ac0d923d8764ec55fdad4213e75267dd772a1811da6336e447a"><div class="ttname"><a href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdad4213e75267dd772a1811da6336e447a">PET_SAVE_REAGENTS</a></div><div class="ttdeci">@ PET_SAVE_REAGENTS</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00048">Pet.h:47</a></div></div>
<div class="ttc" id="aPet_8h_html_a006372e9693754ac0d923d8764ec55fdae32b2ad103ad490f5f16a85f9a173dd1"><div class="ttname"><a href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae32b2ad103ad490f5f16a85f9a173dd1">PET_SAVE_AS_DELETED</a></div><div class="ttdeci">@ PET_SAVE_AS_DELETED</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00042">Pet.h:42</a></div></div>
<div class="ttc" id="aPet_8h_html_a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd"><div class="ttname"><a href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a></div><div class="ttdeci">@ PET_SAVE_NOT_IN_SLOT</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00046">Pet.h:46</a></div></div>
<div class="ttc" id="aPet_8h_html_a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503"><div class="ttname"><a href="Pet_8h.html#a006372e9693754ac0d923d8764ec55fdafd6db825b6f344f6f64ae53dc19cf503">PET_SAVE_AS_CURRENT</a></div><div class="ttdeci">@ PET_SAVE_AS_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00043">Pet.h:43</a></div></div>
<div class="ttc" id="aPet_8h_html_a2eba0c745572c0d75f7127597344e769"><div class="ttname"><a href="Pet_8h.html#a2eba0c745572c0d75f7127597344e769">ACTIVE_SPELLS_MAX</a></div><div class="ttdeci">#define ACTIVE_SPELLS_MAX</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00135">Pet.h:135</a></div></div>
<div class="ttc" id="aPet_8h_html_a4135b2b50486d91baa260c63a20f15f5"><div class="ttname"><a href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5">PetSpellState</a></div><div class="ttdeci">PetSpellState</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00073">Pet.h:74</a></div></div>
<div class="ttc" id="aPet_8h_html_a4135b2b50486d91baa260c63a20f15f5a12e005d42fccd3aadeac9008e95eb5b8"><div class="ttname"><a href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a12e005d42fccd3aadeac9008e95eb5b8">PETSPELL_NEW</a></div><div class="ttdeci">@ PETSPELL_NEW</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00077">Pet.h:77</a></div></div>
<div class="ttc" id="aPet_8h_html_a4135b2b50486d91baa260c63a20f15f5a67cfad7aa3b55a87a692db5c7eeac936"><div class="ttname"><a href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a67cfad7aa3b55a87a692db5c7eeac936">PETSPELL_UNCHANGED</a></div><div class="ttdeci">@ PETSPELL_UNCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00075">Pet.h:75</a></div></div>
<div class="ttc" id="aPet_8h_html_a4135b2b50486d91baa260c63a20f15f5a9b8bacded9035aeabc92430edece787c"><div class="ttname"><a href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5a9b8bacded9035aeabc92430edece787c">PETSPELL_CHANGED</a></div><div class="ttdeci">@ PETSPELL_CHANGED</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00076">Pet.h:76</a></div></div>
<div class="ttc" id="aPet_8h_html_a4135b2b50486d91baa260c63a20f15f5aa45b4f700fe69b9edae4fb979b988ffe"><div class="ttname"><a href="Pet_8h.html#a4135b2b50486d91baa260c63a20f15f5aa45b4f700fe69b9edae4fb979b988ffe">PETSPELL_REMOVED</a></div><div class="ttdeci">@ PETSPELL_REMOVED</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00079">Pet.h:78</a></div></div>
<div class="ttc" id="aPet_8h_html_a484a86780410fb960031b81ec70edf06"><div class="ttname"><a href="Pet_8h.html#a484a86780410fb960031b81ec70edf06">PetModeFlags</a></div><div class="ttdeci">PetModeFlags</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00051">Pet.h:52</a></div></div>
<div class="ttc" id="aPet_8h_html_a484a86780410fb960031b81ec70edf06a541261899d040191b719300aa6710dcb"><div class="ttname"><a href="Pet_8h.html#a484a86780410fb960031b81ec70edf06a541261899d040191b719300aa6710dcb">PET_MODE_DEFAULT</a></div><div class="ttdeci">@ PET_MODE_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00063">Pet.h:63</a></div></div>
<div class="ttc" id="aPet_8h_html_a76712c47838e51c9fe44aa5043816d40"><div class="ttname"><a href="Pet_8h.html#a76712c47838e51c9fe44aa5043816d40">HAPPINESS_LEVEL_SIZE</a></div><div class="ttdeci">#define HAPPINESS_LEVEL_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00133">Pet.h:133</a></div></div>
<div class="ttc" id="aPet_8h_html_aae4a343750f70898b0f6490e7db6a471"><div class="ttname"><a href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471">PetType</a></div><div class="ttdeci">PetType</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00027">Pet.h:28</a></div></div>
<div class="ttc" id="aPet_8h_html_aae4a343750f70898b0f6490e7db6a471a23adf99a764bb4b2fa21add244c5b38b"><div class="ttname"><a href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a23adf99a764bb4b2fa21add244c5b38b">PROTECTOR_PET</a></div><div class="ttdeci">@ PROTECTOR_PET</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00033">Pet.h:33</a></div></div>
<div class="ttc" id="aPet_8h_html_aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd"><div class="ttname"><a href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a3167e28bcafa6bb3b3e2b2dc72557ecd">SUMMON_PET</a></div><div class="ttdeci">@ SUMMON_PET</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00029">Pet.h:29</a></div></div>
<div class="ttc" id="aPet_8h_html_aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2"><div class="ttname"><a href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471a608ed771a0dfa608eeafada945298bc2">HUNTER_PET</a></div><div class="ttdeci">@ HUNTER_PET</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00030">Pet.h:30</a></div></div>
<div class="ttc" id="aPet_8h_html_aae4a343750f70898b0f6490e7db6a471acb8090a59681ea6d194c6a00b73423ea"><div class="ttname"><a href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471acb8090a59681ea6d194c6a00b73423ea">MAX_PET_TYPE</a></div><div class="ttdeci">@ MAX_PET_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00035">Pet.h:34</a></div></div>
<div class="ttc" id="aPet_8h_html_aae4a343750f70898b0f6490e7db6a471ae855adcbda374b2c654ae4e9a9bf2ce1"><div class="ttname"><a href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471ae855adcbda374b2c654ae4e9a9bf2ce1">MINI_PET</a></div><div class="ttdeci">@ MINI_PET</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00032">Pet.h:32</a></div></div>
<div class="ttc" id="aPet_8h_html_aae4a343750f70898b0f6490e7db6a471afb3caeecb823c7b5ee717d5e24d5e879"><div class="ttname"><a href="Pet_8h.html#aae4a343750f70898b0f6490e7db6a471afb3caeecb823c7b5ee717d5e24d5e879">GUARDIAN_PET</a></div><div class="ttdeci">@ GUARDIAN_PET</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00031">Pet.h:31</a></div></div>
<div class="ttc" id="aPet_8h_html_ac12b13d4da0688112812b2c7976550ce"><div class="ttname"><a href="Pet_8h.html#ac12b13d4da0688112812b2c7976550ce">PetSpellType</a></div><div class="ttdeci">PetSpellType</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00081">Pet.h:82</a></div></div>
<div class="ttc" id="aPet_8h_html_ac12b13d4da0688112812b2c7976550cead8f157e9e157c6042ec5fa09e17edafb"><div class="ttname"><a href="Pet_8h.html#ac12b13d4da0688112812b2c7976550cead8f157e9e157c6042ec5fa09e17edafb">PETSPELL_FAMILY</a></div><div class="ttdeci">@ PETSPELL_FAMILY</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00084">Pet.h:84</a></div></div>
<div class="ttc" id="aPet_8h_html_addd416d6eeaa9cd92339aa437caedb3e"><div class="ttname"><a href="Pet_8h.html#addd416d6eeaa9cd92339aa437caedb3e">HappinessState</a></div><div class="ttdeci">HappinessState</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00066">Pet.h:67</a></div></div>
<div class="ttc" id="aPet_8h_html_addd416d6eeaa9cd92339aa437caedb3ea5592cf91bd70788e64c412b3cc642e2c"><div class="ttname"><a href="Pet_8h.html#addd416d6eeaa9cd92339aa437caedb3ea5592cf91bd70788e64c412b3cc642e2c">HAPPY</a></div><div class="ttdeci">@ HAPPY</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00071">Pet.h:70</a></div></div>
<div class="ttc" id="aPet_8h_html_addd416d6eeaa9cd92339aa437caedb3ea59ae17a687995046ac7025dcc53156e3"><div class="ttname"><a href="Pet_8h.html#addd416d6eeaa9cd92339aa437caedb3ea59ae17a687995046ac7025dcc53156e3">CONTENT</a></div><div class="ttdeci">@ CONTENT</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00069">Pet.h:69</a></div></div>
<div class="ttc" id="aPet_8h_html_addd416d6eeaa9cd92339aa437caedb3eae373c6b52d4a8b45084f4a276fb6d6c5"><div class="ttname"><a href="Pet_8h.html#addd416d6eeaa9cd92339aa437caedb3eae373c6b52d4a8b45084f4a276fb6d6c5">UNHAPPY</a></div><div class="ttdeci">@ UNHAPPY</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00068">Pet.h:68</a></div></div>
<div class="ttc" id="aPlayer_8h_html_a06f492a0a20f5264c8395684220fec84"><div class="ttname"><a href="Player_8h.html#a06f492a0a20f5264c8395684220fec84">ItemPosCountVec</a></div><div class="ttdeci">std::vector&lt; ItemPosCount &gt; ItemPosCountVec</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l00727">Player.h:727</a></div></div>
<div class="ttc" id="aPlayer_8h_html_aa6b2dcfd7e0c4f62b238241afe792fcba3cd8cf3374b3079026df290c3fed8505"><div class="ttname"><a href="Player_8h.html#aa6b2dcfd7e0c4f62b238241afe792fcba3cd8cf3374b3079026df290c3fed8505">AT_LOGIN_RESET_PET_TALENTS</a></div><div class="ttdeci">@ AT_LOGIN_RESET_PET_TALENTS</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l00569">Player.h:569</a></div></div>
<div class="ttc" id="aSQLStorages_8cpp_html_a6e07b93ae2737d35f4214041a6f735f4"><div class="ttname"><a href="SQLStorages_8cpp.html#a6e07b93ae2737d35f4214041a6f735f4">sSpellTemplate</a></div><div class="ttdeci">SQLStorage sSpellTemplate(SpellEntryfmt, &quot;id&quot;, &quot;spell_template&quot;)</div></div>
<div class="ttc" id="aSharedDefines_8h_html_a0f8923f02eb7dfba43a426b8320354da"><div class="ttname"><a href="SharedDefines_8h.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a></div><div class="ttdeci">#define MAX_STATS</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00149">SharedDefines.h:149</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a25263e3e283b54e5280d5af1fd16da4c"><div class="ttname"><a href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a></div><div class="ttdeci">SpellSchools</div><div class="ttdoc">The different spell schools that are available, used in both damage calculation and spell casting to ...</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00173">SharedDefines.h:174</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a25263e3e283b54e5280d5af1fd16da4ca012e4eaa4bc0f0534aa45cec3f854193"><div class="ttname"><a href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca012e4eaa4bc0f0534aa45cec3f854193">SPELL_SCHOOL_SHADOW</a></div><div class="ttdeci">@ SPELL_SCHOOL_SHADOW</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00180">SharedDefines.h:180</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af"><div class="ttname"><a href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a></div><div class="ttdeci">@ SPELL_SCHOOL_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00175">SharedDefines.h:175</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a25263e3e283b54e5280d5af1fd16da4ca09fc89d828412bd44caab029414ef572"><div class="ttname"><a href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca09fc89d828412bd44caab029414ef572">SPELL_SCHOOL_NATURE</a></div><div class="ttdeci">@ SPELL_SCHOOL_NATURE</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00178">SharedDefines.h:178</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a25263e3e283b54e5280d5af1fd16da4ca0f89e62868c910d070db0ce176e7e4ad"><div class="ttname"><a href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca0f89e62868c910d070db0ce176e7e4ad">SPELL_SCHOOL_FROST</a></div><div class="ttdeci">@ SPELL_SCHOOL_FROST</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00179">SharedDefines.h:179</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a25263e3e283b54e5280d5af1fd16da4ca5fffe6beea5302fef06839a6b1ff3bb0"><div class="ttname"><a href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca5fffe6beea5302fef06839a6b1ff3bb0">SPELL_SCHOOL_ARCANE</a></div><div class="ttdeci">@ SPELL_SCHOOL_ARCANE</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00182">SharedDefines.h:181</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a25263e3e283b54e5280d5af1fd16da4ca81fa2e882b9ff91d97f1966ecec53cc5"><div class="ttname"><a href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4ca81fa2e882b9ff91d97f1966ecec53cc5">SPELL_SCHOOL_FIRE</a></div><div class="ttdeci">@ SPELL_SCHOOL_FIRE</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00177">SharedDefines.h:177</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62"><div class="ttname"><a href="SharedDefines_8h.html#a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62">SPELL_SCHOOL_HOLY</a></div><div class="ttdeci">@ SPELL_SCHOOL_HOLY</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00176">SharedDefines.h:176</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67"><div class="ttname"><a href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a></div><div class="ttdeci">@ OFF_ATTACK</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00480">SharedDefines.h:480</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae"><div class="ttname"><a href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aa5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a></div><div class="ttdeci">@ BASE_ATTACK</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00479">SharedDefines.h:479</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670"><div class="ttname"><a href="SharedDefines_8h.html#a2a35652af7129b6f139b0f7a2af1876aaa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a></div><div class="ttdeci">@ RANGED_ATTACK</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00482">SharedDefines.h:481</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a3667e3c5ec056737c8789615a989324fafe69f428f13193dcfd8ed8f30d6d2e07"><div class="ttname"><a href="SharedDefines_8h.html#a3667e3c5ec056737c8789615a989324fafe69f428f13193dcfd8ed8f30d6d2e07">GENDER_NONE</a></div><div class="ttdeci">@ GENDER_NONE</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00029">SharedDefines.h:28</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a5bc40f1116d89138cda8ebd1a04694dfa39da882a0c94f36b30c6e24a8819bf40"><div class="ttname"><a href="SharedDefines_8h.html#a5bc40f1116d89138cda8ebd1a04694dfa39da882a0c94f36b30c6e24a8819bf40">CREATURE_TYPE_CRITTER</a></div><div class="ttdeci">@ CREATURE_TYPE_CRITTER</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l01261">SharedDefines.h:1261</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a6d2f7a5452237dadf8fd3aed70f44039a7846c0137067e3870ef646bc0f6d0a05"><div class="ttname"><a href="SharedDefines_8h.html#a6d2f7a5452237dadf8fd3aed70f44039a7846c0137067e3870ef646bc0f6d0a05">UNIT_DYNFLAG_NONE</a></div><div class="ttdeci">@ UNIT_DYNFLAG_NONE</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l01682">SharedDefines.h:1682</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a764cf61fb299aad0b3b985d48745fb9da8cc0a2364751ce316ed5a98a0a77a1eb"><div class="ttname"><a href="SharedDefines_8h.html#a764cf61fb299aad0b3b985d48745fb9da8cc0a2364751ce316ed5a98a0a77a1eb">TRACK_AURA_TYPE_SINGLE_TARGET</a></div><div class="ttdeci">@ TRACK_AURA_TYPE_SINGLE_TARGET</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l02240">SharedDefines.h:2240</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a764cf61fb299aad0b3b985d48745fb9da8d1e4a1e75343d374916530e639c4ef3"><div class="ttname"><a href="SharedDefines_8h.html#a764cf61fb299aad0b3b985d48745fb9da8d1e4a1e75343d374916530e639c4ef3">TRACK_AURA_TYPE_NOT_TRACKED</a></div><div class="ttdeci">@ TRACK_AURA_TYPE_NOT_TRACKED</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l02239">SharedDefines.h:2239</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a86e4e3df7a5142175aa5df522d3346cfa1c7c740a229946b31a477913e2e38fd8"><div class="ttname"><a href="SharedDefines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa1c7c740a229946b31a477913e2e38fd8">CLASS_HUNTER</a></div><div class="ttdeci">@ CLASS_HUNTER</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00082">SharedDefines.h:82</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a86e4e3df7a5142175aa5df522d3346cfa679de5e410197d42cea53f371aba7f59"><div class="ttname"><a href="SharedDefines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa679de5e410197d42cea53f371aba7f59">CLASS_WARRIOR</a></div><div class="ttdeci">@ CLASS_WARRIOR</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00080">SharedDefines.h:80</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a86e4e3df7a5142175aa5df522d3346cfa72922255ea5f13ce70f2c5cec3e33369"><div class="ttname"><a href="SharedDefines_8h.html#a86e4e3df7a5142175aa5df522d3346cfa72922255ea5f13ce70f2c5cec3e33369">CLASS_WARLOCK</a></div><div class="ttdeci">@ CLASS_WARLOCK</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00088">SharedDefines.h:88</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a8aa413c82fd7553d24fcd515335f1f27"><div class="ttname"><a href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27">Powers</a></div><div class="ttdeci">Powers</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00151">SharedDefines.h:152</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a8aa413c82fd7553d24fcd515335f1f27a1b514bf3a42e9a5dc4271bd25b7dce7e"><div class="ttname"><a href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a></div><div class="ttdeci">@ POWER_RAGE</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00154">SharedDefines.h:154</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35"><div class="ttname"><a href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27a50639b61f76392c0af9c99462b1cba35">POWER_HAPPINESS</a></div><div class="ttdeci">@ POWER_HAPPINESS</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00157">SharedDefines.h:157</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a8aa413c82fd7553d24fcd515335f1f27ab3e4f73d6494c917b99431bae75a4d5f"><div class="ttname"><a href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a></div><div class="ttdeci">@ POWER_MANA</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00153">SharedDefines.h:153</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_a8aa413c82fd7553d24fcd515335f1f27adf1e2c1dbfbecd82a3bdcef559ac8cc3"><div class="ttname"><a href="SharedDefines_8h.html#a8aa413c82fd7553d24fcd515335f1f27adf1e2c1dbfbecd82a3bdcef559ac8cc3">POWER_FOCUS</a></div><div class="ttdeci">@ POWER_FOCUS</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00155">SharedDefines.h:155</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_aa61850c8cc16fdf9ea749bfde3adb448a6c87736f9fe31c8d2650db184cb2097f"><div class="ttname"><a href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448a6c87736f9fe31c8d2650db184cb2097f">SILVER</a></div><div class="ttdeci">@ SILVER</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00136">SharedDefines.h:136</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_aa61850c8cc16fdf9ea749bfde3adb448aa7790837e9c1f7cb78b55743b9a67623"><div class="ttname"><a href="SharedDefines_8h.html#aa61850c8cc16fdf9ea749bfde3adb448aa7790837e9c1f7cb78b55743b9a67623">GOLD</a></div><div class="ttdeci">@ GOLD</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00138">SharedDefines.h:137</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_ad28c24e82986133459dee232a5360bc4"><div class="ttname"><a href="SharedDefines_8h.html#ad28c24e82986133459dee232a5360bc4">Stats</a></div><div class="ttdeci">Stats</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00140">SharedDefines.h:141</a></div></div>
<div class="ttc" id="aSharedDefines_8h_html_ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778"><div class="ttname"><a href="SharedDefines_8h.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a></div><div class="ttdeci">@ STAT_STRENGTH</div><div class="ttdef"><b>Definition:</b> <a href="SharedDefines_8h_source.html#l00142">SharedDefines.h:142</a></div></div>
<div class="ttc" id="aSpellAuraDefines_8h_html_a538cdc259460b365f406fe0b3a981799a967f549cb14fb8bc956cda92a0a05adb"><div class="ttname"><a href="SpellAuraDefines_8h.html#a538cdc259460b365f406fe0b3a981799a967f549cb14fb8bc956cda92a0a05adb">SPELL_AURA_MOD_PET_TALENT_POINTS</a></div><div class="ttdeci">@ SPELL_AURA_MOD_PET_TALENT_POINTS</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuraDefines_8h_source.html#l00281">SpellAuraDefines.h:281</a></div></div>
<div class="ttc" id="aSpellAuraDefines_8h_html_a538cdc259460b365f406fe0b3a981799aeb8f5c79c441187541514b36a00918a1"><div class="ttname"><a href="SpellAuraDefines_8h.html#a538cdc259460b365f406fe0b3a981799aeb8f5c79c441187541514b36a00918a1">SPELL_AURA_MOD_STEALTH</a></div><div class="ttdeci">@ SPELL_AURA_MOD_STEALTH</div><div class="ttdoc">Taken care of in Aura::HandleModStealth, take note that this is not the same thing as invisibility.</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuraDefines_8h_source.html#l00112">SpellAuraDefines.h:112</a></div></div>
<div class="ttc" id="aSpellAuras_8cpp_html_a89ce2a8162f56943bafaaa4c4f4fb2ea"><div class="ttname"><a href="SpellAuras_8cpp.html#a89ce2a8162f56943bafaaa4c4f4fb2ea">CreateSpellAuraHolder</a></div><div class="ttdeci">SpellAuraHolder * CreateSpellAuraHolder(SpellEntry const *spellproto, Unit *target, WorldObject *caster, Item *castItem, SpellEntry const *triggeredBy)</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8cpp_source.html#l00538">SpellAuras.cpp:538</a></div></div>
<div class="ttc" id="aSpellAuras_8cpp_html_a8c5e168a30525814773df4982274d9b5"><div class="ttname"><a href="SpellAuras_8cpp.html#a8c5e168a30525814773df4982274d9b5">CreateAura</a></div><div class="ttdeci">Aura * CreateAura(SpellEntry const *spellproto, SpellEffectIndex eff, int32 const *currentDamage, int32 const *currentBasePoints, SpellAuraHolder *holder, Unit *target, Unit *caster, Item *castItem, uint64 scriptValue)</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8cpp_source.html#l00524">SpellAuras.cpp:524</a></div></div>
<div class="ttc" id="aSpellAuras_8h_html"><div class="ttname"><a href="SpellAuras_8h.html">SpellAuras.h</a></div></div>
<div class="ttc" id="aSpellAuras_8h_html_a1b224092d87cd57536cbe0dafe6dc44aa5a4725ef493acd702a0b3f7b46c72c96"><div class="ttname"><a href="SpellAuras_8h.html#a1b224092d87cd57536cbe0dafe6dc44aa5a4725ef493acd702a0b3f7b46c72c96">SPELLAURAHOLDER_STATE_READY</a></div><div class="ttdeci">@ SPELLAURAHOLDER_STATE_READY</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00087">SpellAuras.h:87</a></div></div>
<div class="ttc" id="aSpellAuras_8h_html_a1b224092d87cd57536cbe0dafe6dc44aa5e297678a5f149e18120ee488c3f7a4b"><div class="ttname"><a href="SpellAuras_8h.html#a1b224092d87cd57536cbe0dafe6dc44aa5e297678a5f149e18120ee488c3f7a4b">SPELLAURAHOLDER_STATE_DB_LOAD</a></div><div class="ttdeci">@ SPELLAURAHOLDER_STATE_DB_LOAD</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00090">SpellAuras.h:89</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_a7530a2997a6c89f362a5641d9f608fa9a2467e8933c194cde893ec0c92c331577"><div class="ttname"><a href="SpellDefines_8h.html#a7530a2997a6c89f362a5641d9f608fa9a2467e8933c194cde893ec0c92c331577">SPELL_ATTR_EX7_RECAST_ON_RESUMMON</a></div><div class="ttdeci">@ SPELL_ATTR_EX7_RECAST_ON_RESUMMON</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00296">SpellDefines.h:296</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_a8512d8ac830d80360b33fa46dc884a29a899fa7df360462673111bbfbb0bbd00d"><div class="ttname"><a href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29a899fa7df360462673111bbfbb0bbd00d">TRIGGERED_IGNORE_GCD</a></div><div class="ttdeci">@ TRIGGERED_IGNORE_GCD</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00734">SpellDefines.h:734</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_a8512d8ac830d80360b33fa46dc884a29aaf2e6f2e4c3f497f195817316711147c"><div class="ttname"><a href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29aaf2e6f2e4c3f497f195817316711147c">TRIGGERED_IGNORE_COOLDOWNS</a></div><div class="ttdeci">@ TRIGGERED_IGNORE_COOLDOWNS</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00736">SpellDefines.h:736</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_a8512d8ac830d80360b33fa46dc884a29ab89fa5cc12475f894d85c381bed7a2f2"><div class="ttname"><a href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29ab89fa5cc12475f894d85c381bed7a2f2">TRIGGERED_OLD_TRIGGERED</a></div><div class="ttdeci">@ TRIGGERED_OLD_TRIGGERED</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00725">SpellDefines.h:725</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_a8512d8ac830d80360b33fa46dc884a29ad2e82d2342b545f831dfe79d922a3b20"><div class="ttname"><a href="SpellDefines_8h.html#a8512d8ac830d80360b33fa46dc884a29ad2e82d2342b545f831dfe79d922a3b20">TRIGGERED_NONE</a></div><div class="ttdeci">@ TRIGGERED_NONE</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00724">SpellDefines.h:724</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_aab5e6a96aa8fdc62f97d37fec739d9c2a60c461e010de7ddf70241a79be5eee62"><div class="ttname"><a href="SpellDefines_8h.html#aab5e6a96aa8fdc62f97d37fec739d9c2a60c461e010de7ddf70241a79be5eee62">SPELL_ATTR_EX_IGNORE_OWNERS_DEATH</a></div><div class="ttdeci">@ SPELL_ATTR_EX_IGNORE_OWNERS_DEATH</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00089">SpellDefines.h:89</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_aff3ab1b558940f59a9d1aab9f95943cb"><div class="ttname"><a href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cb">SpellCastResult</a></div><div class="ttdeci">SpellCastResult</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00331">SpellDefines.h:332</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_aff3ab1b558940f59a9d1aab9f95943cbaaa8582c07f58c05e32b1885a14e8320a"><div class="ttname"><a href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbaaa8582c07f58c05e32b1885a14e8320a">SPELL_FAILED_TARGETS_DEAD</a></div><div class="ttdeci">@ SPELL_FAILED_TARGETS_DEAD</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00442">SpellDefines.h:442</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_aff3ab1b558940f59a9d1aab9f95943cbabac1a9f442523ff297fbca0beea649b3"><div class="ttname"><a href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbabac1a9f442523ff297fbca0beea649b3">SPELL_FAILED_BAD_TARGETS</a></div><div class="ttdeci">@ SPELL_FAILED_BAD_TARGETS</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00345">SpellDefines.h:345</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_aff3ab1b558940f59a9d1aab9f95943cbadb56426fd2113c3ff3ff3d1815d79fa6"><div class="ttname"><a href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbadb56426fd2113c3ff3ff3d1815d79fa6">SPELL_CAST_OK</a></div><div class="ttdeci">@ SPELL_CAST_OK</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00526">SpellDefines.h:525</a></div></div>
<div class="ttc" id="aSpellDefines_8h_html_aff3ab1b558940f59a9d1aab9f95943cbaefb143fec77b4fcde0bc45deb3c38b7c"><div class="ttname"><a href="SpellDefines_8h.html#aff3ab1b558940f59a9d1aab9f95943cbaefb143fec77b4fcde0bc45deb3c38b7c">SPELL_FAILED_NO_PET</a></div><div class="ttdeci">@ SPELL_FAILED_NO_PET</div><div class="ttdef"><b>Definition:</b> <a href="SpellDefines_8h_source.html#l00417">SpellDefines.h:417</a></div></div>
<div class="ttc" id="aSpellEffectDefines_8h_html_a292c893150c454dd75628b719db1fe97a56fb7001bff11474629f084fda6953a1"><div class="ttname"><a href="SpellEffectDefines_8h.html#a292c893150c454dd75628b719db1fe97a56fb7001bff11474629f084fda6953a1">SPELL_EFFECT_APPLY_AREA_AURA_PET</a></div><div class="ttdeci">@ SPELL_EFFECT_APPLY_AREA_AURA_PET</div><div class="ttdef"><b>Definition:</b> <a href="SpellEffectDefines_8h_source.html#l00145">SpellEffectDefines.h:145</a></div></div>
<div class="ttc" id="aSpellEffectDefines_8h_html_a292c893150c454dd75628b719db1fe97affaa057383042f4e64d387fb592eecb6"><div class="ttname"><a href="SpellEffectDefines_8h.html#a292c893150c454dd75628b719db1fe97affaa057383042f4e64d387fb592eecb6">SPELL_EFFECT_APPLY_AREA_AURA_OWNER</a></div><div class="ttdeci">@ SPELL_EFFECT_APPLY_AREA_AURA_OWNER</div><div class="ttdef"><b>Definition:</b> <a href="SpellEffectDefines_8h_source.html#l00169">SpellEffectDefines.h:169</a></div></div>
<div class="ttc" id="aSpellMgr_8cpp_html_a28b958e9db34bdad035df1f81ed2a280"><div class="ttname"><a href="SpellMgr_8cpp.html#a28b958e9db34bdad035df1f81ed2a280">IsPassiveSpell</a></div><div class="ttdeci">bool IsPassiveSpell(uint32 spellId)</div><div class="ttdef"><b>Definition:</b> <a href="SpellMgr_8cpp_source.html#l00363">SpellMgr.cpp:363</a></div></div>
<div class="ttc" id="aSpellMgr_8cpp_html_ac8cbcaf933a719c961ea28ae0be73c10"><div class="ttname"><a href="SpellMgr_8cpp.html#ac8cbcaf933a719c961ea28ae0be73c10">GetSpellDuration</a></div><div class="ttdeci">int32 GetSpellDuration(SpellEntry const *spellInfo)</div><div class="ttdef"><b>Definition:</b> <a href="SpellMgr_8cpp_source.html#l00059">SpellMgr.cpp:59</a></div></div>
<div class="ttc" id="aSpellMgr_8h_html"><div class="ttname"><a href="SpellMgr_8h.html">SpellMgr.h</a></div></div>
<div class="ttc" id="aSpellMgr_8h_html_a891f616061b87ded477929015ea961fe"><div class="ttname"><a href="SpellMgr_8h.html#a891f616061b87ded477929015ea961fe">IsAutocastable</a></div><div class="ttdeci">bool IsAutocastable(SpellEntry const *spellInfo)</div><div class="ttdef"><b>Definition:</b> <a href="SpellMgr_8h_source.html#l00442">SpellMgr.h:442</a></div></div>
<div class="ttc" id="aSpellMgr_8h_html_aa21e14d8e1145507b746a69b5487109d"><div class="ttname"><a href="SpellMgr_8h.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a></div><div class="ttdeci">#define sSpellMgr</div><div class="ttdef"><b>Definition:</b> <a href="SpellMgr_8h_source.html#l03356">SpellMgr.h:3356</a></div></div>
<div class="ttc" id="aSpellMgr_8h_html_aff302d7ad23409ef738f15bcb560ed89"><div class="ttname"><a href="SpellMgr_8h.html#aff302d7ad23409ef738f15bcb560ed89">PetLevelupSpellSet</a></div><div class="ttdeci">std::multimap&lt; uint32, uint32 &gt; PetLevelupSpellSet</div><div class="ttdef"><b>Definition:</b> <a href="SpellMgr_8h_source.html#l02711">SpellMgr.h:2711</a></div></div>
<div class="ttc" id="aTransports_8h_html"><div class="ttname"><a href="Transports_8h.html">Transports.h</a></div></div>
<div class="ttc" id="aUnitAI_8h_html_af9c6d64ff42ea6d6056c73f6618d8f9d"><div class="ttname"><a href="UnitAI_8h.html#af9c6d64ff42ea6d6056c73f6618d8f9d">ReactStates</a></div><div class="ttdeci">ReactStates</div><div class="ttdef"><b>Definition:</b> <a href="UnitAI_8h_source.html#l00081">UnitAI.h:82</a></div></div>
<div class="ttc" id="aUnit_8h_html"><div class="ttname"><a href="Unit_8h.html">Unit.h</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881a10674c45e01f88895742624d8065dea7"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a10674c45e01f88895742624d8065dea7">UNIT_NPC_FLAGS</a></div><div class="ttdeci">@ UNIT_NPC_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00142">UpdateFields.h:142</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881a132df4597ea73a26d0574cbcfe3d9b5c"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a132df4597ea73a26d0574cbcfe3d9b5c">UNIT_FIELD_PETEXPERIENCE</a></div><div class="ttdeci">@ UNIT_FIELD_PETEXPERIENCE</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00137">UpdateFields.h:137</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881a49274b75b31edf1b32e1922b5e37fb0c"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a49274b75b31edf1b32e1922b5e37fb0c">UNIT_FIELD_BYTES_0</a></div><div class="ttdeci">@ UNIT_FIELD_BYTES_0</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00098">UpdateFields.h:98</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a></div><div class="ttdeci">@ UNIT_MOD_CAST_SPEED</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00140">UpdateFields.h:140</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a></div><div class="ttdeci">@ UNIT_FIELD_FLAGS_2</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00121">UpdateFields.h:121</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881a8a4774bff9e2c26fe65610992b9bfb37"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881a8a4774bff9e2c26fe65610992b9bfb37">UNIT_FIELD_PET_NAME_TIMESTAMP</a></div><div class="ttdeci">@ UNIT_FIELD_PET_NAME_TIMESTAMP</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00136">UpdateFields.h:136</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881aa05729ef8c6250d5ed65b77838b49983"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aa05729ef8c6250d5ed65b77838b49983">UNIT_FIELD_PETNEXTLEVELEXP</a></div><div class="ttdeci">@ UNIT_FIELD_PETNEXTLEVELEXP</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00138">UpdateFields.h:138</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a></div><div class="ttdeci">@ UNIT_FIELD_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00120">UpdateFields.h:120</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881af2d4e268d5842c9b63100cfa2876c8cd"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af2d4e268d5842c9b63100cfa2876c8cd">UNIT_FIELD_BYTES_2</a></div><div class="ttdeci">@ UNIT_FIELD_BYTES_2</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00164">UpdateFields.h:164</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881af6ab95e21ce3e6cd8f5f7ec4a3c5d24a"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881af6ab95e21ce3e6cd8f5f7ec4a3c5d24a">UNIT_CREATED_BY_SPELL</a></div><div class="ttdeci">@ UNIT_CREATED_BY_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00141">UpdateFields.h:141</a></div></div>
<div class="ttc" id="aUpdateFields_8h_html_a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d"><div class="ttname"><a href="UpdateFields_8h.html#a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d">UNIT_DYNAMIC_FLAGS</a></div><div class="ttdeci">@ UNIT_DYNAMIC_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="UpdateFields_8h_source.html#l00139">UpdateFields.h:139</a></div></div>
<div class="ttc" id="aUtil_8cpp_html_ab17def34ccbbd868dc87a16bf35acdbd"><div class="ttname"><a href="Util_8cpp.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a></div><div class="ttdeci">uint32 urand(uint32 min, uint32 max)</div><div class="ttdef"><b>Definition:</b> <a href="Util_8cpp_source.html#l00074">Util.cpp:74</a></div></div>
<div class="ttc" id="aWorldPacket_8h_html"><div class="ttname"><a href="WorldPacket_8h.html">WorldPacket.h</a></div></div>
<div class="ttc" id="aclassAura_html"><div class="ttname"><a href="classAura.html">Aura</a></div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00277">SpellAuras.h:278</a></div></div>
<div class="ttc" id="aclassAura_html_a3c2b57d640c76bd0ad1fb871165d3d41"><div class="ttname"><a href="classAura.html#a3c2b57d640c76bd0ad1fb871165d3d41">Aura::SetLoadedState</a></div><div class="ttdeci">void SetLoadedState(int32 damage, uint32 periodicTime)</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00493">SpellAuras.h:493</a></div></div>
<div class="ttc" id="aclassAura_html_a8a5eb1e90972a14b8ba482991decebc8"><div class="ttname"><a href="classAura.html#a8a5eb1e90972a14b8ba482991decebc8">Aura::GetModifier</a></div><div class="ttdeci">Modifier * GetModifier()</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00465">SpellAuras.h:465</a></div></div>
<div class="ttc" id="aclassByteBuffer_html"><div class="ttname"><a href="classByteBuffer.html">ByteBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="ByteBuffer_8h_source.html#l00049">ByteBuffer.h:50</a></div></div>
<div class="ttc" id="aclassByteBuffer_html_ab71feec2acb9ff88a5c7c7d0adaa7653"><div class="ttname"><a href="classByteBuffer.html#ab71feec2acb9ff88a5c7c7d0adaa7653">ByteBuffer::append</a></div><div class="ttdeci">void append(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="ByteBuffer_8h_source.html#l00381">ByteBuffer.h:381</a></div></div>
<div class="ttc" id="aclassByteBuffer_html_ac06a598447807d32f6594a97a32bce94"><div class="ttname"><a href="classByteBuffer.html#ac06a598447807d32f6594a97a32bce94">ByteBuffer::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="ByteBuffer_8h_source.html#l00365">ByteBuffer.h:365</a></div></div>
<div class="ttc" id="aclassCooldownContainer_html_a8a77bcfea68ceefe0623b2e08ee01045"><div class="ttname"><a href="classCooldownContainer.html#a8a77bcfea68ceefe0623b2e08ee01045">CooldownContainer::AddCooldown</a></div><div class="ttdeci">bool AddCooldown(TimePoint clockNow, uint32 spellId, uint32 duration, uint32 spellCategory=0, uint32 categoryDuration=0, uint32 itemId=0, bool onHold=false)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00245">Object.h:245</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00544">Creature.h:545</a></div></div>
<div class="ttc" id="aclassCreature_html_a013409bd4b6d0286c0243cfff4221e0d"><div class="ttname"><a href="classCreature.html#a013409bd4b6d0286c0243cfff4221e0d">Creature::GetCreatureInfo</a></div><div class="ttdeci">CreatureInfo const  * GetCreatureInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00680">Creature.h:680</a></div></div>
<div class="ttc" id="aclassCreature_html_a0740d9c891653ddbeb0fd797464eaef6"><div class="ttname"><a href="classCreature.html#a0740d9c891653ddbeb0fd797464eaef6">Creature::HasSpell</a></div><div class="ttdeci">bool HasSpell(uint32 spellID) const override</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l02361">Creature.cpp:2361</a></div></div>
<div class="ttc" id="aclassCreature_html_a0f4963ea25609330724d847a404634e1"><div class="ttname"><a href="classCreature.html#a0f4963ea25609330724d847a404634e1">Creature::m_corpseExpirationTime</a></div><div class="ttdeci">TimePoint m_corpseExpirationTime</div><div class="ttdoc">Timers.</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00906">Creature.h:906</a></div></div>
<div class="ttc" id="aclassCreature_html_a13458e23ec02d1da709c1873fb1a3e05"><div class="ttname"><a href="classCreature.html#a13458e23ec02d1da709c1873fb1a3e05">Creature::GetCharmSpells</a></div><div class="ttdeci">std::vector&lt; uint32 &gt; GetCharmSpells() const</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l01528">Creature.cpp:1528</a></div></div>
<div class="ttc" id="aclassCreature_html_a1de9334bbb56b74e0e4b170489361016"><div class="ttname"><a href="classCreature.html#a1de9334bbb56b74e0e4b170489361016">Creature::RemoveCorpse</a></div><div class="ttdeci">void RemoveCorpse(bool inPlace=false)</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l00263">Creature.cpp:263</a></div></div>
<div class="ttc" id="aclassCreature_html_a665aa1317b2045108c0edc3eab569ca1"><div class="ttname"><a href="classCreature.html#a665aa1317b2045108c0edc3eab569ca1">Creature::SetDeathState</a></div><div class="ttdeci">void SetDeathState(DeathState s) override</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l01846">Creature.cpp:1846</a></div></div>
<div class="ttc" id="aclassCreature_html_a8e79b5c25db2911cb945219bc460dfdc"><div class="ttname"><a href="classCreature.html#a8e79b5c25db2911cb945219bc460dfdc">Creature::_GetHealthMod</a></div><div class="ttdeci">static float _GetHealthMod(int32 Rank)</div><div class="ttdoc">Get custom factor to scale health (default 1, CONFIG_FLOAT_RATE_CREATURE_*_HP)</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l01471">Creature.cpp:1471</a></div></div>
<div class="ttc" id="aclassCreature_html_a91f62e4e056b9877c843379e0bec9630"><div class="ttname"><a href="classCreature.html#a91f62e4e056b9877c843379e0bec9630">Creature::IsCorpseExpired</a></div><div class="ttdeci">bool IsCorpseExpired() const</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l02962">Creature.cpp:2962</a></div></div>
<div class="ttc" id="aclassCreature_html_a9b1dbfcecf2abb5edc5d5b824ec8e139"><div class="ttname"><a href="classCreature.html#a9b1dbfcecf2abb5edc5d5b824ec8e139">Creature::AIM_Initialize</a></div><div class="ttdeci">bool AIM_Initialize()</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l00894">Creature.cpp:894</a></div></div>
<div class="ttc" id="aclassCreature_html_a9d82bcc163c8a6c726c01950849fa2b1"><div class="ttname"><a href="classCreature.html#a9d82bcc163c8a6c726c01950849fa2b1">Creature::IsRegeneratingHealth</a></div><div class="ttdeci">bool IsRegeneratingHealth() const</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00766">Creature.h:766</a></div></div>
<div class="ttc" id="aclassCreature_html_a9ebb55decedd57541f51fb653a79f996"><div class="ttname"><a href="classCreature.html#a9ebb55decedd57541f51fb653a79f996">Creature::IsDespawned</a></div><div class="ttdeci">bool IsDespawned() const</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00583">Creature.h:583</a></div></div>
<div class="ttc" id="aclassCreature_html_aa8a50e4ad6c377c87844b6db31c1489f"><div class="ttname"><a href="classCreature.html#aa8a50e4ad6c377c87844b6db31c1489f">Creature::SetCorpseDelay</a></div><div class="ttdeci">void SetCorpseDelay(uint32 delay)</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00584">Creature.h:584</a></div></div>
<div class="ttc" id="aclassCreature_html_ab012f8d4df013324e7392c2f599013a7"><div class="ttname"><a href="classCreature.html#ab012f8d4df013324e7392c2f599013a7">Creature::GetSpellList</a></div><div class="ttdeci">CreatureSpellList const  &amp; GetSpellList() const</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00858">Creature.h:858</a></div></div>
<div class="ttc" id="aclassCreature_html_ab861d1f64d1852833bf89f42c5412f0b"><div class="ttname"><a href="classCreature.html#ab861d1f64d1852833bf89f42c5412f0b">Creature::m_originalEntry</a></div><div class="ttdeci">uint32 m_originalEntry</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00930">Creature.h:930</a></div></div>
<div class="ttc" id="aclassCreature_html_ac17de5b958df3b98f1ae974315c15a8e"><div class="ttname"><a href="classCreature.html#ac17de5b958df3b98f1ae974315c15a8e">Creature::StartCooldown</a></div><div class="ttdeci">void StartCooldown(Unit *owner)</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l03110">Creature.cpp:3110</a></div></div>
<div class="ttc" id="aclassCreature_html_ace485b762855ab4474691f213018dd0b"><div class="ttname"><a href="classCreature.html#ace485b762855ab4474691f213018dd0b">Creature::ForcedDespawn</a></div><div class="ttdeci">virtual void ForcedDespawn(uint32 timeMSToDespawn=0, bool onlyAlive=false)</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l01939">Creature.cpp:1939</a></div></div>
<div class="ttc" id="aclassCreature_html_adfcb8bc5a745c30f0db20024bf397dab"><div class="ttname"><a href="classCreature.html#adfcb8bc5a745c30f0db20024bf397dab">Creature::_GetDamageMod</a></div><div class="ttdeci">static float _GetDamageMod(int32 Rank)</div><div class="ttdoc">Get custom factor to scale damage (default 1, CONFIG_FLOAT_RATE_*_DAMAGE)</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l01490">Creature.cpp:1490</a></div></div>
<div class="ttc" id="aclassCreature_html_ae125cf4a208fc76da3583701681ad148"><div class="ttname"><a href="classCreature.html#ae125cf4a208fc76da3583701681ad148">Creature::InitEntry</a></div><div class="ttdeci">bool InitEntry(uint32 Entry, const CreatureData *data=nullptr, GameEventCreatureData const *eventData=nullptr)</div><div class="ttdoc">change the entry of creature until respawn</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l00321">Creature.cpp:321</a></div></div>
<div class="ttc" id="aclassCreature_html_ae6229b598c07b66d87488c6c94928c16"><div class="ttname"><a href="classCreature.html#ae6229b598c07b66d87488c6c94928c16">Creature::RegeneratePower</a></div><div class="ttdeci">void RegeneratePower(float timerMultiplier)</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l00815">Creature.cpp:815</a></div></div>
<div class="ttc" id="aclassCreature_html_aeabcba8703e2e98708f80894a8e6c976"><div class="ttname"><a href="classCreature.html#aeabcba8703e2e98708f80894a8e6c976">Creature::SelectLevel</a></div><div class="ttdeci">void SelectLevel(uint32 forcedLevel=USE_DEFAULT_DATABASE_LEVEL)</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l01285">Creature.cpp:1285</a></div></div>
<div class="ttc" id="aclassCreature_html_af884c2ac6a93ade8fc3dbdcc59ba12e8"><div class="ttname"><a href="classCreature.html#af884c2ac6a93ade8fc3dbdcc59ba12e8">Creature::Update</a></div><div class="ttdeci">void Update(const uint32 diff) override</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l00719">Creature.cpp:719</a></div></div>
<div class="ttc" id="aclassCreature_html_afccd80c6dd2ce153d8219c086822fe55"><div class="ttname"><a href="classCreature.html#afccd80c6dd2ce153d8219c086822fe55">Creature::GetNameForLocaleIdx</a></div><div class="ttdeci">const char * GetNameForLocaleIdx(int32 loc_idx) const override</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l02592">Creature.cpp:2592</a></div></div>
<div class="ttc" id="aclassDatabase_html_a05a126869fcd32e43c8db16ed63a2591"><div class="ttname"><a href="classDatabase.html#a05a126869fcd32e43c8db16ed63a2591">Database::BeginTransaction</a></div><div class="ttdeci">bool bool bool BeginTransaction()</div><div class="ttdef"><b>Definition:</b> <a href="Database_8cpp_source.html#l00388">Database.cpp:388</a></div></div>
<div class="ttc" id="aclassDatabase_html_a0edc136df6714abd439745855618c4f8"><div class="ttname"><a href="classDatabase.html#a0edc136df6714abd439745855618c4f8">Database::Execute</a></div><div class="ttdeci">bool Execute(const char *sql)</div><div class="ttdef"><b>Definition:</b> <a href="Database_8cpp_source.html#l00324">Database.cpp:324</a></div></div>
<div class="ttc" id="aclassDatabase_html_a1379d88f95a689d8b6f7ff0fd9215b4d"><div class="ttname"><a href="classDatabase.html#a1379d88f95a689d8b6f7ff0fd9215b4d">Database::PExecute</a></div><div class="ttdeci">bool PExecute(const char *format,...) ATTR_PRINTF(2</div><div class="ttdef"><b>Definition:</b> <a href="Database_8cpp_source.html#l00348">Database.cpp:348</a></div></div>
<div class="ttc" id="aclassDatabase_html_abb8080b8ddbc8345e193a7e6f0cfbd88"><div class="ttname"><a href="classDatabase.html#abb8080b8ddbc8345e193a7e6f0cfbd88">Database::CreateStatement</a></div><div class="ttdeci">SqlStatement CreateStatement(SqlStatementID &amp;index, const char *fmt)</div><div class="ttdef"><b>Definition:</b> <a href="Database_8cpp_source.html#l00581">Database.cpp:581</a></div></div>
<div class="ttc" id="aclassDatabase_html_ae9332e6ba803852091f432bc329a62bc"><div class="ttname"><a href="classDatabase.html#ae9332e6ba803852091f432bc329a62bc">Database::PQuery</a></div><div class="ttdeci">QueryResult * PQuery(const char *format,...) ATTR_PRINTF(2</div><div class="ttdef"><b>Definition:</b> <a href="Database_8cpp_source.html#l00286">Database.cpp:286</a></div></div>
<div class="ttc" id="aclassDatabase_html_af4d03f875b7540de19eb1e8ccd0fb841"><div class="ttname"><a href="classDatabase.html#af4d03f875b7540de19eb1e8ccd0fb841">Database::CommitTransaction</a></div><div class="ttdeci">bool CommitTransaction()</div><div class="ttdef"><b>Definition:</b> <a href="Database_8cpp_source.html#l00401">Database.cpp:401</a></div></div>
<div class="ttc" id="aclassField_html"><div class="ttname"><a href="classField.html">Field</a></div><div class="ttdef"><b>Definition:</b> <a href="Field_8h_source.html#l00024">Field.h:25</a></div></div>
<div class="ttc" id="aclassField_html_a757dd8cac1b769fdb82d8a529bad9d5b"><div class="ttname"><a href="classField.html#a757dd8cac1b769fdb82d8a529bad9d5b">Field::GetUInt64</a></div><div class="ttdeci">uint64 GetUInt64() const</div><div class="ttdef"><b>Definition:</b> <a href="Field_8h_source.html#l00060">Field.h:60</a></div></div>
<div class="ttc" id="aclassField_html_ac3fe5bf9cdc61b5be66a4c79598cba5e"><div class="ttname"><a href="classField.html#ac3fe5bf9cdc61b5be66a4c79598cba5e">Field::GetCppString</a></div><div class="ttdeci">std::string GetCppString() const</div><div class="ttdef"><b>Definition:</b> <a href="Field_8h_source.html#l00049">Field.h:49</a></div></div>
<div class="ttc" id="aclassField_html_af71c97fd38da328f4d9590b112f859c4"><div class="ttname"><a href="classField.html#af71c97fd38da328f4d9590b112f859c4">Field::GetUInt32</a></div><div class="ttdeci">uint32 GetUInt32() const</div><div class="ttdef"><b>Definition:</b> <a href="Field_8h_source.html#l00059">Field.h:59</a></div></div>
<div class="ttc" id="aclassField_html_afc9e673b7e6607f5f52bf16c77a73e5e"><div class="ttname"><a href="classField.html#afc9e673b7e6607f5f52bf16c77a73e5e">Field::GetInt32</a></div><div class="ttdeci">int32 GetInt32() const</div><div class="ttdef"><b>Definition:</b> <a href="Field_8h_source.html#l00055">Field.h:55</a></div></div>
<div class="ttc" id="aclassGenericTransport_html"><div class="ttname"><a href="classGenericTransport.html">GenericTransport</a></div><div class="ttdef"><b>Definition:</b> <a href="Transports_8h_source.html#l00030">Transports.h:31</a></div></div>
<div class="ttc" id="aclassItem_html"><div class="ttname"><a href="classItem.html">Item</a></div><div class="ttdef"><b>Definition:</b> <a href="Item_8h_source.html#l00271">Item.h:272</a></div></div>
<div class="ttc" id="aclassMap_html"><div class="ttname"><a href="classMap.html">Map</a></div><div class="ttdef"><b>Definition:</b> <a href="Map_8h_source.html#l00117">Map.h:118</a></div></div>
<div class="ttc" id="aclassMap_html_ac5633c301d59c2214841acab2ffb4269"><div class="ttname"><a href="classMap.html#ac5633c301d59c2214841acab2ffb4269">Map::GetObjectsStore</a></div><div class="ttdeci">MapStoredObjectTypesContainer &amp; GetObjectsStore()</div><div class="ttdef"><b>Definition:</b> <a href="Map_8h_source.html#l00310">Map.h:310</a></div></div>
<div class="ttc" id="aclassMap_html_ae061a2836480ed6702252224d49a19e2"><div class="ttname"><a href="classMap.html#ae061a2836480ed6702252224d49a19e2">Map::GetCurrentClockTime</a></div><div class="ttdeci">TimePoint GetCurrentClockTime() const</div><div class="ttdef"><b>Definition:</b> <a href="Map_8cpp_source.html#l00086">Map.cpp:86</a></div></div>
<div class="ttc" id="aclassMap_html_ae6d148d8a684f0fdb49211fc6524d2d0"><div class="ttname"><a href="classMap.html#ae6d148d8a684f0fdb49211fc6524d2d0">Map::GenerateLocalLowGuid</a></div><div class="ttdeci">uint32 GenerateLocalLowGuid(HighGuid guidhigh)</div><div class="ttdef"><b>Definition:</b> <a href="Map_8cpp_source.html#l02451">Map.cpp:2451</a></div></div>
<div class="ttc" id="aclassMap_html_af928c75fd7374971a2abdc658c89e9d6"><div class="ttname"><a href="classMap.html#af928c75fd7374971a2abdc658c89e9d6">Map::Add</a></div><div class="ttdeci">virtual bool Add(Player *)</div><div class="ttdef"><b>Definition:</b> <a href="Map_8cpp_source.html#l00483">Map.cpp:483</a></div></div>
<div class="ttc" id="aclassMap_html_afe645aa76713224c7e7fcd0f5e12fc79"><div class="ttname"><a href="classMap.html#afe645aa76713224c7e7fcd0f5e12fc79">Map::IsBattleArena</a></div><div class="ttdeci">bool IsBattleArena() const</div><div class="ttdef"><b>Definition:</b> <a href="Map_8h_source.html#l00233">Map.h:233</a></div></div>
<div class="ttc" id="aclassObjectGuid_html"><div class="ttname"><a href="classObjectGuid.html">ObjectGuid</a></div><div class="ttdef"><b>Definition:</b> <a href="ObjectGuid_8h_source.html#l00087">ObjectGuid.h:88</a></div></div>
<div class="ttc" id="aclassObjectGuid_html_a65626f4640cb4f79c66ce9d5dda8ab27"><div class="ttname"><a href="classObjectGuid.html#a65626f4640cb4f79c66ce9d5dda8ab27">ObjectGuid::GetRawValue</a></div><div class="ttdeci">uint64 GetRawValue() const</div><div class="ttdef"><b>Definition:</b> <a href="ObjectGuid_8h_source.html#l00109">ObjectGuid.h:109</a></div></div>
<div class="ttc" id="aclassObjectGuid_html_a66935d98ce09dcb80d05a34b2697496a"><div class="ttname"><a href="classObjectGuid.html#a66935d98ce09dcb80d05a34b2697496a">ObjectGuid::GetCounter</a></div><div class="ttdeci">uint32 GetCounter() const</div><div class="ttdef"><b>Definition:</b> <a href="ObjectGuid_8h_source.html#l00112">ObjectGuid.h:112</a></div></div>
<div class="ttc" id="aclassObjectMgr_html_afc7d19c6dafd93035f5248e5ab0c234b"><div class="ttname"><a href="classObjectMgr.html#afc7d19c6dafd93035f5248e5ab0c234b">ObjectMgr::GetCreatureTemplate</a></div><div class="ttdeci">static CreatureInfo const  * GetCreatureTemplate(uint32 id)</div><div class="ttdoc">Wrapper for sCreatureStorage.LookupEntry.</div><div class="ttdef"><b>Definition:</b> <a href="ObjectMgr_8cpp_source.html#l04539">ObjectMgr.cpp:4539</a></div></div>
<div class="ttc" id="aclassObject_html_a0a29933a2da73d788a130f971511f2f5"><div class="ttname"><a href="classObject.html#a0a29933a2da73d788a130f971511f2f5">Object::SetByteValue</a></div><div class="ttdeci">void SetByteValue(uint16 index, uint8 offset, uint8 value)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8cpp_source.html#l01048">Object.cpp:1048</a></div></div>
<div class="ttc" id="aclassObject_html_a1b9ed00e8d7ac5fed698ef6431905296"><div class="ttname"><a href="classObject.html#a1b9ed00e8d7ac5fed698ef6431905296">Object::IsPlayer</a></div><div class="ttdeci">bool IsPlayer() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00637">Object.h:637</a></div></div>
<div class="ttc" id="aclassObject_html_a4777844356842a389621c1bad1433109"><div class="ttname"><a href="classObject.html#a4777844356842a389621c1bad1433109">Object::GetGUIDLow</a></div><div class="ttdeci">uint32 GetGUIDLow() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00410">Object.h:410</a></div></div>
<div class="ttc" id="aclassObject_html_a5c2f31b9fb0a083ff4caca3de93fac90"><div class="ttname"><a href="classObject.html#a5c2f31b9fb0a083ff4caca3de93fac90">Object::GetGuidStr</a></div><div class="ttdeci">std::string GetGuidStr() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00414">Object.h:414</a></div></div>
<div class="ttc" id="aclassObject_html_a79a7a80acdec46961b4d8aaead4ae631"><div class="ttname"><a href="classObject.html#a79a7a80acdec46961b4d8aaead4ae631">Object::SetFlag</a></div><div class="ttdeci">void SetFlag(uint16 index, uint32 newFlag)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8cpp_source.html#l01134">Object.cpp:1134</a></div></div>
<div class="ttc" id="aclassObject_html_a7e764fbd4b7eca84f80e36e900bca7d3"><div class="ttname"><a href="classObject.html#a7e764fbd4b7eca84f80e36e900bca7d3">Object::RemoveFlag</a></div><div class="ttdeci">void RemoveFlag(uint16 index, uint32 oldFlag)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8cpp_source.html#l01148">Object.cpp:1148</a></div></div>
<div class="ttc" id="aclassObject_html_a7e985367f6a9997544bbc18253f3563d"><div class="ttname"><a href="classObject.html#a7e985367f6a9997544bbc18253f3563d">Object::GetTypeId</a></div><div class="ttdeci">uint8 GetTypeId() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00426">Object.h:426</a></div></div>
<div class="ttc" id="aclassObject_html_a8acb91caf94322dc0289d3e60eb8e0e7"><div class="ttname"><a href="classObject.html#a8acb91caf94322dc0289d3e60eb8e0e7">Object::IsInWorld</a></div><div class="ttdeci">const bool &amp; IsInWorld() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00391">Object.h:391</a></div></div>
<div class="ttc" id="aclassObject_html_aa627fe2967ed0e0ed1d8aeeb4365a961"><div class="ttname"><a href="classObject.html#aa627fe2967ed0e0ed1d8aeeb4365a961">Object::GetEntry</a></div><div class="ttdeci">uint32 GetEntry() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00416">Object.h:416</a></div></div>
<div class="ttc" id="aclassObject_html_ab1221153d59ef17ba4790cec60eaa9bf"><div class="ttname"><a href="classObject.html#ab1221153d59ef17ba4790cec60eaa9bf">Object::SetObjectScale</a></div><div class="ttdeci">void SetObjectScale(float newScale)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8cpp_source.html#l00107">Object.cpp:107</a></div></div>
<div class="ttc" id="aclassObject_html_abc072fa242381b397e4d282e31bcb950"><div class="ttname"><a href="classObject.html#abc072fa242381b397e4d282e31bcb950">Object::SetFloatValue</a></div><div class="ttdeci">void SetFloatValue(uint16 index, float value)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8cpp_source.html#l01036">Object.cpp:1036</a></div></div>
<div class="ttc" id="aclassObject_html_ad837c14c5766b8c13f4a5ce2532b0657"><div class="ttname"><a href="classObject.html#ad837c14c5766b8c13f4a5ce2532b0657">Object::HasByteFlag</a></div><div class="ttdeci">bool HasByteFlag(uint16 index, uint8 offset, uint8 flag) const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00549">Object.h:549</a></div></div>
<div class="ttc" id="aclassObject_html_adc7e9b205f35f9894ec9a4f0ec0871f9"><div class="ttname"><a href="classObject.html#adc7e9b205f35f9894ec9a4f0ec0871f9">Object::SetUInt32Value</a></div><div class="ttdeci">void SetUInt32Value(uint16 index, uint32 value)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8cpp_source.html#l01011">Object.cpp:1011</a></div></div>
<div class="ttc" id="aclassObject_html_adfe424e32fc2aed91e1b0def7149b532"><div class="ttname"><a href="classObject.html#adfe424e32fc2aed91e1b0def7149b532">Object::_Create</a></div><div class="ttdeci">void _Create(uint32 dbGuid, uint32 guidlow, uint32 entry, HighGuid guidhigh)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8cpp_source.html#l00094">Object.cpp:94</a></div></div>
<div class="ttc" id="aclassObject_html_ae7e0c11556aeda48ab347a56b6b7bd6a"><div class="ttname"><a href="classObject.html#ae7e0c11556aeda48ab347a56b6b7bd6a">Object::GetObjectGuid</a></div><div class="ttdeci">ObjectGuid const  &amp; GetObjectGuid() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00409">Object.h:409</a></div></div>
<div class="ttc" id="aclassObject_html_aebc9e7589e372ab99544e474c07609f0"><div class="ttname"><a href="classObject.html#aebc9e7589e372ab99544e474c07609f0">Object::GetUInt32Value</a></div><div class="ttdeci">const uint32 &amp; GetUInt32Value(uint16 index) const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00455">Object.h:455</a></div></div>
<div class="ttc" id="aclassObject_html_afe65b1ab32dbcd51890b754fb8b5e1b0"><div class="ttname"><a href="classObject.html#afe65b1ab32dbcd51890b754fb8b5e1b0">Object::SetByteFlag</a></div><div class="ttdeci">void SetByteFlag(uint16 index, uint8 offset, uint8 newFlag)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8cpp_source.html#l01162">Object.cpp:1162</a></div></div>
<div class="ttc" id="aclassPetAura_html"><div class="ttname"><a href="classPetAura.html">PetAura</a></div><div class="ttdef"><b>Definition:</b> <a href="SpellMgr_8h_source.html#l02600">SpellMgr.h:2601</a></div></div>
<div class="ttc" id="aclassPetAura_html_a6f8318410229a89e0b3aa2af28d6cb2b"><div class="ttname"><a href="classPetAura.html#a6f8318410229a89e0b3aa2af28d6cb2b">PetAura::GetAura</a></div><div class="ttdeci">uint32 GetAura(uint32 petEntry) const</div><div class="ttdef"><b>Definition:</b> <a href="SpellMgr_8h_source.html#l02615">SpellMgr.h:2615</a></div></div>
<div class="ttc" id="aclassPetAura_html_adc1b329e1f303b5ad3f353abb4343cdf"><div class="ttname"><a href="classPetAura.html#adc1b329e1f303b5ad3f353abb4343cdf">PetAura::IsRemovedOnChangePet</a></div><div class="ttdeci">bool IsRemovedOnChangePet() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellMgr_8h_source.html#l02631">SpellMgr.h:2631</a></div></div>
<div class="ttc" id="aclassPet_html"><div class="ttname"><a href="classPet.html">Pet</a></div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00139">Pet.h:140</a></div></div>
<div class="ttc" id="aclassPet_html_a04c9223accb74363902edd455c7b836e"><div class="ttname"><a href="classPet.html#a04c9223accb74363902edd455c7b836e">Pet::LearnPetPassives</a></div><div class="ttdeci">void LearnPetPassives()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02266">Pet.cpp:2266</a></div></div>
<div class="ttc" id="aclassPet_html_a0595dccf2ddfc73bffb69512ca6c79ce"><div class="ttname"><a href="classPet.html#a0595dccf2ddfc73bffb69512ca6c79ce">Pet::m_petType</a></div><div class="ttdeci">PetType m_petType</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00307">Pet.h:307</a></div></div>
<div class="ttc" id="aclassPet_html_a0a2c5bf833c48cace106f9c11c8cc937"><div class="ttname"><a href="classPet.html#a0a2c5bf833c48cace106f9c11c8cc937">Pet::resetTalentsCost</a></div><div class="ttdeci">uint32 resetTalentsCost() const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02135">Pet.cpp:2135</a></div></div>
<div class="ttc" id="aclassPet_html_a0bbb592c195c10bf837b54643755653c"><div class="ttname"><a href="classPet.html#a0bbb592c195c10bf837b54643755653c">Pet::InitCharmInfo</a></div><div class="ttdeci">virtual CharmInfo * InitCharmInfo(Unit *charm) override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02161">Pet.cpp:2161</a></div></div>
<div class="ttc" id="aclassPet_html_a10d8a224dc5726395aa872a6caaf9429"><div class="ttname"><a href="classPet.html#a10d8a224dc5726395aa872a6caaf9429">Pet::RemoveFromWorld</a></div><div class="ttdeci">void RemoveFromWorld() override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00064">Pet.cpp:64</a></div></div>
<div class="ttc" id="aclassPet_html_a1178b67b0ef6bd30ce684ec98d78986f"><div class="ttname"><a href="classPet.html#a1178b67b0ef6bd30ce684ec98d78986f">Pet::GetHappinessState</a></div><div class="ttdeci">HappinessState GetHappinessState() const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00736">Pet.cpp:736</a></div></div>
<div class="ttc" id="aclassPet_html_a1223cf843907fc54e5428e12b3f85de6"><div class="ttname"><a href="classPet.html#a1223cf843907fc54e5428e12b3f85de6">Pet::m_loading</a></div><div class="ttdeci">bool m_loading</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00309">Pet.h:309</a></div></div>
<div class="ttc" id="aclassPet_html_a13f56cb7da4abfd020929741d21628dd"><div class="ttname"><a href="classPet.html#a13f56cb7da4abfd020929741d21628dd">Pet::PlayDismissSound</a></div><div class="ttdeci">void PlayDismissSound()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01262">Pet.cpp:1262</a></div></div>
<div class="ttc" id="aclassPet_html_a14dac45e5b46ed30df4713f98a69bece"><div class="ttname"><a href="classPet.html#a14dac45e5b46ed30df4713f98a69bece">Pet::HaveInDiet</a></div><div class="ttdeci">bool HaveInDiet(ItemPrototype const *item) const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01289">Pet.cpp:1289</a></div></div>
<div class="ttc" id="aclassPet_html_a1730d31831f1e7077fb2ea5579eb95c1"><div class="ttname"><a href="classPet.html#a1730d31831f1e7077fb2ea5579eb95c1">Pet::GetPetSpawnPosition</a></div><div class="ttdeci">static Position GetPetSpawnPosition(Unit *owner)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00535">Pet.cpp:535</a></div></div>
<div class="ttc" id="aclassPet_html_a1b5f3fb677def2f7e7140f723e56301b"><div class="ttname"><a href="classPet.html#a1b5f3fb677def2f7e7140f723e56301b">Pet::m_saveAutocast</a></div><div class="ttdeci">bool m_saveAutocast</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00320">Pet.h:320</a></div></div>
<div class="ttc" id="aclassPet_html_a1edc00f967f14289223affb9e3c35d2d"><div class="ttname"><a href="classPet.html#a1edc00f967f14289223affb9e3c35d2d">Pet::ToggleAutocast</a></div><div class="ttdeci">void ToggleAutocast(uint32 spellid, bool apply)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02181">Pet.cpp:2181</a></div></div>
<div class="ttc" id="aclassPet_html_a20709cab46c2146092bce7aff49807b4"><div class="ttname"><a href="classPet.html#a20709cab46c2146092bce7aff49807b4">Pet::Unsummon</a></div><div class="ttdeci">void Unsummon(PetSaveMode mode, Unit *owner=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00784">Pet.cpp:784</a></div></div>
<div class="ttc" id="aclassPet_html_a211a1e0df229610952fbec24c9d3240b"><div class="ttname"><a href="classPet.html#a211a1e0df229610952fbec24c9d3240b">Pet::unlearnSpell</a></div><div class="ttdeci">bool unlearnSpell(uint32 spell_id, bool learn_prev, bool clear_ab=true)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01854">Pet.cpp:1854</a></div></div>
<div class="ttc" id="aclassPet_html_a245b16b47d16108f7871c482bb36db8b"><div class="ttname"><a href="classPet.html#a245b16b47d16108f7871c482bb36db8b">Pet::m_declinedname</a></div><div class="ttdeci">DeclinedName * m_declinedname</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00311">Pet.h:311</a></div></div>
<div class="ttc" id="aclassPet_html_a26f3b5f2bbf67ed3fbe5bb43d01cc8c1"><div class="ttname"><a href="classPet.html#a26f3b5f2bbf67ed3fbe5bb43d01cc8c1">Pet::GetCharmSpells</a></div><div class="ttdeci">std::vector&lt; uint32 &gt; GetCharmSpells() const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02508">Pet.cpp:2508</a></div></div>
<div class="ttc" id="aclassPet_html_a27147bde866e6f2382799a6d2e84b363"><div class="ttname"><a href="classPet.html#a27147bde866e6f2382799a6d2e84b363">Pet::_LoadAuras</a></div><div class="ttdeci">void _LoadAuras(uint32 timediff)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01489">Pet.cpp:1489</a></div></div>
<div class="ttc" id="aclassPet_html_a281cffe87c86627350f05a3aa15b4aff"><div class="ttname"><a href="classPet.html#a281cffe87c86627350f05a3aa15b4aff">Pet::addSpell</a></div><div class="ttdeci">bool addSpell(uint32 spell_id, ActiveStates active=ACT_DECIDE, PetSpellState state=PETSPELL_NEW, PetSpellType type=PETSPELL_NORMAL)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01673">Pet.cpp:1673</a></div></div>
<div class="ttc" id="aclassPet_html_a289e06779baced17e3788b0b7ee3debc"><div class="ttname"><a href="classPet.html#a289e06779baced17e3788b0b7ee3debc">Pet::InitPetScalingAuras</a></div><div class="ttdeci">void InitPetScalingAuras()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01211">Pet.cpp:1211</a></div></div>
<div class="ttc" id="aclassPet_html_a29db51ddfb19ca7fe27815b9cbe11f9f"><div class="ttname"><a href="classPet.html#a29db51ddfb19ca7fe27815b9cbe11f9f">Pet::m_usedTalentCount</a></div><div class="ttdeci">uint32 m_usedTalentCount</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00264">Pet.h:264</a></div></div>
<div class="ttc" id="aclassPet_html_a326d28211e89bd89834e3c920e8bda52"><div class="ttname"><a href="classPet.html#a326d28211e89bd89834e3c920e8bda52">Pet::LooseHappiness</a></div><div class="ttdeci">void LooseHappiness()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00725">Pet.cpp:725</a></div></div>
<div class="ttc" id="aclassPet_html_a33ad9f84219eb2b2114c4a57e9827d37"><div class="ttname"><a href="classPet.html#a33ad9f84219eb2b2114c4a57e9827d37">Pet::IsGuardian</a></div><div class="ttdeci">bool IsGuardian() const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00152">Pet.h:152</a></div></div>
<div class="ttc" id="aclassPet_html_a3a943da60262e2fef6046828ee560963"><div class="ttname"><a href="classPet.html#a3a943da60262e2fef6046828ee560963">Pet::DeleteCharmInfo</a></div><div class="ttdeci">virtual void DeleteCharmInfo() override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02171">Pet.cpp:2171</a></div></div>
<div class="ttc" id="aclassPet_html_a3b49f5373cea8b7536f5cf0db8cb4ae8"><div class="ttname"><a href="classPet.html#a3b49f5373cea8b7536f5cf0db8cb4ae8">Pet::ForcedDespawn</a></div><div class="ttdeci">void ForcedDespawn(uint32 timeMSToDespawn=0, bool onlyAlive=false) override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02451">Pet.cpp:2451</a></div></div>
<div class="ttc" id="aclassPet_html_a3c2dcf8c9e0f9a836cc678a9479ebb64"><div class="ttname"><a href="classPet.html#a3c2dcf8c9e0f9a836cc678a9479ebb64">Pet::SetDeathState</a></div><div class="ttdeci">void SetDeathState(DeathState s) override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00610">Pet.cpp:610</a></div></div>
<div class="ttc" id="aclassPet_html_a3c482ec7706059ac839d59cb54431671"><div class="ttname"><a href="classPet.html#a3c482ec7706059ac839d59cb54431671">Pet::AddToWorld</a></div><div class="ttdeci">void AddToWorld() override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00050">Pet.cpp:50</a></div></div>
<div class="ttc" id="aclassPet_html_a3cbd2b762d3181631799fec78c4f54ed"><div class="ttname"><a href="classPet.html#a3cbd2b762d3181631799fec78c4f54ed">Pet::_LoadSpellCooldowns</a></div><div class="ttdeci">void _LoadSpellCooldowns()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01323">Pet.cpp:1323</a></div></div>
<div class="ttc" id="aclassPet_html_a3f8ed80e6e090b493ffdf95b4b7b6e6d"><div class="ttname"><a href="classPet.html#a3f8ed80e6e090b493ffdf95b4b7b6e6d">Pet::_SaveSpells</a></div><div class="ttdeci">void _SaveSpells()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01429">Pet.cpp:1429</a></div></div>
<div class="ttc" id="aclassPet_html_a42cf6a2fc2dc5882396db1fc06fb6edc"><div class="ttname"><a href="classPet.html#a42cf6a2fc2dc5882396db1fc06fb6edc">Pet::Create</a></div><div class="ttdeci">bool Create(uint32 guidlow, CreatureCreatePos &amp;cPos, CreatureInfo const *cinfo, uint32 pet_number)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02227">Pet.cpp:2227</a></div></div>
<div class="ttc" id="aclassPet_html_a43a35bdd7f233f6ae5233ad55f30c641"><div class="ttname"><a href="classPet.html#a43a35bdd7f233f6ae5233ad55f30c641">Pet::InitTalentForLevel</a></div><div class="ttdeci">void InitTalentForLevel()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02123">Pet.cpp:2123</a></div></div>
<div class="ttc" id="aclassPet_html_a462dc421828060d0478ca6a3ae0a2a57"><div class="ttname"><a href="classPet.html#a462dc421828060d0478ca6a3ae0a2a57">Pet::CastPetAuras</a></div><div class="ttdeci">void CastPetAuras(bool current)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02284">Pet.cpp:2284</a></div></div>
<div class="ttc" id="aclassPet_html_a499659ccc6308ac8353080d13aad99c8"><div class="ttname"><a href="classPet.html#a499659ccc6308ac8353080d13aad99c8">Pet::setPetType</a></div><div class="ttdeci">void setPetType(PetType type)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00149">Pet.h:149</a></div></div>
<div class="ttc" id="aclassPet_html_a4b77f76c28bd1db9e207731b80e735a8"><div class="ttname"><a href="classPet.html#a4b77f76c28bd1db9e207731b80e735a8">Pet::UpdateFreeTalentPoints</a></div><div class="ttdeci">void UpdateFreeTalentPoints(bool resetIfNeed=true)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02100">Pet.cpp:2100</a></div></div>
<div class="ttc" id="aclassPet_html_a4f7462b8b062cb5b842244b527517fe7"><div class="ttname"><a href="classPet.html#a4f7462b8b062cb5b842244b527517fe7">Pet::getPetType</a></div><div class="ttdeci">PetType getPetType() const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00148">Pet.h:148</a></div></div>
<div class="ttc" id="aclassPet_html_a5145a4c56ba7cfc46ade361b386ae2ec"><div class="ttname"><a href="classPet.html#a5145a4c56ba7cfc46ade361b386ae2ec">Pet::InitializeSpellsForControllableGuardian</a></div><div class="ttdeci">void InitializeSpellsForControllableGuardian(bool load)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02472">Pet.cpp:2472</a></div></div>
<div class="ttc" id="aclassPet_html_a52ba391e71d4687347522e18fa845719"><div class="ttname"><a href="classPet.html#a52ba391e71d4687347522e18fa845719">Pet::SetModeFlags</a></div><div class="ttdeci">void SetModeFlags(PetModeFlags mode)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02389">Pet.cpp:2389</a></div></div>
<div class="ttc" id="aclassPet_html_a5318c4fc909c15b4ac3ed440f8ad5f2b"><div class="ttname"><a href="classPet.html#a5318c4fc909c15b4ac3ed440f8ad5f2b">Pet::SynchronizeLevelWithOwner</a></div><div class="ttdeci">void SynchronizeLevelWithOwner()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02365">Pet.cpp:2365</a></div></div>
<div class="ttc" id="aclassPet_html_a57219fd6c392f0dd5658708c01e4bc18"><div class="ttname"><a href="classPet.html#a57219fd6c392f0dd5658708c01e4bc18">Pet::_SaveSpellCooldowns</a></div><div class="ttdeci">void _SaveSpellCooldowns()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01380">Pet.cpp:1380</a></div></div>
<div class="ttc" id="aclassPet_html_a59fc53c82202f6be549e26d9d109f694"><div class="ttname"><a href="classPet.html#a59fc53c82202f6be549e26d9d109f694">Pet::IsSaveAutoCast</a></div><div class="ttdeci">bool IsSaveAutoCast() const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00299">Pet.h:299</a></div></div>
<div class="ttc" id="aclassPet_html_a60687b22fb22eae52e1a286134bd5fe5"><div class="ttname"><a href="classPet.html#a60687b22fb22eae52e1a286134bd5fe5">Pet::_SaveAuras</a></div><div class="ttdeci">void _SaveAuras()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01586">Pet.cpp:1586</a></div></div>
<div class="ttc" id="aclassPet_html_a641fba5945a2462c733fc98da6e4fee2"><div class="ttname"><a href="classPet.html#a641fba5945a2462c733fc98da6e4fee2">Pet::learnSpellHighRank</a></div><div class="ttdeci">void learnSpellHighRank(uint32 spellid)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02357">Pet.cpp:2357</a></div></div>
<div class="ttc" id="aclassPet_html_a6921309da1d6a20be19b48f04b4558bf"><div class="ttname"><a href="classPet.html#a6921309da1d6a20be19b48f04b4558bf">Pet::resetTalents</a></div><div class="ttdeci">bool resetTalents(bool no_cost=false)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01944">Pet.cpp:1944</a></div></div>
<div class="ttc" id="aclassPet_html_a6f8877f9c7bea7d6ca57e1b1a1605e65"><div class="ttname"><a href="classPet.html#a6f8877f9c7bea7d6ca57e1b1a1605e65">Pet::IgnoresOwnersDeath</a></div><div class="ttdeci">bool IgnoresOwnersDeath() const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02492">Pet.cpp:2492</a></div></div>
<div class="ttc" id="aclassPet_html_a6fc6d5dd4545496a07c8294c0122bc31"><div class="ttname"><a href="classPet.html#a6fc6d5dd4545496a07c8294c0122bc31">Pet::_LoadGuardianPetNumber</a></div><div class="ttdeci">bool _LoadGuardianPetNumber()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01474">Pet.cpp:1474</a></div></div>
<div class="ttc" id="aclassPet_html_a7018de24620b6982be4a4cc7f7cf889a"><div class="ttname"><a href="classPet.html#a7018de24620b6982be4a4cc7f7cf889a">Pet::m_autospells</a></div><div class="ttdeci">AutoSpellList m_autospells</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00245">Pet.h:245</a></div></div>
<div class="ttc" id="aclassPet_html_a707f2c992ddc77ba6b2aebd08fd31104"><div class="ttname"><a href="classPet.html#a707f2c992ddc77ba6b2aebd08fd31104">Pet::_LoadSpells</a></div><div class="ttdeci">bool _LoadSpells()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01409">Pet.cpp:1409</a></div></div>
<div class="ttc" id="aclassPet_html_a7615c24d34c9dd55d15719fc50eba498"><div class="ttname"><a href="classPet.html#a7615c24d34c9dd55d15719fc50eba498">Pet::SavePetToDB</a></div><div class="ttdeci">void SavePetToDB(PetSaveMode mode, Player *owner)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00414">Pet.cpp:414</a></div></div>
<div class="ttc" id="aclassPet_html_a7ece3cdc2e0cb85900c7de101689697d"><div class="ttname"><a href="classPet.html#a7ece3cdc2e0cb85900c7de101689697d">Pet::m_happinessTimer</a></div><div class="ttdeci">uint32 m_happinessTimer</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00306">Pet.h:306</a></div></div>
<div class="ttc" id="aclassPet_html_a83bec8aa36224306974de205d77c2872"><div class="ttname"><a href="classPet.html#a83bec8aa36224306974de205d77c2872">Pet::m_controllableGuardian</a></div><div class="ttdeci">bool m_controllableGuardian</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00318">Pet.h:318</a></div></div>
<div class="ttc" id="aclassPet_html_a85eef417a0d793d5c087fcc7d818dd46"><div class="ttname"><a href="classPet.html#a85eef417a0d793d5c087fcc7d818dd46">Pet::LoadPetFromDB</a></div><div class="ttdeci">bool LoadPetFromDB(Player *owner, Position const &amp;spawnPos, uint32 petentry=0, uint32 petnumber=0, bool current=false, uint32 healthPercentage=0, bool permanentOnly=false, bool forced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00144">Pet.cpp:144</a></div></div>
<div class="ttc" id="aclassPet_html_a8b746e4d29e8c0b9f1ed2d7b3be2c0f7"><div class="ttname"><a href="classPet.html#a8b746e4d29e8c0b9f1ed2d7b3be2c0f7">Pet::removeSpell</a></div><div class="ttdeci">bool removeSpell(uint32 spell_id, bool learn_prev, bool clear_ab=true)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01875">Pet.cpp:1875</a></div></div>
<div class="ttc" id="aclassPet_html_a8ed323b81d6c9692ab2455d14e9e640e"><div class="ttname"><a href="classPet.html#a8ed323b81d6c9692ab2455d14e9e640e">Pet::CreateBaseAtCreature</a></div><div class="ttdeci">bool CreateBaseAtCreature(Creature *creature)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00943">Pet.cpp:943</a></div></div>
<div class="ttc" id="aclassPet_html_a8f56752c756a9a41e647e03712b9466b"><div class="ttname"><a href="classPet.html#a8f56752c756a9a41e647e03712b9466b">Pet::CleanupActionBar</a></div><div class="ttdeci">void CleanupActionBar()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01925">Pet.cpp:1925</a></div></div>
<div class="ttc" id="aclassPet_html_a92463c5ce83b9c8f0a74ccd685a86078"><div class="ttname"><a href="classPet.html#a92463c5ce83b9c8f0a74ccd685a86078">Pet::isTemporarySummoned</a></div><div class="ttdeci">bool isTemporarySummoned() const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00151">Pet.h:151</a></div></div>
<div class="ttc" id="aclassPet_html_a94a46240ffd80d7124918bb979f3c46d"><div class="ttname"><a href="classPet.html#a94a46240ffd80d7124918bb979f3c46d">Pet::CastPetAura</a></div><div class="ttdeci">void CastPetAura(PetAura const *aura)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02341">Pet.cpp:2341</a></div></div>
<div class="ttc" id="aclassPet_html_a97378444983f0395005ce68ff5918b11"><div class="ttname"><a href="classPet.html#a97378444983f0395005ce68ff5918b11">Pet::m_originalCharminfo</a></div><div class="ttdeci">CharmInfo * m_originalCharminfo</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00315">Pet.h:315</a></div></div>
<div class="ttc" id="aclassPet_html_a9d623f0127c82864f885e09a9ddd2eb8"><div class="ttname"><a href="classPet.html#a9d623f0127c82864f885e09a9ddd2eb8">Pet::isControlled</a></div><div class="ttdeci">bool isControlled() const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00150">Pet.h:150</a></div></div>
<div class="ttc" id="aclassPet_html_a9fa5f385134015a3438ad7f5e6cba704"><div class="ttname"><a href="classPet.html#a9fa5f385134015a3438ad7f5e6cba704">Pet::ResetCorpseRespawn</a></div><div class="ttdeci">void ResetCorpseRespawn()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02446">Pet.cpp:2446</a></div></div>
<div class="ttc" id="aclassPet_html_a9fa6b4dc1e14acf60ac9d4abd8fd8f31"><div class="ttname"><a href="classPet.html#a9fa6b4dc1e14acf60ac9d4abd8fd8f31">Pet::m_resetTalentsTime</a></div><div class="ttdeci">time_t m_resetTalentsTime</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00263">Pet.h:263</a></div></div>
<div class="ttc" id="aclassPet_html_aa1062aacaca2534925d60e56f05139cf"><div class="ttname"><a href="classPet.html#aa1062aacaca2534925d60e56f05139cf">Pet::GetMaxTalentPointsForLevel</a></div><div class="ttdeci">uint8 GetMaxTalentPointsForLevel(uint32 level) const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02152">Pet.cpp:2152</a></div></div>
<div class="ttc" id="aclassPet_html_aa140e5fe151461ac6943c748d6de44fd"><div class="ttname"><a href="classPet.html#aa140e5fe151461ac6943c748d6de44fd">Pet::Update</a></div><div class="ttdeci">void Update(const uint32 diff) override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00643">Pet.cpp:643</a></div></div>
<div class="ttc" id="aclassPet_html_aa4ec4b6b3b4dccd3cbed246f77aab372"><div class="ttname"><a href="classPet.html#aa4ec4b6b3b4dccd3cbed246f77aab372">Pet::~Pet</a></div><div class="ttdeci">virtual ~Pet()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00044">Pet.cpp:44</a></div></div>
<div class="ttc" id="aclassPet_html_aa630a19bfa429ccf53e5d89d521bc0c5"><div class="ttname"><a href="classPet.html#aa630a19bfa429ccf53e5d89d521bc0c5">Pet::CastOwnerTalentAuras</a></div><div class="ttdeci">void CastOwnerTalentAuras()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02303">Pet.cpp:2303</a></div></div>
<div class="ttc" id="aclassPet_html_aaa0288323bfc9d12566ec9188d5f7632"><div class="ttname"><a href="classPet.html#aaa0288323bfc9d12566ec9188d5f7632">Pet::InitStatsForLevel</a></div><div class="ttdeci">void InitStatsForLevel(uint32 petlevel)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00997">Pet.cpp:997</a></div></div>
<div class="ttc" id="aclassPet_html_aaac68db137c1dd9b03527cfd84b9b8b1"><div class="ttname"><a href="classPet.html#aaac68db137c1dd9b03527cfd84b9b8b1">Pet::m_removed</a></div><div class="ttdeci">bool m_removed</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00271">Pet.h:271</a></div></div>
<div class="ttc" id="aclassPet_html_aaccd1b242377432d3b3c79909a2d8ef4"><div class="ttname"><a href="classPet.html#aaccd1b242377432d3b3c79909a2d8ef4">Pet::SetFreeTalentPoints</a></div><div class="ttdeci">void SetFreeTalentPoints(uint8 points)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00259">Pet.h:259</a></div></div>
<div class="ttc" id="aclassPet_html_ab1abe749d93699ce7b7fba55403796c1"><div class="ttname"><a href="classPet.html#ab1abe749d93699ce7b7fba55403796c1">Pet::resetTalentsForAllPetsOf</a></div><div class="ttdeci">static void resetTalentsForAllPetsOf(Player *owner, Pet *online_pet=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02016">Pet.cpp:2016</a></div></div>
<div class="ttc" id="aclassPet_html_ab25d770bb5fd81698918ac82b406afa5"><div class="ttname"><a href="classPet.html#ab25d770bb5fd81698918ac82b406afa5">Pet::m_resetTalentsCost</a></div><div class="ttdeci">uint32 m_resetTalentsCost</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00262">Pet.h:262</a></div></div>
<div class="ttc" id="aclassPet_html_ab7e0ce91f6cf5e070ce384a889c02edd"><div class="ttname"><a href="classPet.html#ab7e0ce91f6cf5e070ce384a889c02edd">Pet::RegenerateAll</a></div><div class="ttdeci">void RegenerateAll(uint32 update_diff) override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00700">Pet.cpp:700</a></div></div>
<div class="ttc" id="aclassPet_html_ac3a690118e54c22a407664e3a1db8317"><div class="ttname"><a href="classPet.html#ac3a690118e54c22a407664e3a1db8317">Pet::Pet</a></div><div class="ttdeci">Pet(PetType type=MAX_PET_TYPE)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00030">Pet.cpp:30</a></div></div>
<div class="ttc" id="aclassPet_html_ac5f8f3be4ef227b63bbd0c8d32aad5ac"><div class="ttname"><a href="classPet.html#ac5f8f3be4ef227b63bbd0c8d32aad5ac">Pet::RegenerateHealth</a></div><div class="ttdeci">virtual void RegenerateHealth() override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02403">Pet.cpp:2403</a></div></div>
<div class="ttc" id="aclassPet_html_ac6c70dc906ba28d1bc991fdf9a79225f"><div class="ttname"><a href="classPet.html#ac6c70dc906ba28d1bc991fdf9a79225f">Pet::InitPetCreateSpells</a></div><div class="ttdeci">void InitPetCreateSpells()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01934">Pet.cpp:1934</a></div></div>
<div class="ttc" id="aclassPet_html_ac7fbb6ab06f140e8843b0a8af83229e0"><div class="ttname"><a href="classPet.html#ac7fbb6ab06f140e8843b0a8af83229e0">Pet::HasSpell</a></div><div class="ttdeci">bool HasSpell(uint32 spell) const override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02256">Pet.cpp:2256</a></div></div>
<div class="ttc" id="aclassPet_html_acca9c8377e6b78b164eccadea41af960"><div class="ttname"><a href="classPet.html#acca9c8377e6b78b164eccadea41af960">Pet::UpdateAllStats</a></div><div class="ttdeci">bool UpdateAllStats() override</div><div class="ttdef"><b>Definition:</b> <a href="StatSystem_8cpp_source.html#l01013">StatSystem.cpp:1013</a></div></div>
<div class="ttc" id="aclassPet_html_ad43b86352ec61b8483e60e442e0a6e3b"><div class="ttname"><a href="classPet.html#ad43b86352ec61b8483e60e442e0a6e3b">Pet::CanTakeMoreActiveSpells</a></div><div class="ttdeci">bool CanTakeMoreActiveSpells(uint32 spellid)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00745">Pet.cpp:745</a></div></div>
<div class="ttc" id="aclassPet_html_ad5eaac78f6eace6db0d40d2f388c90f5"><div class="ttname"><a href="classPet.html#ad5eaac78f6eace6db0d40d2f388c90f5">Pet::GetCurrentFoodBenefitLevel</a></div><div class="ttdeci">uint32 GetCurrentFoodBenefitLevel(uint32 itemlevel) const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01307">Pet.cpp:1307</a></div></div>
<div class="ttc" id="aclassPet_html_ad6377c04c998de15a297bc42bc7b0456"><div class="ttname"><a href="classPet.html#ad6377c04c998de15a297bc42bc7b0456">Pet::m_petModeFlags</a></div><div class="ttdeci">PetModeFlags m_petModeFlags</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00314">Pet.h:314</a></div></div>
<div class="ttc" id="aclassPet_html_adaa0dcce5c4945bbb929f88baa687f32"><div class="ttname"><a href="classPet.html#adaa0dcce5c4945bbb929f88baa687f32">Pet::IsControllableGuardian</a></div><div class="ttdeci">bool IsControllableGuardian() const</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00293">Pet.h:293</a></div></div>
<div class="ttc" id="aclassPet_html_ae7a38fa1c07c594775ef7b28e61f0475"><div class="ttname"><a href="classPet.html#ae7a38fa1c07c594775ef7b28e61f0475">Pet::GivePetLevel</a></div><div class="ttdeci">void GivePetLevel(uint32 level)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00927">Pet.cpp:927</a></div></div>
<div class="ttc" id="aclassPet_html_ae8456efad9fd499fceed997fbcb72cb8"><div class="ttname"><a href="classPet.html#ae8456efad9fd499fceed997fbcb72cb8">Pet::m_spells</a></div><div class="ttdeci">PetSpellMap m_spells</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00244">Pet.h:244</a></div></div>
<div class="ttc" id="aclassPet_html_ae9f6f4b4936dc8c0470bfb5af8625632"><div class="ttname"><a href="classPet.html#ae9f6f4b4936dc8c0470bfb5af8625632">Pet::DeleteFromDB</a></div><div class="ttdeci">void DeleteFromDB() override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00326">Pet.h:326</a></div></div>
<div class="ttc" id="aclassPet_html_aeab60e66f36c220af88496a43b8270cf"><div class="ttname"><a href="classPet.html#aeab60e66f36c220af88496a43b8270cf">Pet::GetSpellModOwner</a></div><div class="ttdeci">Player * GetSpellModOwner() const override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00602">Pet.cpp:602</a></div></div>
<div class="ttc" id="aclassPet_html_af2290a3c05bee3e31937f3bcfe3de603"><div class="ttname"><a href="classPet.html#af2290a3c05bee3e31937f3bcfe3de603">Pet::GivePetXP</a></div><div class="ttdeci">void GivePetXP(uint32 xp)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00889">Pet.cpp:889</a></div></div>
<div class="ttc" id="aclassPet_html_af641ae2d7d873000862ac953f850d068"><div class="ttname"><a href="classPet.html#af641ae2d7d873000862ac953f850d068">Pet::learnSpell</a></div><div class="ttdeci">bool learnSpell(uint32 spell_id)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01794">Pet.cpp:1794</a></div></div>
<div class="ttc" id="aclassPet_html_afa01db5646d3731545cae58b41f551e1"><div class="ttname"><a href="classPet.html#afa01db5646d3731545cae58b41f551e1">Pet::AI</a></div><div class="ttdeci">virtual UnitAI * AI() override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00274">Pet.h:274</a></div></div>
<div class="ttc" id="aclassPet_html_afb2bcf12c0a0167c38e649bf52562f4b"><div class="ttname"><a href="classPet.html#afb2bcf12c0a0167c38e649bf52562f4b">Pet::SetOwnerGuid</a></div><div class="ttdeci">void SetOwnerGuid(ObjectGuid owner) override</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00587">Pet.cpp:587</a></div></div>
<div class="ttc" id="aclassPet_html_afdfa009d077666e72f7c26bd4240c0c9"><div class="ttname"><a href="classPet.html#afdfa009d077666e72f7c26bd4240c0c9">Pet::m_duration</a></div><div class="ttdeci">int32 m_duration</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00308">Pet.h:308</a></div></div>
<div class="ttc" id="aclassPet_html_afeb6b4e172c202a327ae853c132a1247"><div class="ttname"><a href="classPet.html#afeb6b4e172c202a327ae853c132a1247">Pet::InitLevelupSpellsForLevel</a></div><div class="ttdeci">void InitLevelupSpellsForLevel()</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l01815">Pet.cpp:1815</a></div></div>
<div class="ttc" id="aclassPet_html_aff5ffb9a757e225ce15e00e718a335d9"><div class="ttname"><a href="classPet.html#aff5ffb9a757e225ce15e00e718a335d9">Pet::TryLoadFromDB</a></div><div class="ttdeci">static SpellCastResult TryLoadFromDB(Unit *owner, uint32 petentry=0, uint32 petnumber=0, bool current=false, PetType mandatoryPetType=MAX_PET_TYPE)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l00074">Pet.cpp:74</a></div></div>
<div class="ttc" id="aclassPlayer_html"><div class="ttname"><a href="classPlayer.html">Player</a></div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l01063">Player.h:1064</a></div></div>
<div class="ttc" id="aclassPlayer_html_a134bcbd463d0048b59372a89f6c455af"><div class="ttname"><a href="classPlayer.html#a134bcbd463d0048b59372a89f6c455af">Player::SendTalentsInfoData</a></div><div class="ttdeci">void SendTalentsInfoData(bool pet)</div><div class="ttdef"><b>Definition:</b> <a href="Player_8cpp_source.html#l23928">Player.cpp:23928</a></div></div>
<div class="ttc" id="aclassPlayer_html_a17e3e6c3a84039d2b8717488bb433250"><div class="ttname"><a href="classPlayer.html#a17e3e6c3a84039d2b8717488bb433250">Player::RemovePetActionBar</a></div><div class="ttdeci">void RemovePetActionBar() const</div><div class="ttdef"><b>Definition:</b> <a href="Player_8cpp_source.html#l19526">Player.cpp:19526</a></div></div>
<div class="ttc" id="aclassPlayer_html_a1c3b22d45412cd870f86da240271ea83"><div class="ttname"><a href="classPlayer.html#a1c3b22d45412cd870f86da240271ea83">Player::GetKnownTalentRankById</a></div><div class="ttdeci">SpellEntry const  * GetKnownTalentRankById(int32 talentId) const</div><div class="ttdef"><b>Definition:</b> <a href="Player_8cpp_source.html#l23454">Player.cpp:23454</a></div></div>
<div class="ttc" id="aclassPlayer_html_a238a1c1e97cad7d27a5a9f0a0807180e"><div class="ttname"><a href="classPlayer.html#a238a1c1e97cad7d27a5a9f0a0807180e">Player::SetGroupUpdateFlag</a></div><div class="ttdeci">void SetGroupUpdateFlag(uint32 flag)</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l02450">Player.h:2450</a></div></div>
<div class="ttc" id="aclassPlayer_html_a246517a0bb1f6fcc04c9fb9060586676"><div class="ttname"><a href="classPlayer.html#a246517a0bb1f6fcc04c9fb9060586676">Player::GetTemporaryUnsummonedPetNumber</a></div><div class="ttdeci">uint32 GetTemporaryUnsummonedPetNumber() const</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l02395">Player.h:2395</a></div></div>
<div class="ttc" id="aclassPlayer_html_a2569de77e6064b4657b080bf7451defb"><div class="ttname"><a href="classPlayer.html#a2569de77e6064b4657b080bf7451defb">Player::SendBuyError</a></div><div class="ttdeci">void SendBuyError(BuyResult msg, Creature *pCreature, uint32 item, uint32 param) const</div><div class="ttdef"><b>Definition:</b> <a href="Player_8cpp_source.html#l12688">Player.cpp:12688</a></div></div>
<div class="ttc" id="aclassPlayer_html_a37acea1f67951ec8b125cae412ddbe4e"><div class="ttname"><a href="classPlayer.html#a37acea1f67951ec8b125cae412ddbe4e">Player::CanTameExoticPets</a></div><div class="ttdeci">bool CanTameExoticPets() const</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l02106">Player.h:2106</a></div></div>
<div class="ttc" id="aclassPlayer_html_a3a38363caa530e01a47e2414acc38711"><div class="ttname"><a href="classPlayer.html#a3a38363caa530e01a47e2414acc38711">Player::SetTemporaryUnsummonedPetNumber</a></div><div class="ttdeci">void SetTemporaryUnsummonedPetNumber(uint32 petnumber)</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l02396">Player.h:2396</a></div></div>
<div class="ttc" id="aclassPlayer_html_a3acf7eadb0ec1ae686858ea11ee87302"><div class="ttname"><a href="classPlayer.html#a3acf7eadb0ec1ae686858ea11ee87302">Player::GetGroup</a></div><div class="ttdeci">Group * GetGroup()</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l02444">Player.h:2444</a></div></div>
<div class="ttc" id="aclassPlayer_html_a4aae79469ff88509ac84269d17dd66b7"><div class="ttname"><a href="classPlayer.html#a4aae79469ff88509ac84269d17dd66b7">Player::SendNewItem</a></div><div class="ttdeci">void SendNewItem(Item *item, uint32 count, bool received, bool created, bool broadcast=false, bool showInChat=true)</div><div class="ttdef"><b>Definition:</b> <a href="Player_8cpp_source.html#l13263">Player.cpp:13263</a></div></div>
<div class="ttc" id="aclassPlayer_html_a500fcf236fa76f67ad0e7f164db523bf"><div class="ttname"><a href="classPlayer.html#a500fcf236fa76f67ad0e7f164db523bf">Player::SetBGPetSpell</a></div><div class="ttdeci">void SetBGPetSpell(uint32 petSpell)</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l02402">Player.h:2402</a></div></div>
<div class="ttc" id="aclassPlayer_html_a7582cf98152936e05877bcbb1f7607e1"><div class="ttname"><a href="classPlayer.html#a7582cf98152936e05877bcbb1f7607e1">Player::IsPetNeedBeTemporaryUnsummoned</a></div><div class="ttdeci">bool IsPetNeedBeTemporaryUnsummoned(Pet *pet) const</div><div class="ttdef"><b>Definition:</b> <a href="Player_8cpp_source.html#l23728">Player.cpp:23728</a></div></div>
<div class="ttc" id="aclassPlayer_html_aa5ecbc83f83472a98aac1cff3497e806"><div class="ttname"><a href="classPlayer.html#aa5ecbc83f83472a98aac1cff3497e806">Player::GetMoney</a></div><div class="ttdeci">uint32 GetMoney() const</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l01615">Player.h:1615</a></div></div>
<div class="ttc" id="aclassPlayer_html_ab2eee9d5a0dcc1bf22d0d3e1d9db3f44"><div class="ttname"><a href="classPlayer.html#ab2eee9d5a0dcc1bf22d0d3e1d9db3f44">Player::ModifyMoney</a></div><div class="ttdeci">void ModifyMoney(int32 d)</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l01616">Player.h:1616</a></div></div>
<div class="ttc" id="aclassPlayer_html_ab8ca1acd2144026883cf27f5ebd900b8"><div class="ttname"><a href="classPlayer.html#ab8ca1acd2144026883cf27f5ebd900b8">Player::InBattleGround</a></div><div class="ttdeci">bool InBattleGround() const</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l02166">Player.h:2166</a></div></div>
<div class="ttc" id="aclassPlayer_html_abee0486768b6758f76a7a0052863d0ea"><div class="ttname"><a href="classPlayer.html#abee0486768b6758f76a7a0052863d0ea">Player::StoreNewItem</a></div><div class="ttdeci">Item * StoreNewItem(ItemPosCountVec const &amp;dest, uint32 item, bool update, int32 randomPropertyId=0)</div><div class="ttdef"><b>Definition:</b> <a href="Player_8cpp_source.html#l11337">Player.cpp:11337</a></div></div>
<div class="ttc" id="aclassPlayer_html_ae5979ac44c9da24ecab41e210f01eeb0"><div class="ttname"><a href="classPlayer.html#ae5979ac44c9da24ecab41e210f01eeb0">Player::PetSpellInitialize</a></div><div class="ttdeci">void PetSpellInitialize() const</div><div class="ttdef"><b>Definition:</b> <a href="Player_8cpp_source.html#l19358">Player.cpp:19358</a></div></div>
<div class="ttc" id="aclassPlayer_html_af059a10625d50ca7674771ea1c1c4c4c"><div class="ttname"><a href="classPlayer.html#af059a10625d50ca7674771ea1c1c4c4c">Player::CanStoreNewItem</a></div><div class="ttdeci">InventoryResult CanStoreNewItem(uint8 bag, uint8 slot, ItemPosCountVec &amp;dest, uint32 item, uint32 count, uint32 *no_space_count=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="Player_8h_source.html#l01293">Player.h:1293</a></div></div>
<div class="ttc" id="aclassQueryResult_html"><div class="ttname"><a href="classQueryResult.html">QueryResult</a></div><div class="ttdef"><b>Definition:</b> <a href="QueryResult_8h_source.html#l00026">QueryResult.h:27</a></div></div>
<div class="ttc" id="aclassQueryResult_html_a8f1f135d431fe357bf2b9373dc8d59be"><div class="ttname"><a href="classQueryResult.html#a8f1f135d431fe357bf2b9373dc8d59be">QueryResult::NextRow</a></div><div class="ttdeci">virtual bool NextRow()=0</div></div>
<div class="ttc" id="aclassQueryResult_html_ae59bcb12d59b9a369953be91ddb5c446"><div class="ttname"><a href="classQueryResult.html#ae59bcb12d59b9a369953be91ddb5c446">QueryResult::Fetch</a></div><div class="ttdeci">Field * Fetch() const</div><div class="ttdef"><b>Definition:</b> <a href="QueryResult_8h_source.html#l00036">QueryResult.h:36</a></div></div>
<div class="ttc" id="aclassSQLStorage_html_ace42ec0424ef41d187eb7c1bdcfa8c62"><div class="ttname"><a href="classSQLStorage.html#ace42ec0424ef41d187eb7c1bdcfa8c62">SQLStorage::LookupEntry</a></div><div class="ttdeci">T const  * LookupEntry(uint32 id) const</div><div class="ttdef"><b>Definition:</b> <a href="SQLStorage_8h_source.html#l00113">SQLStorage.h:113</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html"><div class="ttname"><a href="classSpellAuraHolder.html">SpellAuraHolder</a></div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00092">SpellAuras.h:93</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_a1fd2e2389179ee0daeb7cdbb3a67a294"><div class="ttname"><a href="classSpellAuraHolder.html#a1fd2e2389179ee0daeb7cdbb3a67a294">SpellAuraHolder::GetSpellProto</a></div><div class="ttdeci">SpellEntry const  * GetSpellProto() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00120">SpellAuras.h:120</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_a2424ccc610b10ff5e89e86d46522c178"><div class="ttname"><a href="classSpellAuraHolder.html#a2424ccc610b10ff5e89e86d46522c178">SpellAuraHolder::GetCasterGuid</a></div><div class="ttdeci">ObjectGuid const  &amp; GetCasterGuid() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00124">SpellAuras.h:124</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_a4f7e44700b43fbbd1dae605c0a06d79e"><div class="ttname"><a href="classSpellAuraHolder.html#a4f7e44700b43fbbd1dae605c0a06d79e">SpellAuraHolder::GetAuraCharges</a></div><div class="ttdeci">uint32 GetAuraCharges() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00169">SpellAuras.h:169</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_a68b6f7eddd0adafd5d4e2f493b6dbce3"><div class="ttname"><a href="classSpellAuraHolder.html#a68b6f7eddd0adafd5d4e2f493b6dbce3">SpellAuraHolder::GetAuraDuration</a></div><div class="ttdeci">int32 GetAuraDuration() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00158">SpellAuras.h:158</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_a8dc7353fe4c371046d0156fa28466d29"><div class="ttname"><a href="classSpellAuraHolder.html#a8dc7353fe4c371046d0156fa28466d29">SpellAuraHolder::GetCastItemGuid</a></div><div class="ttdeci">ObjectGuid const  &amp; GetCastItemGuid() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00126">SpellAuras.h:126</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_ab092e45184bc9f7b8c897578567fe5d2"><div class="ttname"><a href="classSpellAuraHolder.html#ab092e45184bc9f7b8c897578567fe5d2">SpellAuraHolder::SetState</a></div><div class="ttdeci">void SetState(SpellAuraHolderState state)</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00122">SpellAuras.h:122</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_ab7f8cf8e30f83ace3f9b6771e945d51a"><div class="ttname"><a href="classSpellAuraHolder.html#ab7f8cf8e30f83ace3f9b6771e945d51a">SpellAuraHolder::IsEmptyHolder</a></div><div class="ttdeci">bool IsEmptyHolder() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8cpp_source.html#l11268">SpellAuras.cpp:11268</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_ab8496e9188d55a61f7123cb26603dcd1"><div class="ttname"><a href="classSpellAuraHolder.html#ab8496e9188d55a61f7123cb26603dcd1">SpellAuraHolder::IsSaveToDbHolder</a></div><div class="ttdeci">bool IsSaveToDbHolder() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8cpp_source.html#l11276">SpellAuras.cpp:11276</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_abf7c7aaae409c3c059fc3395aac5f44e"><div class="ttname"><a href="classSpellAuraHolder.html#abf7c7aaae409c3c059fc3395aac5f44e">SpellAuraHolder::GetStackAmount</a></div><div class="ttdeci">uint32 GetStackAmount() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00112">SpellAuras.h:112</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_ac5dd9bcbe41bfffc408f849f9e53071f"><div class="ttname"><a href="classSpellAuraHolder.html#ac5dd9bcbe41bfffc408f849f9e53071f">SpellAuraHolder::AddAura</a></div><div class="ttdeci">void AddAura(Aura *aura, SpellEffectIndex index)</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8cpp_source.html#l09942">SpellAuras.cpp:9942</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_adca0d65cdb3c9ed599b0902e7e23bfad"><div class="ttname"><a href="classSpellAuraHolder.html#adca0d65cdb3c9ed599b0902e7e23bfad">SpellAuraHolder::SetLoadedState</a></div><div class="ttdeci">void SetLoadedState(ObjectGuid const &amp;casterGUID, ObjectGuid const &amp;itemGUID, uint32 stackAmount, uint32 charges, int32 maxduration, int32 duration)</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00190">SpellAuras.h:190</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_addbe7e55c9815740d915d5116ba8352d"><div class="ttname"><a href="classSpellAuraHolder.html#addbe7e55c9815740d915d5116ba8352d">SpellAuraHolder::GetAuraByEffectIndex</a></div><div class="ttdeci">Aura * GetAuraByEffectIndex(SpellEffectIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00116">SpellAuras.h:116</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_ade21bd9f9788d2017dc3a48d90e37013"><div class="ttname"><a href="classSpellAuraHolder.html#ade21bd9f9788d2017dc3a48d90e37013">SpellAuraHolder::GetId</a></div><div class="ttdeci">uint32 GetId() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00119">SpellAuras.h:119</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_ae3f58ba4d19c699b841d9b4c753d0fae"><div class="ttname"><a href="classSpellAuraHolder.html#ae3f58ba4d19c699b841d9b4c753d0fae">SpellAuraHolder::GetTrackedAuraType</a></div><div class="ttdeci">TrackedAuraType GetTrackedAuraType() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00152">SpellAuras.h:152</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_aeacac6b44093daefebf452a0beb1a5cb"><div class="ttname"><a href="classSpellAuraHolder.html#aeacac6b44093daefebf452a0beb1a5cb">SpellAuraHolder::SetTrackedAuraType</a></div><div class="ttdeci">void SetTrackedAuraType(TrackedAuraType val)</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00153">SpellAuras.h:153</a></div></div>
<div class="ttc" id="aclassSpellAuraHolder_html_af69c8cd9624dc41a345e775c075518c3"><div class="ttname"><a href="classSpellAuraHolder.html#af69c8cd9624dc41a345e775c075518c3">SpellAuraHolder::GetAuraMaxDuration</a></div><div class="ttdeci">int32 GetAuraMaxDuration() const</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00156">SpellAuras.h:156</a></div></div>
<div class="ttc" id="aclassSqlStatementID_html"><div class="ttname"><a href="classSqlStatementID.html">SqlStatementID</a></div><div class="ttdef"><b>Definition:</b> <a href="SqlPreparedStatement_8h_source.html#l00172">SqlPreparedStatement.h:173</a></div></div>
<div class="ttc" id="aclassSqlStatement_html"><div class="ttname"><a href="classSqlStatement.html">SqlStatement</a></div><div class="ttdef"><b>Definition:</b> <a href="SqlPreparedStatement_8h_source.html#l00191">SqlPreparedStatement.h:192</a></div></div>
<div class="ttc" id="aclassSqlStatement_html_a18377e3e03f9397eafbab91ae8675066"><div class="ttname"><a href="classSqlStatement.html#a18377e3e03f9397eafbab91ae8675066">SqlStatement::Execute</a></div><div class="ttdeci">bool Execute()</div><div class="ttdef"><b>Definition:</b> <a href="SqlPreparedStatement_8cpp_source.html#l00054">SqlPreparedStatement.cpp:54</a></div></div>
<div class="ttc" id="aclassSqlStatement_html_a1e4442d4f5e8ea685c078ecdcc769daa"><div class="ttname"><a href="classSqlStatement.html#a1e4442d4f5e8ea685c078ecdcc769daa">SqlStatement::addUInt64</a></div><div class="ttdeci">void addUInt64(uint64 var)</div><div class="ttdef"><b>Definition:</b> <a href="SqlPreparedStatement_8h_source.html#l00253">SqlPreparedStatement.h:253</a></div></div>
<div class="ttc" id="aclassSqlStatement_html_a2429d9344ee33990c10ed19a95d80c9f"><div class="ttname"><a href="classSqlStatement.html#a2429d9344ee33990c10ed19a95d80c9f">SqlStatement::addInt32</a></div><div class="ttdeci">void addInt32(int32 var)</div><div class="ttdef"><b>Definition:</b> <a href="SqlPreparedStatement_8h_source.html#l00252">SqlPreparedStatement.h:252</a></div></div>
<div class="ttc" id="aclassSqlStatement_html_a3520582ff731641605e796aa593d4034"><div class="ttname"><a href="classSqlStatement.html#a3520582ff731641605e796aa593d4034">SqlStatement::addUInt32</a></div><div class="ttdeci">void addUInt32(uint32 var)</div><div class="ttdef"><b>Definition:</b> <a href="SqlPreparedStatement_8h_source.html#l00251">SqlPreparedStatement.h:251</a></div></div>
<div class="ttc" id="aclassSqlStatement_html_ac50286f02b8261212ecc237bb190afa3"><div class="ttname"><a href="classSqlStatement.html#ac50286f02b8261212ecc237bb190afa3">SqlStatement::addUInt8</a></div><div class="ttdeci">void addUInt8(uint8 var)</div><div class="ttdef"><b>Definition:</b> <a href="SqlPreparedStatement_8h_source.html#l00247">SqlPreparedStatement.h:247</a></div></div>
<div class="ttc" id="aclassSqlStatement_html_ac6965fc7a26fc5475e826156eed945cd"><div class="ttname"><a href="classSqlStatement.html#ac6965fc7a26fc5475e826156eed945cd">SqlStatement::addString</a></div><div class="ttdeci">void addString(const char *var)</div><div class="ttdef"><b>Definition:</b> <a href="SqlPreparedStatement_8h_source.html#l00257">SqlPreparedStatement.h:257</a></div></div>
<div class="ttc" id="aclassSqlStatement_html_afb3a28c8d108512cb788670efd8a910a"><div class="ttname"><a href="classSqlStatement.html#afb3a28c8d108512cb788670efd8a910a">SqlStatement::PExecute</a></div><div class="ttdeci">bool PExecute(ParamType1 param1)</div><div class="ttdef"><b>Definition:</b> <a href="SqlPreparedStatement_8h_source.html#l00212">SqlPreparedStatement.h:212</a></div></div>
<div class="ttc" id="aclassTypeUnorderedMapContainer_html_aa81e9b5834a206b269129703d1b6053c"><div class="ttname"><a href="classTypeUnorderedMapContainer.html#aa81e9b5834a206b269129703d1b6053c">TypeUnorderedMapContainer::erase</a></div><div class="ttdeci">bool erase(KEY_TYPE handle, SPECIFIC_TYPE *)</div><div class="ttdef"><b>Definition:</b> <a href="TypeContainer_8h_source.html#l00064">TypeContainer.h:64</a></div></div>
<div class="ttc" id="aclassTypeUnorderedMapContainer_html_acb2014a46528eee4b2a99ac287d46754"><div class="ttname"><a href="classTypeUnorderedMapContainer.html#acb2014a46528eee4b2a99ac287d46754">TypeUnorderedMapContainer::insert</a></div><div class="ttdeci">bool insert(KEY_TYPE handle, SPECIFIC_TYPE *obj)</div><div class="ttdef"><b>Definition:</b> <a href="TypeContainer_8h_source.html#l00058">TypeContainer.h:58</a></div></div>
<div class="ttc" id="aclassUnitAI_html_ae2445daebeb77190b34bcd0ab937813e"><div class="ttname"><a href="classUnitAI.html#ae2445daebeb77190b34bcd0ab937813e">UnitAI::SetReactState</a></div><div class="ttdeci">void SetReactState(ReactStates st)</div><div class="ttdef"><b>Definition:</b> <a href="UnitAI_8h_source.html#l00451">UnitAI.h:451</a></div></div>
<div class="ttc" id="aclassUnitAI_html_af882fcabacd9a2b54700e38fa48afd6f"><div class="ttname"><a href="classUnitAI.html#af882fcabacd9a2b54700e38fa48afd6f">UnitAI::OnUnsummon</a></div><div class="ttdeci">virtual void OnUnsummon()</div><div class="ttdef"><b>Definition:</b> <a href="UnitAI_8h_source.html#l00425">UnitAI.h:425</a></div></div>
<div class="ttc" id="aclassUnit_html"><div class="ttname"><a href="classUnit.html">Unit</a></div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01147">Unit.h:1148</a></div></div>
<div class="ttc" id="aclassUnit_html_a05824b76b9efd191adffe3b6a198728e"><div class="ttname"><a href="classUnit.html#a05824b76b9efd191adffe3b6a198728e">Unit::m_scalingAuras</a></div><div class="ttdeci">std::vector&lt; Aura * &gt; m_scalingAuras</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02640">Unit.h:2640</a></div></div>
<div class="ttc" id="aclassUnit_html_a070093265604ae1cf5972dc032bb655b"><div class="ttname"><a href="classUnit.html#a070093265604ae1cf5972dc032bb655b">Unit::SetMiniPet</a></div><div class="ttdeci">void SetMiniPet(Unit *pet)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01954">Unit.h:1954</a></div></div>
<div class="ttc" id="aclassUnit_html_a085d47fd164802e379e9a90a528da2d3"><div class="ttname"><a href="classUnit.html#a085d47fd164802e379e9a90a528da2d3">Unit::GetCreatePowers</a></div><div class="ttdeci">uint32 GetCreatePowers(Powers power) const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11466">Unit.cpp:11466</a></div></div>
<div class="ttc" id="aclassUnit_html_a0d3bb3d777309cc36f63722c66cefd57"><div class="ttname"><a href="classUnit.html#a0d3bb3d777309cc36f63722c66cefd57">Unit::IsPvPFreeForAll</a></div><div class="ttdeci">bool IsPvPFreeForAll() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01502">Unit.h:1502</a></div></div>
<div class="ttc" id="aclassUnit_html_a0d8467fc487ce4c1eaecdbaab6cddd6f"><div class="ttname"><a href="classUnit.html#a0d8467fc487ce4c1eaecdbaab6cddd6f">Unit::SetCreateStat</a></div><div class="ttdeci">void SetCreateStat(Stats stat, float val)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02046">Unit.h:2046</a></div></div>
<div class="ttc" id="aclassUnit_html_a0f9cefdf7214be9a606478618a2cdc6e"><div class="ttname"><a href="classUnit.html#a0f9cefdf7214be9a606478618a2cdc6e">Unit::setFaction</a></div><div class="ttdeci">void setFaction(uint32 faction)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01440">Unit.h:1440</a></div></div>
<div class="ttc" id="aclassUnit_html_a101ecab148e6423e4029f63317cf8c45"><div class="ttname"><a href="classUnit.html#a101ecab148e6423e4029f63317cf8c45">Unit::IsPvPSanctuary</a></div><div class="ttdeci">bool IsPvPSanctuary() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01506">Unit.h:1506</a></div></div>
<div class="ttc" id="aclassUnit_html_a1350682846c1ddb65567ec85e75e2df3"><div class="ttname"><a href="classUnit.html#a1350682846c1ddb65567ec85e75e2df3">Unit::RemovePetAura</a></div><div class="ttdeci">void RemovePetAura(PetAura const *petSpell)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l12666">Unit.cpp:12666</a></div></div>
<div class="ttc" id="aclassUnit_html_a174a156cc2366b993373ffa603859fdb"><div class="ttname"><a href="classUnit.html#a174a156cc2366b993373ffa603859fdb">Unit::SetCreateResistance</a></div><div class="ttdeci">void SetCreateResistance(SpellSchools school, int32 val)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02055">Unit.h:2055</a></div></div>
<div class="ttc" id="aclassUnit_html_a18f9eea242a311fdf78898c42fba12c8"><div class="ttname"><a href="classUnit.html#a18f9eea242a311fdf78898c42fba12c8">Unit::SendPetDismiss</a></div><div class="ttdeci">void SendPetDismiss(uint32 soundId) const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11995">Unit.cpp:11995</a></div></div>
<div class="ttc" id="aclassUnit_html_a1a38bdc4f3c0a9b9cfa22f51365e37a4"><div class="ttname"><a href="classUnit.html#a1a38bdc4f3c0a9b9cfa22f51365e37a4">Unit::RemoveAurasDueToSpell</a></div><div class="ttdeci">void RemoveAurasDueToSpell(uint32 spellId, SpellAuraHolder *except=nullptr, AuraRemoveMode mode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l06262">Unit.cpp:6262</a></div></div>
<div class="ttc" id="aclassUnit_html_a211876b6b1dcea2eedcc52e754093d70"><div class="ttname"><a href="classUnit.html#a211876b6b1dcea2eedcc52e754093d70">Unit::CastSpell</a></div><div class="ttdeci">SpellCastResult CastSpell(Unit *Victim, uint32 spellId, uint32 triggeredFlags, Item *castItem=nullptr, Aura *triggeredByAura=nullptr, ObjectGuid originalCaster=ObjectGuid(), SpellEntry const *triggeredBy=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l01479">Unit.cpp:1479</a></div></div>
<div class="ttc" id="aclassUnit_html_a2564e1683ba157cdc4ccc9c9a4b004e1"><div class="ttname"><a href="classUnit.html#a2564e1683ba157cdc4ccc9c9a4b004e1">Unit::AddToWorld</a></div><div class="ttdeci">void AddToWorld() override</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11483">Unit.cpp:11483</a></div></div>
<div class="ttc" id="aclassUnit_html_a2aca1bf125beec599e3141f077509329"><div class="ttname"><a href="classUnit.html#a2aca1bf125beec599e3141f077509329">Unit::m_regenTimer</a></div><div class="ttdeci">uint32 m_regenTimer</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02671">Unit.h:2671</a></div></div>
<div class="ttc" id="aclassUnit_html_a2b4a942157fb3a7ca2f01f9fe11c260d"><div class="ttname"><a href="classUnit.html#a2b4a942157fb3a7ca2f01f9fe11c260d">Unit::SetCreateHealth</a></div><div class="ttdeci">void SetCreateHealth(uint32 val)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02047">Unit.h:2047</a></div></div>
<div class="ttc" id="aclassUnit_html_a3142f62691c432eddb212ec58e81e3f9"><div class="ttname"><a href="classUnit.html#a3142f62691c432eddb212ec58e81e3f9">Unit::SpellAuraHolderMap</a></div><div class="ttdeci">std::multimap&lt; uint32, SpellAuraHolder * &gt; SpellAuraHolderMap</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01151">Unit.h:1151</a></div></div>
<div class="ttc" id="aclassUnit_html_a365a5c26b5457c0693631d19801383c3"><div class="ttname"><a href="classUnit.html#a365a5c26b5457c0693631d19801383c3">Unit::SetSummonerGuid</a></div><div class="ttdeci">void SetSummonerGuid(ObjectGuid const &amp;owner)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02704">Unit.h:2704</a></div></div>
<div class="ttc" id="aclassUnit_html_a375c07471b5dd9708337960e21ca5b28"><div class="ttname"><a href="classUnit.html#a375c07471b5dd9708337960e21ca5b28">Unit::SetPvP</a></div><div class="ttdeci">void SetPvP(bool state)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l12845">Unit.cpp:12845</a></div></div>
<div class="ttc" id="aclassUnit_html_a3ee8734b2cbfd8933385c3b377b2e80c"><div class="ttname"><a href="classUnit.html#a3ee8734b2cbfd8933385c3b377b2e80c">Unit::SetBaseWeaponDamage</a></div><div class="ttdeci">void SetBaseWeaponDamage(WeaponAttackType attType, WeaponDamageRange damageRange, float value, uint8 index=0)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02133">Unit.h:2133</a></div></div>
<div class="ttc" id="aclassUnit_html_a489b01f2bc025640f3fdb0d7cdd08db7"><div class="ttname"><a href="classUnit.html#a489b01f2bc025640f3fdb0d7cdd08db7">Unit::m_charmInfo</a></div><div class="ttdeci">CharmInfo * m_charmInfo</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02666">Unit.h:2666</a></div></div>
<div class="ttc" id="aclassUnit_html_a48fcb3d403534171f69d0be3b6003762"><div class="ttname"><a href="classUnit.html#a48fcb3d403534171f69d0be3b6003762">Unit::IsPvP</a></div><div class="ttdeci">bool IsPvP() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01500">Unit.h:1500</a></div></div>
<div class="ttc" id="aclassUnit_html_a4ae648f71881fd67bcdd861ec4ef2363"><div class="ttname"><a href="classUnit.html#a4ae648f71881fd67bcdd861ec4ef2363">Unit::GetPowerType</a></div><div class="ttdeci">Powers GetPowerType() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01417">Unit.h:1417</a></div></div>
<div class="ttc" id="aclassUnit_html_a5058c827438f21ba95b0b404e5bb0258"><div class="ttname"><a href="classUnit.html#a5058c827438f21ba95b0b404e5bb0258">Unit::SetLevel</a></div><div class="ttdeci">void SetLevel(uint32 lvl)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11298">Unit.cpp:11298</a></div></div>
<div class="ttc" id="aclassUnit_html_a5173c1774b09b42c409bf31280c37d36"><div class="ttname"><a href="classUnit.html#a5173c1774b09b42c409bf31280c37d36">Unit::GetMaxHealth</a></div><div class="ttdeci">uint32 GetMaxHealth() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01408">Unit.h:1408</a></div></div>
<div class="ttc" id="aclassUnit_html_a577387caac561e0995778ff2aa1c02b4"><div class="ttname"><a href="classUnit.html#a577387caac561e0995778ff2aa1c02b4">Unit::IsImmuneToPlayer</a></div><div class="ttdeci">bool IsImmuneToPlayer() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01495">Unit.h:1495</a></div></div>
<div class="ttc" id="aclassUnit_html_a57870b79c2a356567afd5febedf79a61"><div class="ttname"><a href="classUnit.html#a57870b79c2a356567afd5febedf79a61">Unit::GetPetGuid</a></div><div class="ttdeci">ObjectGuid const  &amp; GetPetGuid() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01927">Unit.h:1927</a></div></div>
<div class="ttc" id="aclassUnit_html_a57f92100c6f61533e6653aac66775e7c"><div class="ttname"><a href="classUnit.html#a57f92100c6f61533e6653aac66775e7c">Unit::UpdateScalingAuras</a></div><div class="ttdeci">void UpdateScalingAuras()</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l14440">Unit.cpp:14440</a></div></div>
<div class="ttc" id="aclassUnit_html_a58a507ebe628930b8a506144b364d84b"><div class="ttname"><a href="classUnit.html#a58a507ebe628930b8a506144b364d84b">Unit::getClass</a></div><div class="ttdeci">uint8 getClass() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01394">Unit.h:1394</a></div></div>
<div class="ttc" id="aclassUnit_html_a5c41b9a7d546cd3ebe8ea4061dc7bc9e"><div class="ttname"><a href="classUnit.html#a5c41b9a7d546cd3ebe8ea4061dc7bc9e">Unit::RemoveArenaAuras</a></div><div class="ttdeci">void RemoveArenaAuras(bool onleave=false)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l06583">Unit.cpp:6583</a></div></div>
<div class="ttc" id="aclassUnit_html_a5ea3f54af571493f7889220724667189"><div class="ttname"><a href="classUnit.html#a5ea3f54af571493f7889220724667189">Unit::IsAlive</a></div><div class="ttdeci">bool IsAlive() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01895">Unit.h:1895</a></div></div>
<div class="ttc" id="aclassUnit_html_a6095270dbf0be2614592c880d455fa3c"><div class="ttname"><a href="classUnit.html#a6095270dbf0be2614592c880d455fa3c">Unit::m_deathState</a></div><div class="ttdeci">DeathState m_deathState</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02632">Unit.h:2632</a></div></div>
<div class="ttc" id="aclassUnit_html_a6548d4bfff73fad6df63a0bd0d806e2e"><div class="ttname"><a href="classUnit.html#a6548d4bfff73fad6df63a0bd0d806e2e">Unit::SetHealth</a></div><div class="ttdeci">void SetHealth(uint32 val)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11307">Unit.cpp:11307</a></div></div>
<div class="ttc" id="aclassUnit_html_a6591e720a2cfa309b6d693231b1fdbc0"><div class="ttname"><a href="classUnit.html#a6591e720a2cfa309b6d693231b1fdbc0">Unit::ModifyPower</a></div><div class="ttdeci">int32 ModifyPower(Powers power, int32 dVal)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l10039">Unit.cpp:10039</a></div></div>
<div class="ttc" id="aclassUnit_html_a665cb09340bb34d09800ac518f8b40b8"><div class="ttname"><a href="classUnit.html#a665cb09340bb34d09800ac518f8b40b8">Unit::SetMaxPower</a></div><div class="ttdeci">void SetMaxPower(Powers power, uint32 val)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11399">Unit.cpp:11399</a></div></div>
<div class="ttc" id="aclassUnit_html_a68db20366e7ce843216f5024b94f154c"><div class="ttname"><a href="classUnit.html#a68db20366e7ce843216f5024b94f154c">Unit::GetCharmInfo</a></div><div class="ttdeci">CharmInfo * GetCharmInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01966">Unit.h:1966</a></div></div>
<div class="ttc" id="aclassUnit_html_a694208f5c89fef8e9d968150dbb5b274"><div class="ttname"><a href="classUnit.html#a694208f5c89fef8e9d968150dbb5b274">Unit::SetPet</a></div><div class="ttdeci">void SetPet(Unit *pet)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01951">Unit.h:1951</a></div></div>
<div class="ttc" id="aclassUnit_html_a6c0154332adeaa919ec4467acf2a7e3d"><div class="ttname"><a href="classUnit.html#a6c0154332adeaa919ec4467acf2a7e3d">Unit::SetImmuneToPlayer</a></div><div class="ttdeci">void SetImmuneToPlayer(bool state)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l12826">Unit.cpp:12826</a></div></div>
<div class="ttc" id="aclassUnit_html_a6d1af92863df5e94a0d4431c454f5b2d"><div class="ttname"><a href="classUnit.html#a6d1af92863df5e94a0d4431c454f5b2d">Unit::GetOwnerGuid</a></div><div class="ttdeci">ObjectGuid const  &amp; GetOwnerGuid() const override</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01924">Unit.h:1924</a></div></div>
<div class="ttc" id="aclassUnit_html_a776d97f611480fe42e082cc967b05498"><div class="ttname"><a href="classUnit.html#a776d97f611480fe42e082cc967b05498">Unit::SetCreateMana</a></div><div class="ttdeci">void SetCreateMana(uint32 val)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02049">Unit.h:2049</a></div></div>
<div class="ttc" id="aclassUnit_html_a78fa5ef65274d8db2ba98306e98e2209"><div class="ttname"><a href="classUnit.html#a78fa5ef65274d8db2ba98306e98e2209">Unit::IsImmuneToNPC</a></div><div class="ttdeci">bool IsImmuneToNPC() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01493">Unit.h:1493</a></div></div>
<div class="ttc" id="aclassUnit_html_a7ac2348be8b685fce0037fbbac3ceacb"><div class="ttname"><a href="classUnit.html#a7ac2348be8b685fce0037fbbac3ceacb">Unit::CombatStop</a></div><div class="ttdeci">void CombatStop(bool includingCast=false, bool includingCombo=true)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l07586">Unit.cpp:7586</a></div></div>
<div class="ttc" id="aclassUnit_html_a7ae13a942847716011855720fb4a1d3a"><div class="ttname"><a href="classUnit.html#a7ae13a942847716011855720fb4a1d3a">Unit::SetSheath</a></div><div class="ttdeci">virtual void SetSheath(SheathState sheathed)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01436">Unit.h:1436</a></div></div>
<div class="ttc" id="aclassUnit_html_a7b9262f2f3fb35fed66a1807edcd7fc0"><div class="ttname"><a href="classUnit.html#a7b9262f2f3fb35fed66a1807edcd7fc0">Unit::GetSpellAuraHolderMap</a></div><div class="ttdeci">SpellAuraHolderMap &amp; GetSpellAuraHolderMap()</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02223">Unit.h:2223</a></div></div>
<div class="ttc" id="aclassUnit_html_a7e54441e936d60c8d5debbf0f64b8d9c"><div class="ttname"><a href="classUnit.html#a7e54441e936d60c8d5debbf0f64b8d9c">Unit::GetLevel</a></div><div class="ttdeci">uint32 GetLevel() const override</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01391">Unit.h:1391</a></div></div>
<div class="ttc" id="aclassUnit_html_a8013081555f55a6ae6bd0a10e5e37c83"><div class="ttname"><a href="classUnit.html#a8013081555f55a6ae6bd0a10e5e37c83">Unit::SetPvPFreeForAll</a></div><div class="ttdeci">void SetPvPFreeForAll(bool state)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l12869">Unit.cpp:12869</a></div></div>
<div class="ttc" id="aclassUnit_html_a845005156a1602638123fad05aec9f1a"><div class="ttname"><a href="classUnit.html#a845005156a1602638123fad05aec9f1a">Unit::UpdateModelData</a></div><div class="ttdeci">void UpdateModelData()</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l12364">Unit.cpp:12364</a></div></div>
<div class="ttc" id="aclassUnit_html_a86b4d9e6cfa52d722608466a285cac0c"><div class="ttname"><a href="classUnit.html#a86b4d9e6cfa52d722608466a285cac0c">Unit::GetDisplayId</a></div><div class="ttdeci">uint32 GetDisplayId() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02251">Unit.h:2251</a></div></div>
<div class="ttc" id="aclassUnit_html_a8ac9fa13ad31b42e5d1372694d22a799"><div class="ttname"><a href="classUnit.html#a8ac9fa13ad31b42e5d1372694d22a799">Unit::GetNativeDisplayId</a></div><div class="ttdeci">uint32 GetNativeDisplayId() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02253">Unit.h:2253</a></div></div>
<div class="ttc" id="aclassUnit_html_a93f83fd909310de2c76382d00d7dbbf1"><div class="ttname"><a href="classUnit.html#a93f83fd909310de2c76382d00d7dbbf1">Unit::GetMaxPower</a></div><div class="ttdeci">uint32 GetMaxPower(Powers power) const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01420">Unit.h:1420</a></div></div>
<div class="ttc" id="aclassUnit_html_a958172d6051b106e3b3c776e4f9f3952"><div class="ttname"><a href="classUnit.html#a958172d6051b106e3b3c776e4f9f3952">Unit::GetHealth</a></div><div class="ttdeci">uint32 GetHealth() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01407">Unit.h:1407</a></div></div>
<div class="ttc" id="aclassUnit_html_a959cfb5dafa2f964adb440d2b53c02f6"><div class="ttname"><a href="classUnit.html#a959cfb5dafa2f964adb440d2b53c02f6">Unit::ModifyHealth</a></div><div class="ttdeci">int32 ModifyHealth(int32 dVal)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l10008">Unit.cpp:10008</a></div></div>
<div class="ttc" id="aclassUnit_html_a9629129db92c05662079a6b36d61c610"><div class="ttname"><a href="classUnit.html#a9629129db92c05662079a6b36d61c610">Unit::GetFaction</a></div><div class="ttdeci">uint32 GetFaction() const override</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01439">Unit.h:1439</a></div></div>
<div class="ttc" id="aclassUnit_html_a9eba66db4d38ec822657041599cb458e"><div class="ttname"><a href="classUnit.html#a9eba66db4d38ec822657041599cb458e">Unit::SetMeleeDamageSchool</a></div><div class="ttdeci">void SetMeleeDamageSchool(bool main, SpellSchools school)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02146">Unit.h:2146</a></div></div>
<div class="ttc" id="aclassUnit_html_aa16143de8ebccefd088f51b53ec84458"><div class="ttname"><a href="classUnit.html#aa16143de8ebccefd088f51b53ec84458">Unit::SetNativeDisplayId</a></div><div class="ttdeci">void SetNativeDisplayId(uint32 modelId)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02254">Unit.h:2254</a></div></div>
<div class="ttc" id="aclassUnit_html_aa3f511c51aa1082be9d4777c770a3485"><div class="ttname"><a href="classUnit.html#aa3f511c51aa1082be9d4777c770a3485">Unit::SetPhaseMask</a></div><div class="ttdeci">void SetPhaseMask(uint32 newPhaseMask, bool update) override</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l12705">Unit.cpp:12705</a></div></div>
<div class="ttc" id="aclassUnit_html_aa4192d3622a4c41d4c5a46a60209e62e"><div class="ttname"><a href="classUnit.html#aa4192d3622a4c41d4c5a46a60209e62e">Unit::GetAttackTime</a></div><div class="ttdeci">uint32 GetAttackTime(WeaponAttackType att) const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01430">Unit.h:1430</a></div></div>
<div class="ttc" id="aclassUnit_html_aab919c89c1c0fead6ece2c26e6c565a4"><div class="ttname"><a href="classUnit.html#aab919c89c1c0fead6ece2c26e6c565a4">Unit::SetDisplayId</a></div><div class="ttdeci">void SetDisplayId(uint32 modelId)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l12308">Unit.cpp:12308</a></div></div>
<div class="ttc" id="aclassUnit_html_aae47c6238a31a814381be6848915b13a"><div class="ttname"><a href="classUnit.html#aae47c6238a31a814381be6848915b13a">Unit::RemoveGuardian</a></div><div class="ttdeci">void RemoveGuardian(Pet *pet)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l08037">Unit.cpp:8037</a></div></div>
<div class="ttc" id="aclassUnit_html_ab2df146996babfafaca3f54d058fd7bd"><div class="ttname"><a href="classUnit.html#ab2df146996babfafaca3f54d058fd7bd">Unit::SetPvPSanctuary</a></div><div class="ttdeci">void SetPvPSanctuary(bool state)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l12911">Unit.cpp:12911</a></div></div>
<div class="ttc" id="aclassUnit_html_ab7bfc8688e1cc14d336d6e2ad9ecc94d"><div class="ttname"><a href="classUnit.html#ab7bfc8688e1cc14d336d6e2ad9ecc94d">Unit::SetModifierValue</a></div><div class="ttdeci">void SetModifierValue(UnitMods unitMod, UnitModifierType modifierType, float value)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02112">Unit.h:2112</a></div></div>
<div class="ttc" id="aclassUnit_html_abda167c3637de6d3b5e3f6982566e23e"><div class="ttname"><a href="classUnit.html#abda167c3637de6d3b5e3f6982566e23e">Unit::SetCanModifyStats</a></div><div class="ttdeci">void SetCanModifyStats(bool modifyStats)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02121">Unit.h:2121</a></div></div>
<div class="ttc" id="aclassUnit_html_abe78f735546f357870d95c29148a0881"><div class="ttname"><a href="classUnit.html#abe78f735546f357870d95c29148a0881">Unit::SetImmuneToNPC</a></div><div class="ttdeci">void SetImmuneToNPC(bool state)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l12807">Unit.cpp:12807</a></div></div>
<div class="ttc" id="aclassUnit_html_abe91abe7303db7af828a1e5044785295"><div class="ttname"><a href="classUnit.html#abe91abe7303db7af828a1e5044785295">Unit::HasCharm</a></div><div class="ttdeci">bool HasCharm(ObjectGuid const &amp;exactGuid=ObjectGuid()) const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01904">Unit.h:1904</a></div></div>
<div class="ttc" id="aclassUnit_html_ac328769b044e8f267d10481ac112e097"><div class="ttname"><a href="classUnit.html#ac328769b044e8f267d10481ac112e097">Unit::RemoveFromWorld</a></div><div class="ttdeci">void RemoveFromWorld() override</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11492">Unit.cpp:11492</a></div></div>
<div class="ttc" id="aclassUnit_html_ac5deedcb47695a681523e416b8456848"><div class="ttname"><a href="classUnit.html#ac5deedcb47695a681523e416b8456848">Unit::GetOwner</a></div><div class="ttdeci">Unit * GetOwner(WorldObject const *pov=nullptr, bool recursive=false) const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l07938">Unit.cpp:7938</a></div></div>
<div class="ttc" id="aclassUnit_html_ad24816bf13af9aac3784f1c892cecd36"><div class="ttname"><a href="classUnit.html#ad24816bf13af9aac3784f1c892cecd36">Unit::m_petAuras</a></div><div class="ttdeci">PetAuraSet m_petAuras</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l02470">Unit.h:2470</a></div></div>
<div class="ttc" id="aclassUnit_html_ad74653f89ff18e00153b1fd0520830e4"><div class="ttname"><a href="classUnit.html#ad74653f89ff18e00153b1fd0520830e4">Unit::GetDeathState</a></div><div class="ttdeci">DeathState GetDeathState() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01897">Unit.h:1897</a></div></div>
<div class="ttc" id="aclassUnit_html_ad7e475d80b9af430cc076d7c01f967e9"><div class="ttname"><a href="classUnit.html#ad7e475d80b9af430cc076d7c01f967e9">Unit::GetPower</a></div><div class="ttdeci">uint32 GetPower(Powers power) const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01419">Unit.h:1419</a></div></div>
<div class="ttc" id="aclassUnit_html_adeb215374587957e59c2551053895fa1"><div class="ttname"><a href="classUnit.html#adeb215374587957e59c2551053895fa1">Unit::SetAttackTime</a></div><div class="ttdeci">void SetAttackTime(WeaponAttackType att, uint32 val)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01431">Unit.h:1431</a></div></div>
<div class="ttc" id="aclassUnit_html_aef3abd7c33c5a6578dbd3efadd6f49ca"><div class="ttname"><a href="classUnit.html#aef3abd7c33c5a6578dbd3efadd6f49ca">Unit::SetPowerType</a></div><div class="ttdeci">void SetPowerType(Powers new_powertype, bool sendUpdate=true)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l07376">Unit.cpp:7376</a></div></div>
<div class="ttc" id="aclassUnit_html_af3fdd69056fa0e608f38f5b7579a349e"><div class="ttname"><a href="classUnit.html#af3fdd69056fa0e608f38f5b7579a349e">Unit::AddSpellAuraHolder</a></div><div class="ttdeci">bool AddSpellAuraHolder(SpellAuraHolder *holder)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l05644">Unit.cpp:5644</a></div></div>
<div class="ttc" id="aclassUnit_html_af5e75d013dfa8a8b888d7714992e3f2a"><div class="ttname"><a href="classUnit.html#af5e75d013dfa8a8b888d7714992e3f2a">Unit::IsInCombat</a></div><div class="ttdeci">bool IsInCombat() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01707">Unit.h:1707</a></div></div>
<div class="ttc" id="aclassUnit_html_af69a9cad7f3f78b594bcb0f1cdb10d2b"><div class="ttname"><a href="classUnit.html#af69a9cad7f3f78b594bcb0f1cdb10d2b">Unit::SetOwnerGuid</a></div><div class="ttdeci">void SetOwnerGuid(ObjectGuid owner) override</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l01925">Unit.h:1925</a></div></div>
<div class="ttc" id="aclassUnit_html_af76c373284936181942a6f594cd720fd"><div class="ttname"><a href="classUnit.html#af76c373284936181942a6f594cd720fd">Unit::RemoveAllAuras</a></div><div class="ttdeci">void RemoveAllAuras(AuraRemoveMode mode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l06574">Unit.cpp:6574</a></div></div>
<div class="ttc" id="aclassUnit_html_afcc2a2d47162fc8c4792eac575025086"><div class="ttname"><a href="classUnit.html#afcc2a2d47162fc8c4792eac575025086">Unit::SetPower</a></div><div class="ttdeci">void SetPower(Powers power, uint32 val, bool withPowerUpdate=true)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11357">Unit.cpp:11357</a></div></div>
<div class="ttc" id="aclassUnit_html_afef38644eec7c185ae9bb0a848a98ad7"><div class="ttname"><a href="classUnit.html#afef38644eec7c185ae9bb0a848a98ad7">Unit::OCTRegenHPPerSpirit</a></div><div class="ttdeci">float OCTRegenHPPerSpirit() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l14214">Unit.cpp:14214</a></div></div>
<div class="ttc" id="aclassWorldObject_html_a0a471b58ac8905281008aa4a730c4093"><div class="ttname"><a href="classWorldObject.html#a0a471b58ac8905281008aa4a730c4093">WorldObject::GetPhaseMask</a></div><div class="ttdeci">uint32 GetPhaseMask() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l01047">Object.h:1047</a></div></div>
<div class="ttc" id="aclassWorldObject_html_a185b15e6aa5be8ab5f914f8a27cfea06"><div class="ttname"><a href="classWorldObject.html#a185b15e6aa5be8ab5f914f8a27cfea06">WorldObject::m_name</a></div><div class="ttdeci">std::string m_name</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l01302">Object.h:1302</a></div></div>
<div class="ttc" id="aclassWorldObject_html_a1eae905a04c755457c63fd1df93b6099"><div class="ttname"><a href="classWorldObject.html#a1eae905a04c755457c63fd1df93b6099">WorldObject::m_cooldownMap</a></div><div class="ttdeci">CooldownContainer m_cooldownMap</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l01300">Object.h:1300</a></div></div>
<div class="ttc" id="aclassWorldObject_html_a485ded18163bda1b789be2283781780e"><div class="ttname"><a href="classWorldObject.html#a485ded18163bda1b789be2283781780e">WorldObject::GetMapId</a></div><div class="ttdeci">uint32 GetMapId() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l01043">Object.h:1043</a></div></div>
<div class="ttc" id="aclassWorldObject_html_a76c507a1b3adcebf2732572bc6b67fe0"><div class="ttname"><a href="classWorldObject.html#a76c507a1b3adcebf2732572bc6b67fe0">WorldObject::GetMap</a></div><div class="ttdeci">Map * GetMap() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l01170">Object.h:1170</a></div></div>
<div class="ttc" id="aclassWorldObject_html_a7ef77a055df228f1e6580eb52d66cba8"><div class="ttname"><a href="classWorldObject.html#a7ef77a055df228f1e6580eb52d66cba8">WorldObject::SetMap</a></div><div class="ttdeci">void SetMap(Map *map)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8cpp_source.html#l02119">Object.cpp:2119</a></div></div>
<div class="ttc" id="aclassWorldObject_html_a8655e3e9a37c11c4da647cd496f8f497"><div class="ttname"><a href="classWorldObject.html#a8655e3e9a37c11c4da647cd496f8f497">WorldObject::GetFirstCollisionPosition</a></div><div class="ttdeci">void GetFirstCollisionPosition(Position &amp;pos, float dist, float angle)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l01034">Object.h:1034</a></div></div>
<div class="ttc" id="aclassWorldObject_html_a87ee372cff9cd5f87dc4171ad3a7efef"><div class="ttname"><a href="classWorldObject.html#a87ee372cff9cd5f87dc4171ad3a7efef">WorldObject::GetTransport</a></div><div class="ttdeci">GenericTransport * GetTransport() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l01239">Object.h:1239</a></div></div>
<div class="ttc" id="aclassWorldObject_html_a8b5bf67b1f64fee748e20a147455c141"><div class="ttname"><a href="classWorldObject.html#a8b5bf67b1f64fee748e20a147455c141">WorldObject::AddObjectToRemoveList</a></div><div class="ttdeci">void AddObjectToRemoveList()</div><div class="ttdef"><b>Definition:</b> <a href="Object_8cpp_source.html#l02161">Object.cpp:2161</a></div></div>
<div class="ttc" id="aclassWorldObject_html_ab0e25e8aff1c21bb10a1e2d2319363d1"><div class="ttname"><a href="classWorldObject.html#ab0e25e8aff1c21bb10a1e2d2319363d1">WorldObject::SetName</a></div><div class="ttdeci">void SetName(const std::string &amp;newname)</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l01060">Object.h:1060</a></div></div>
<div class="ttc" id="aclassWorldObject_html_ab6ca0a11a0d2bb8a7ec0110adb732857"><div class="ttname"><a href="classWorldObject.html#ab6ca0a11a0d2bb8a7ec0110adb732857">WorldObject::GetOrientation</a></div><div class="ttdeci">float GetOrientation() const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00976">Object.h:976</a></div></div>
<div class="ttc" id="aclassWorldObject_html_afd0488a6497cff9e233990646ec78011"><div class="ttname"><a href="classWorldObject.html#afd0488a6497cff9e233990646ec78011">WorldObject::IsWithinDistInMap</a></div><div class="ttdeci">bool IsWithinDistInMap(WorldObject const *obj, float dist2compare, bool is3D=true, bool ignorePhase=false) const</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l01100">Object.h:1100</a></div></div>
<div class="ttc" id="aclassWorldPacket_html"><div class="ttname"><a href="classWorldPacket.html">WorldPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="WorldPacket_8h_source.html#l00029">WorldPacket.h:30</a></div></div>
<div class="ttc" id="agroup__game_html_ga155b8633f243004497699c184b903901"><div class="ttname"><a href="group__game.html#ga155b8633f243004497699c184b903901">MAX_UNIT_ACTION_BAR_INDEX</a></div><div class="ttdeci">#define MAX_UNIT_ACTION_BAR_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00935">Unit.h:935</a></div></div>
<div class="ttc" id="agroup__game_html_ga671007e5c9d47b3ccb212f971e65baed"><div class="ttname"><a href="group__game.html#ga671007e5c9d47b3ccb212f971e65baed">DeathState</a></div><div class="ttdeci">DeathState</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00351">Unit.h:352</a></div></div>
<div class="ttc" id="agroup__game_html_ga6e75af6bfeb72695535b30f4523d119a"><div class="ttname"><a href="group__game.html#ga6e75af6bfeb72695535b30f4523d119a">BASE_ATTACK_TIME</a></div><div class="ttdeci">#define BASE_ATTACK_TIME</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00073">Unit.h:73</a></div></div>
<div class="ttc" id="agroup__game_html_ga9fb11c48873096dd4651aadf2e755bd9"><div class="ttname"><a href="group__game.html#ga9fb11c48873096dd4651aadf2e755bd9">CREATURE_MAX_SPELLS</a></div><div class="ttdeci">#define CREATURE_MAX_SPELLS</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00173">Unit.h:173</a></div></div>
<div class="ttc" id="agroup__game_html_gad8aa4c16328a5729560bd9a1ad0d392e"><div class="ttname"><a href="group__game.html#gad8aa4c16328a5729560bd9a1ad0d392e">ActiveStates</a></div><div class="ttdeci">ActiveStates</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00871">Unit.h:872</a></div></div>
<div class="ttc" id="agroup__game_html_gga020b49642bdc8ff68e087e36cf07fb97a7d75bb1546efb3a78c8ca3798667e2ef"><div class="ttname"><a href="group__game.html#gga020b49642bdc8ff68e087e36cf07fb97a7d75bb1546efb3a78c8ca3798667e2ef">UNIT_NPC_FLAG_NONE</a></div><div class="ttdeci">@ UNIT_NPC_FLAG_NONE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00563">Unit.h:563</a></div></div>
<div class="ttc" id="agroup__game_html_gga0ea77d345dd1f26d151dde7a688de945ac5b1e1a1d4ad6576bafaf9880e0cb7a5"><div class="ttname"><a href="group__game.html#gga0ea77d345dd1f26d151dde7a688de945ac5b1e1a1d4ad6576bafaf9880e0cb7a5">UNIT_CAN_BE_RENAMED</a></div><div class="ttdeci">@ UNIT_CAN_BE_RENAMED</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00167">Unit.h:167</a></div></div>
<div class="ttc" id="agroup__game_html_gga0ea77d345dd1f26d151dde7a688de945ad71ccc862237150755b91ae8132975b5"><div class="ttname"><a href="group__game.html#gga0ea77d345dd1f26d151dde7a688de945ad71ccc862237150755b91ae8132975b5">UNIT_CAN_BE_ABANDONED</a></div><div class="ttdeci">@ UNIT_CAN_BE_ABANDONED</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00168">Unit.h:168</a></div></div>
<div class="ttc" id="agroup__game_html_gga1268448e502eeef0e503fe5e80acce55a7f509c84071a2f11fb94c93134a1b0f9"><div class="ttname"><a href="group__game.html#gga1268448e502eeef0e503fe5e80acce55a7f509c84071a2f11fb94c93134a1b0f9">UNIT_BYTES_2_OFFSET_PVP_FLAG</a></div><div class="ttdeci">@ UNIT_BYTES_2_OFFSET_PVP_FLAG</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00096">Unit.h:96</a></div></div>
<div class="ttc" id="agroup__game_html_gga1268448e502eeef0e503fe5e80acce55af1e0565726ef7b1ef7785376052aa6c1"><div class="ttname"><a href="group__game.html#gga1268448e502eeef0e503fe5e80acce55af1e0565726ef7b1ef7785376052aa6c1">UNIT_BYTES_2_OFFSET_PET_FLAGS</a></div><div class="ttdeci">@ UNIT_BYTES_2_OFFSET_PET_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00097">Unit.h:97</a></div></div>
<div class="ttc" id="agroup__game_html_gga1c9606f347ccaa6eee4d1036b4bc5299a07bebc15b9616c108f18532079cb9460"><div class="ttname"><a href="group__game.html#gga1c9606f347ccaa6eee4d1036b4bc5299a07bebc15b9616c108f18532079cb9460">UNIT_BYTES_0_OFFSET_POWER_TYPE</a></div><div class="ttdeci">@ UNIT_BYTES_0_OFFSET_POWER_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00082">Unit.h:82</a></div></div>
<div class="ttc" id="agroup__game_html_gga1c9606f347ccaa6eee4d1036b4bc5299abf848159b5014516f03305c803b26741"><div class="ttname"><a href="group__game.html#gga1c9606f347ccaa6eee4d1036b4bc5299abf848159b5014516f03305c803b26741">UNIT_BYTES_0_OFFSET_GENDER</a></div><div class="ttdeci">@ UNIT_BYTES_0_OFFSET_GENDER</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00081">Unit.h:81</a></div></div>
<div class="ttc" id="agroup__game_html_gga1c9606f347ccaa6eee4d1036b4bc5299af354d7bb7fe5f4ab0fca635363e11d40"><div class="ttname"><a href="group__game.html#gga1c9606f347ccaa6eee4d1036b4bc5299af354d7bb7fe5f4ab0fca635363e11d40">UNIT_BYTES_0_OFFSET_CLASS</a></div><div class="ttdeci">@ UNIT_BYTES_0_OFFSET_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00080">Unit.h:80</a></div></div>
<div class="ttc" id="agroup__game_html_gga4961ced707837d09157e8296ab8a2507a353ec7972b73e76751349c9abe91e80b"><div class="ttname"><a href="group__game.html#gga4961ced707837d09157e8296ab8a2507a353ec7972b73e76751349c9abe91e80b">MINDAMAGE</a></div><div class="ttdeci">@ MINDAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00262">Unit.h:262</a></div></div>
<div class="ttc" id="agroup__game_html_gga4961ced707837d09157e8296ab8a2507a5e4c68960c0bd10b439817ec3f1112ca"><div class="ttname"><a href="group__game.html#gga4961ced707837d09157e8296ab8a2507a5e4c68960c0bd10b439817ec3f1112ca">MAXDAMAGE</a></div><div class="ttdeci">@ MAXDAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00264">Unit.h:263</a></div></div>
<div class="ttc" id="agroup__game_html_gga4c5336cd4be5f0162bd4874b0a1e5bdea0d5ec0678c61e8de24b4e3d731bd4716"><div class="ttname"><a href="group__game.html#gga4c5336cd4be5f0162bd4874b0a1e5bdea0d5ec0678c61e8de24b4e3d731bd4716">UNIT_MOD_ARMOR</a></div><div class="ttdeci">@ UNIT_MOD_ARMOR</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00313">Unit.h:313</a></div></div>
<div class="ttc" id="agroup__game_html_gga5656c6dd354cdc76da16094dd6f96724a1b9025dc7f8331f6ca9fd0cfce1b0ae9"><div class="ttname"><a href="group__game.html#gga5656c6dd354cdc76da16094dd6f96724a1b9025dc7f8331f6ca9fd0cfce1b0ae9">ACTION_BAR_INDEX_PET_SPELL_START</a></div><div class="ttdeci">@ ACTION_BAR_INDEX_PET_SPELL_START</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00930">Unit.h:930</a></div></div>
<div class="ttc" id="agroup__game_html_gga5656c6dd354cdc76da16094dd6f96724a56eab700626db82e8012fc8daac5cee9"><div class="ttname"><a href="group__game.html#gga5656c6dd354cdc76da16094dd6f96724a56eab700626db82e8012fc8daac5cee9">ACTION_BAR_INDEX_PET_SPELL_END</a></div><div class="ttdeci">@ ACTION_BAR_INDEX_PET_SPELL_END</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00931">Unit.h:931</a></div></div>
<div class="ttc" id="agroup__game_html_gga5656c6dd354cdc76da16094dd6f96724a64eaabebc81e8d02513089d4d5591264"><div class="ttname"><a href="group__game.html#gga5656c6dd354cdc76da16094dd6f96724a64eaabebc81e8d02513089d4d5591264">ACTION_BAR_INDEX_END</a></div><div class="ttdeci">@ ACTION_BAR_INDEX_END</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00932">Unit.h:932</a></div></div>
<div class="ttc" id="agroup__game_html_gga5656c6dd354cdc76da16094dd6f96724ac963f447654b9785c3236c79ea310b09"><div class="ttname"><a href="group__game.html#gga5656c6dd354cdc76da16094dd6f96724ac963f447654b9785c3236c79ea310b09">ACTION_BAR_INDEX_START</a></div><div class="ttdeci">@ ACTION_BAR_INDEX_START</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00929">Unit.h:929</a></div></div>
<div class="ttc" id="agroup__game_html_gga671007e5c9d47b3ccb212f971e65baeda067c6778cd7570678dc70dc2e8b09e68"><div class="ttname"><a href="group__game.html#gga671007e5c9d47b3ccb212f971e65baeda067c6778cd7570678dc70dc2e8b09e68">CORPSE</a></div><div class="ttdeci">@ CORPSE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00355">Unit.h:355</a></div></div>
<div class="ttc" id="agroup__game_html_gga671007e5c9d47b3ccb212f971e65baeda4f34c5c191d6e0d028ca831b6c0b1571"><div class="ttname"><a href="group__game.html#gga671007e5c9d47b3ccb212f971e65baeda4f34c5c191d6e0d028ca831b6c0b1571">ALIVE</a></div><div class="ttdeci">@ ALIVE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00353">Unit.h:353</a></div></div>
<div class="ttc" id="agroup__game_html_gga671007e5c9d47b3ccb212f971e65baedab1727b82509eb59005a3b6b60107f51b"><div class="ttname"><a href="group__game.html#gga671007e5c9d47b3ccb212f971e65baedab1727b82509eb59005a3b6b60107f51b">JUST_DIED</a></div><div class="ttdeci">@ JUST_DIED</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00354">Unit.h:354</a></div></div>
<div class="ttc" id="agroup__game_html_gga9a4f502870485ba32e759067c9adca94a3df9358887fb26facbbb5b619d6ccab3"><div class="ttname"><a href="group__game.html#gga9a4f502870485ba32e759067c9adca94a3df9358887fb26facbbb5b619d6ccab3">AURA_REMOVE_BY_DELETE</a></div><div class="ttdeci">@ AURA_REMOVE_BY_DELETE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00280">Unit.h:280</a></div></div>
<div class="ttc" id="agroup__game_html_ggaa21edecdaa2e077b2b87bbe5f2b2e7eea6e506f81d8257be9b031ecaf9d9922d1"><div class="ttname"><a href="group__game.html#ggaa21edecdaa2e077b2b87bbe5f2b2e7eea6e506f81d8257be9b031ecaf9d9922d1">BASE_VALUE</a></div><div class="ttdeci">@ BASE_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00253">Unit.h:253</a></div></div>
<div class="ttc" id="agroup__game_html_ggab7f73bef2e8c2d6be5e65b55062f3ceba72a383a4d8b9eacc45b04550148927f0"><div class="ttname"><a href="group__game.html#ggab7f73bef2e8c2d6be5e65b55062f3ceba72a383a4d8b9eacc45b04550148927f0">SHEATH_STATE_MELEE</a></div><div class="ttdeci">@ SHEATH_STATE_MELEE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00145">Unit.h:145</a></div></div>
<div class="ttc" id="agroup__game_html_ggad8aa4c16328a5729560bd9a1ad0d392ea24d8db1d523431e423ef8354296ed162"><div class="ttname"><a href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea24d8db1d523431e423ef8354296ed162">ACT_DECIDE</a></div><div class="ttdeci">@ ACT_DECIDE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00879">Unit.h:878</a></div></div>
<div class="ttc" id="agroup__game_html_ggad8aa4c16328a5729560bd9a1ad0d392ea60dbce51e005270fd5bc183457883952"><div class="ttname"><a href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ea60dbce51e005270fd5bc183457883952">ACT_ENABLED</a></div><div class="ttdeci">@ ACT_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00875">Unit.h:875</a></div></div>
<div class="ttc" id="agroup__game_html_ggad8aa4c16328a5729560bd9a1ad0d392ead917b891f555940a135b2634d2e72b3b"><div class="ttname"><a href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392ead917b891f555940a135b2634d2e72b3b">ACT_PASSIVE</a></div><div class="ttdeci">@ ACT_PASSIVE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00873">Unit.h:873</a></div></div>
<div class="ttc" id="agroup__game_html_ggad8aa4c16328a5729560bd9a1ad0d392eadeaf81cdbd16fe7cfbb9afd2ae17cc17"><div class="ttname"><a href="group__game.html#ggad8aa4c16328a5729560bd9a1ad0d392eadeaf81cdbd16fe7cfbb9afd2ae17cc17">ACT_DISABLED</a></div><div class="ttdeci">@ ACT_DISABLED</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00874">Unit.h:874</a></div></div>
<div class="ttc" id="agroup__game_html_ggadfd426d7c800ae9b37ca91f5f2fd5d01a2513b9adc3e0167e38ec3835d5d3e5bf"><div class="ttname"><a href="group__game.html#ggadfd426d7c800ae9b37ca91f5f2fd5d01a2513b9adc3e0167e38ec3835d5d3e5bf">UNIT_BYTE2_FLAG_AURAS</a></div><div class="ttdeci">@ UNIT_BYTE2_FLAG_AURAS</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00158">Unit.h:158</a></div></div>
<div class="ttc" id="agroup__game_html_ggafaf72688a238d4ba16ba2ae1444cd552a20d03528858479b31941a42820257eeb"><div class="ttname"><a href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552a20d03528858479b31941a42820257eeb">UNIT_FLAG_STUNNED</a></div><div class="ttdeci">@ UNIT_FLAG_STUNNED</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00521">Unit.h:521</a></div></div>
<div class="ttc" id="agroup__game_html_ggafaf72688a238d4ba16ba2ae1444cd552a9d7b684ff2b06e94dffa670b96f295cb"><div class="ttname"><a href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552a9d7b684ff2b06e94dffa670b96f295cb">UNIT_FLAG_RENAME</a></div><div class="ttdeci">@ UNIT_FLAG_RENAME</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00507">Unit.h:507</a></div></div>
<div class="ttc" id="agroup__game_html_ggafaf72688a238d4ba16ba2ae1444cd552ac75aa2eacc0e809ae582c85d245c1e4c"><div class="ttname"><a href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552ac75aa2eacc0e809ae582c85d245c1e4c">UNIT_FLAG_PLAYER_CONTROLLED</a></div><div class="ttdeci">@ UNIT_FLAG_PLAYER_CONTROLLED</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00506">Unit.h:506</a></div></div>
<div class="ttc" id="agroup__game_html_ggafaf72688a238d4ba16ba2ae1444cd552ad990ec1dc8c9d2fd611f145e9f752885"><div class="ttname"><a href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552ad990ec1dc8c9d2fd611f145e9f752885">UNIT_FLAG_SKINNABLE</a></div><div class="ttdeci">@ UNIT_FLAG_SKINNABLE</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00529">Unit.h:529</a></div></div>
<div class="ttc" id="agroup__game_html_ggafaf72688a238d4ba16ba2ae1444cd552af17c67cf54daaed77a829fbeacec801c"><div class="ttname"><a href="group__game.html#ggafaf72688a238d4ba16ba2ae1444cd552af17c67cf54daaed77a829fbeacec801c">UNIT_FLAG_SPAWNING</a></div><div class="ttdeci">@ UNIT_FLAG_SPAWNING</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00504">Unit.h:504</a></div></div>
<div class="ttc" id="agroup__game_html_ggafd9f193edd86cc61d3f2413e3a1eaef5a9e9c750355ba14f30bc29800eb80bcb0"><div class="ttname"><a href="group__game.html#ggafd9f193edd86cc61d3f2413e3a1eaef5a9e9c750355ba14f30bc29800eb80bcb0">UNIT_FLAG2_REGENERATE_POWER</a></div><div class="ttdeci">@ UNIT_FLAG2_REGENERATE_POWER</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00551">Unit.h:551</a></div></div>
<div class="ttc" id="agroup__mangosd_html_ga4af16b54c7219346503d4c430d955f41"><div class="ttname"><a href="group__mangosd.html#ga4af16b54c7219346503d4c430d955f41">CharacterDatabase</a></div><div class="ttdeci">DatabaseType CharacterDatabase</div><div class="ttdoc">Accessor to the character database.</div><div class="ttdef"><b>Definition:</b> <a href="mangosd_2Main_8cpp_source.html#l00062">mangosd/Main.cpp:62</a></div></div>
<div class="ttc" id="agroup__u2w_html_ga8c9f2cb96962bbba77bd38e8bd014659"><div class="ttname"><a href="group__u2w.html#ga8c9f2cb96962bbba77bd38e8bd014659">MAX_DECLINED_NAME_CASES</a></div><div class="ttdeci">#define MAX_DECLINED_NAME_CASES</div><div class="ttdef"><b>Definition:</b> <a href="WorldSession_8h_source.html#l00178">WorldSession.h:178</a></div></div>
<div class="ttc" id="agroup__u2w_html_ggabeeee4622d9285fa92e9b61857002caca5bdefd91f137c6e851caac3a61073105"><div class="ttname"><a href="group__u2w.html#ggabeeee4622d9285fa92e9b61857002caca5bdefd91f137c6e851caac3a61073105">SMSG_PET_REMOVED_SPELL</a></div><div class="ttdeci">@ SMSG_PET_REMOVED_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="Opcodes_8h_source.html#l01215">Opcodes.h:1215</a></div></div>
<div class="ttc" id="agroup__u2w_html_ggabeeee4622d9285fa92e9b61857002caca7297689e6a8523d73cc84f5a9b6333f0"><div class="ttname"><a href="group__u2w.html#ggabeeee4622d9285fa92e9b61857002caca7297689e6a8523d73cc84f5a9b6333f0">SMSG_SPELL_COOLDOWN</a></div><div class="ttdeci">@ SMSG_SPELL_COOLDOWN</div><div class="ttdef"><b>Definition:</b> <a href="Opcodes_8h_source.html#l00345">Opcodes.h:345</a></div></div>
<div class="ttc" id="agroup__u2w_html_ggabeeee4622d9285fa92e9b61857002cacaef187d98019f6d590de8d7d195577ee1"><div class="ttname"><a href="group__u2w.html#ggabeeee4622d9285fa92e9b61857002cacaef187d98019f6d590de8d7d195577ee1">SMSG_PET_MODE</a></div><div class="ttdeci">@ SMSG_PET_MODE</div><div class="ttdef"><b>Definition:</b> <a href="Opcodes_8h_source.html#l00415">Opcodes.h:415</a></div></div>
<div class="ttc" id="agroup__u2w_html_ggabeeee4622d9285fa92e9b61857002cacaf29344d01f8f868912f67c8dbeddbd51"><div class="ttname"><a href="group__u2w.html#ggabeeee4622d9285fa92e9b61857002cacaf29344d01f8f868912f67c8dbeddbd51">SMSG_PET_LEARNED_SPELL</a></div><div class="ttdeci">@ SMSG_PET_LEARNED_SPELL</div><div class="ttdef"><b>Definition:</b> <a href="Opcodes_8h_source.html#l01214">Opcodes.h:1214</a></div></div>
<div class="ttc" id="agroup__world_html_ga05dfb35c344e5b947a19e4284e7f5fa7"><div class="ttname"><a href="group__world.html#ga05dfb35c344e5b947a19e4284e7f5fa7">sWorld</a></div><div class="ttdeci">#define sWorld</div><div class="ttdef"><b>Definition:</b> <a href="World_8h_source.html#l00832">World.h:832</a></div></div>
<div class="ttc" id="agroup__world_html_gga89a532a320ff8bd5866836fee5541232a7baa2c71b7b249a1cfdc13d4e8da705a"><div class="ttname"><a href="group__world.html#gga89a532a320ff8bd5866836fee5541232a7baa2c71b7b249a1cfdc13d4e8da705a">CONFIG_UINT32_MAX_PLAYER_LEVEL</a></div><div class="ttdeci">@ CONFIG_UINT32_MAX_PLAYER_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="World_8h_source.html#l00119">World.h:119</a></div></div>
<div class="ttc" id="agroup__world_html_ggad7288d27ab8a1132a5f30148c227f2bea00fd6fc10eaee642720e0c1e21c608d8"><div class="ttname"><a href="group__world.html#ggad7288d27ab8a1132a5f30148c227f2bea00fd6fc10eaee642720e0c1e21c608d8">CONFIG_FLOAT_RATE_HEALTH</a></div><div class="ttdeci">@ CONFIG_FLOAT_RATE_HEALTH</div><div class="ttdef"><b>Definition:</b> <a href="World_8h_source.html#l00244">World.h:244</a></div></div>
<div class="ttc" id="agroup__world_html_ggad7288d27ab8a1132a5f30148c227f2bea818b176f2651e6f11e6f8a841e271e31"><div class="ttname"><a href="group__world.html#ggad7288d27ab8a1132a5f30148c227f2bea818b176f2651e6f11e6f8a841e271e31">CONFIG_FLOAT_RATE_PET_XP_KILL</a></div><div class="ttdeci">@ CONFIG_FLOAT_RATE_PET_XP_KILL</div><div class="ttdef"><b>Definition:</b> <a href="World_8h_source.html#l00263">World.h:263</a></div></div>
<div class="ttc" id="anamespaceByteConverter_html_a6177d7ac84a4ea6819c57a124345540e"><div class="ttname"><a href="namespaceByteConverter.html#a6177d7ac84a4ea6819c57a124345540e">ByteConverter::apply</a></div><div class="ttdeci">void apply(T *val)</div><div class="ttdef"><b>Definition:</b> <a href="ByteConverter_8h_source.html#l00042">ByteConverter.h:42</a></div></div>
<div class="ttc" id="astructCharmInfo_html"><div class="ttname"><a href="structCharmInfo.html">CharmInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00937">Unit.h:938</a></div></div>
<div class="ttc" id="astructCharmInfo_html_a2d02468db5b8d79e794a23d6ba1038d4"><div class="ttname"><a href="structCharmInfo.html#a2d02468db5b8d79e794a23d6ba1038d4">CharmInfo::GetPetNumber</a></div><div class="ttdeci">uint32 GetPetNumber() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00946">Unit.h:946</a></div></div>
<div class="ttc" id="astructCharmInfo_html_a2f3eef517ee265187d0f65f625588343"><div class="ttname"><a href="structCharmInfo.html#a2f3eef517ee265187d0f65f625588343">CharmInfo::LoadPetActionBar</a></div><div class="ttdeci">void LoadPetActionBar(const std::string &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11864">Unit.cpp:11864</a></div></div>
<div class="ttc" id="astructCharmInfo_html_a35e05833d2c56b749ef5b57ce6a1cca0"><div class="ttname"><a href="structCharmInfo.html#a35e05833d2c56b749ef5b57ce6a1cca0">CharmInfo::AddSpellToActionBar</a></div><div class="ttdeci">bool AddSpellToActionBar(uint32 spellId, ActiveStates newstate=ACT_DECIDE, uint8 forceSlot=255)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11765">Unit.cpp:11765</a></div></div>
<div class="ttc" id="astructCharmInfo_html_a4951b83a10c85f36f25f2236983a51a3"><div class="ttname"><a href="structCharmInfo.html#a4951b83a10c85f36f25f2236983a51a3">CharmInfo::SetActionBar</a></div><div class="ttdeci">void SetActionBar(uint8 index, uint32 spellOrAction, ActiveStates type)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00968">Unit.h:968</a></div></div>
<div class="ttc" id="astructCharmInfo_html_a684f1b79808da046218775009189b2e8"><div class="ttname"><a href="structCharmInfo.html#a684f1b79808da046218775009189b2e8">CharmInfo::SetPetNumber</a></div><div class="ttdeci">void SetPetNumber(uint32 petnumber, bool statwindow)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11833">Unit.cpp:11833</a></div></div>
<div class="ttc" id="astructCharmInfo_html_a6f348d8d362564c7a4d150517dccc369"><div class="ttname"><a href="structCharmInfo.html#a6f348d8d362564c7a4d150517dccc369">CharmInfo::InitPetActionBar</a></div><div class="ttdeci">void InitPetActionBar()</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11610">Unit.cpp:11610</a></div></div>
<div class="ttc" id="astructCharmInfo_html_a7f3444689181ee86e31003f766ea0a32"><div class="ttname"><a href="structCharmInfo.html#a7f3444689181ee86e31003f766ea0a32">CharmInfo::RemoveSpellFromActionBar</a></div><div class="ttdeci">bool RemoveSpellFromActionBar(uint32 spellId)</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8cpp_source.html#l11804">Unit.cpp:11804</a></div></div>
<div class="ttc" id="astructCharmInfo_html_a9efb3e23e5e9230eef461da27f3e1da6"><div class="ttname"><a href="structCharmInfo.html#a9efb3e23e5e9230eef461da27f3e1da6">CharmInfo::GetActionBarEntry</a></div><div class="ttdeci">UnitActionBarEntry const  * GetActionBarEntry(uint8 index) const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00972">Unit.h:972</a></div></div>
<div class="ttc" id="astructCreatureClassLvlStats_html"><div class="ttname"><a href="structCreatureClassLvlStats.html">CreatureClassLvlStats</a></div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00302">Creature.h:303</a></div></div>
<div class="ttc" id="astructCreatureCreatePos_html"><div class="ttname"><a href="structCreatureCreatePos.html">CreatureCreatePos</a></div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00496">Creature.h:497</a></div></div>
<div class="ttc" id="astructCreatureCreatePos_html_a4d528a6ab8e946056ee87901b9302835"><div class="ttname"><a href="structCreatureCreatePos.html#a4d528a6ab8e946056ee87901b9302835">CreatureCreatePos::Relocate</a></div><div class="ttdeci">bool Relocate(Creature *cr) const</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l00126">Creature.cpp:126</a></div></div>
<div class="ttc" id="astructCreatureCreatePos_html_a7482034b9612ec1b155cceffc344608a"><div class="ttname"><a href="structCreatureCreatePos.html#a7482034b9612ec1b155cceffc344608a">CreatureCreatePos::GetMap</a></div><div class="ttdeci">Map * GetMap() const</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00507">Creature.h:507</a></div></div>
<div class="ttc" id="astructCreatureCreatePos_html_ac8f78af007314b6d27e6f8f2d0d6f409"><div class="ttname"><a href="structCreatureCreatePos.html#ac8f78af007314b6d27e6f8f2d0d6f409">CreatureCreatePos::GetPhaseMask</a></div><div class="ttdeci">uint32 GetPhaseMask() const</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00508">Creature.h:508</a></div></div>
<div class="ttc" id="astructCreatureCreatePos_html_ae48cf5213dde3a44bedc5a604e097323"><div class="ttname"><a href="structCreatureCreatePos.html#ae48cf5213dde3a44bedc5a604e097323">CreatureCreatePos::SelectFinalPoint</a></div><div class="ttdeci">void SelectFinalPoint(Creature *cr, bool staticSpawn)</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8cpp_source.html#l00108">Creature.cpp:108</a></div></div>
<div class="ttc" id="astructCreatureFamilyEntry_html"><div class="ttname"><a href="structCreatureFamilyEntry.html">CreatureFamilyEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l00849">DBCStructure.h:850</a></div></div>
<div class="ttc" id="astructCreatureFamilyEntry_html_a23ca0ae7c45790a24f58546970194abf"><div class="ttname"><a href="structCreatureFamilyEntry.html#a23ca0ae7c45790a24f58546970194abf">CreatureFamilyEntry::maxScale</a></div><div class="ttdeci">float maxScale</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l00854">DBCStructure.h:854</a></div></div>
<div class="ttc" id="astructCreatureFamilyEntry_html_a3eacdd8639c6dd25dbd3205a58860cf9"><div class="ttname"><a href="structCreatureFamilyEntry.html#a3eacdd8639c6dd25dbd3205a58860cf9">CreatureFamilyEntry::minScale</a></div><div class="ttdeci">float minScale</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l00852">DBCStructure.h:852</a></div></div>
<div class="ttc" id="astructCreatureFamilyEntry_html_a49d9d7847cc4d54891d83166eb277740"><div class="ttname"><a href="structCreatureFamilyEntry.html#a49d9d7847cc4d54891d83166eb277740">CreatureFamilyEntry::minScaleLevel</a></div><div class="ttdeci">uint32 minScaleLevel</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l00853">DBCStructure.h:853</a></div></div>
<div class="ttc" id="astructCreatureFamilyEntry_html_a4d9dd8baa3f7981633248513bb25f4ca"><div class="ttname"><a href="structCreatureFamilyEntry.html#a4d9dd8baa3f7981633248513bb25f4ca">CreatureFamilyEntry::petFoodMask</a></div><div class="ttdeci">uint32 petFoodMask</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l00857">DBCStructure.h:857</a></div></div>
<div class="ttc" id="astructCreatureFamilyEntry_html_a802000cefb6c4d357edfc45cc291e21e"><div class="ttname"><a href="structCreatureFamilyEntry.html#a802000cefb6c4d357edfc45cc291e21e">CreatureFamilyEntry::petTalentType</a></div><div class="ttdeci">int32 petTalentType</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l00858">DBCStructure.h:858</a></div></div>
<div class="ttc" id="astructCreatureFamilyEntry_html_a84ba697182123cb3e7dd3ba07241e971"><div class="ttname"><a href="structCreatureFamilyEntry.html#a84ba697182123cb3e7dd3ba07241e971">CreatureFamilyEntry::ID</a></div><div class="ttdeci">uint32 ID</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l00851">DBCStructure.h:851</a></div></div>
<div class="ttc" id="astructCreatureFamilyEntry_html_ad5d722d74bc08d4de3edd54c2f24addb"><div class="ttname"><a href="structCreatureFamilyEntry.html#ad5d722d74bc08d4de3edd54c2f24addb">CreatureFamilyEntry::maxScaleLevel</a></div><div class="ttdeci">uint32 maxScaleLevel</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l00855">DBCStructure.h:855</a></div></div>
<div class="ttc" id="astructCreatureInfo_html"><div class="ttname"><a href="structCreatureInfo.html">CreatureInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00087">Creature.h:88</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a0536b06a2da3275f15af044fe84fffc4"><div class="ttname"><a href="structCreatureInfo.html#a0536b06a2da3275f15af044fe84fffc4">CreatureInfo::ArmorMultiplier</a></div><div class="ttdeci">float ArmorMultiplier</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00129">Creature.h:129</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a105ff440597545ce970a6cbca63e2eb7"><div class="ttname"><a href="structCreatureInfo.html#a105ff440597545ce970a6cbca63e2eb7">CreatureInfo::ResistanceShadow</a></div><div class="ttdeci">int32 ResistanceShadow</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00158">Creature.h:158</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a2462d7479a796828ff9b4cf4b9b5a11a"><div class="ttname"><a href="structCreatureInfo.html#a2462d7479a796828ff9b4cf4b9b5a11a">CreatureInfo::MeleeBaseAttackTime</a></div><div class="ttdeci">uint32 MeleeBaseAttackTime</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00142">Creature.h:142</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a2b7a22496d2d170593af140e9294ccd8"><div class="ttname"><a href="structCreatureInfo.html#a2b7a22496d2d170593af140e9294ccd8">CreatureInfo::MinMeleeDmg</a></div><div class="ttdeci">float MinMeleeDmg</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00135">Creature.h:135</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a2d6ea83588e36f5dbd6f9ea473edf749"><div class="ttname"><a href="structCreatureInfo.html#a2d6ea83588e36f5dbd6f9ea473edf749">CreatureInfo::HealthMultiplier</a></div><div class="ttdeci">float HealthMultiplier</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00125">Creature.h:125</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a33e5707c3201ab0ef5296a47c6f2ceae"><div class="ttname"><a href="structCreatureInfo.html#a33e5707c3201ab0ef5296a47c6f2ceae">CreatureInfo::ResistanceArcane</a></div><div class="ttdeci">int32 ResistanceArcane</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00159">Creature.h:159</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a3e8132a98e9bb6143023c97e72b5a739"><div class="ttname"><a href="structCreatureInfo.html#a3e8132a98e9bb6143023c97e72b5a739">CreatureInfo::MinLevel</a></div><div class="ttdeci">uint32 MinLevel</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00093">Creature.h:93</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a3f983a5b1595210d7c4464191f1f2827"><div class="ttname"><a href="structCreatureInfo.html#a3f983a5b1595210d7c4464191f1f2827">CreatureInfo::UnitClass</a></div><div class="ttdeci">uint32 UnitClass</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00122">Creature.h:122</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a43f5d0804edaca3c5f3ab268c2ce5491"><div class="ttname"><a href="structCreatureInfo.html#a43f5d0804edaca3c5f3ab268c2ce5491">CreatureInfo::ResistanceHoly</a></div><div class="ttdeci">int32 ResistanceHoly</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00154">Creature.h:154</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a4f708c2c90352dbcfd9bb23cb66238b3"><div class="ttname"><a href="structCreatureInfo.html#a4f708c2c90352dbcfd9bb23cb66238b3">CreatureInfo::isTameable</a></div><div class="ttdeci">bool isTameable(bool exotic) const</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00205">Creature.h:205</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a53cf74a73fe2f7e0ac1e925d3ab8ec1d"><div class="ttname"><a href="structCreatureInfo.html#a53cf74a73fe2f7e0ac1e925d3ab8ec1d">CreatureInfo::DamageMultiplier</a></div><div class="ttdeci">float DamageMultiplier</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00127">Creature.h:127</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a55f9e7b8189a5de4ef01d0787b161801"><div class="ttname"><a href="structCreatureInfo.html#a55f9e7b8189a5de4ef01d0787b161801">CreatureInfo::Family</a></div><div class="ttdeci">uint32 Family</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00099">Creature.h:99</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a63b19d1dcb983422d0b43aba7aaaf047"><div class="ttname"><a href="structCreatureInfo.html#a63b19d1dcb983422d0b43aba7aaaf047">CreatureInfo::PetSpellDataId</a></div><div class="ttdeci">uint32 PetSpellDataId</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00160">Creature.h:160</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a71161eb15a125f98e11d7e5daa84b4ca"><div class="ttname"><a href="structCreatureInfo.html#a71161eb15a125f98e11d7e5daa84b4ca">CreatureInfo::MaxMeleeDmg</a></div><div class="ttdeci">float MaxMeleeDmg</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00136">Creature.h:136</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a760e58211be07f296e6371f3ee2f6d07"><div class="ttname"><a href="structCreatureInfo.html#a760e58211be07f296e6371f3ee2f6d07">CreatureInfo::Expansion</a></div><div class="ttdeci">int32 Expansion</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00124">Creature.h:124</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a7ef66e7ee81c4ee78a1d48e06e17eec5"><div class="ttname"><a href="structCreatureInfo.html#a7ef66e7ee81c4ee78a1d48e06e17eec5">CreatureInfo::ResistanceNature</a></div><div class="ttdeci">int32 ResistanceNature</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00156">Creature.h:156</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a8dc1430294293bea573b63171ec1369e"><div class="ttname"><a href="structCreatureInfo.html#a8dc1430294293bea573b63171ec1369e">CreatureInfo::Rank</a></div><div class="ttdeci">uint32 Rank</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00123">Creature.h:123</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_a9a144b4f19fa41dd20ea542e6d913808"><div class="ttname"><a href="structCreatureInfo.html#a9a144b4f19fa41dd20ea542e6d913808">CreatureInfo::Entry</a></div><div class="ttdeci">uint32 Entry</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00089">Creature.h:89</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_abf2c3bb394e97dd1108820ae36b0c06b"><div class="ttname"><a href="structCreatureInfo.html#abf2c3bb394e97dd1108820ae36b0c06b">CreatureInfo::ResistanceFire</a></div><div class="ttdeci">int32 ResistanceFire</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00155">Creature.h:155</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_ac95af50873b9388231e286e47a47d63b"><div class="ttname"><a href="structCreatureInfo.html#ac95af50873b9388231e286e47a47d63b">CreatureInfo::DamageVariance</a></div><div class="ttdeci">float DamageVariance</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00128">Creature.h:128</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_aceb233a74bbf2d2bcad51c15c2b82198"><div class="ttname"><a href="structCreatureInfo.html#aceb233a74bbf2d2bcad51c15c2b82198">CreatureInfo::PowerMultiplier</a></div><div class="ttdeci">float PowerMultiplier</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00126">Creature.h:126</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_ad6a14a407ef572de310d03f2315386e7"><div class="ttname"><a href="structCreatureInfo.html#ad6a14a407ef572de310d03f2315386e7">CreatureInfo::CreatureType</a></div><div class="ttdeci">uint32 CreatureType</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00100">Creature.h:100</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_add8ade8c4f067a33e677d2eace48edaf"><div class="ttname"><a href="structCreatureInfo.html#add8ade8c4f067a33e677d2eace48edaf">CreatureInfo::ResistanceFrost</a></div><div class="ttdeci">int32 ResistanceFrost</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00157">Creature.h:157</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_ae1870fa889cda87d0ffb15de526d0e3d"><div class="ttname"><a href="structCreatureInfo.html#ae1870fa889cda87d0ffb15de526d0e3d">CreatureInfo::RangedBaseAttackTime</a></div><div class="ttdeci">uint32 RangedBaseAttackTime</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00143">Creature.h:143</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_ae52c39a94d77b11abdf1f93028bf9937"><div class="ttname"><a href="structCreatureInfo.html#ae52c39a94d77b11abdf1f93028bf9937">CreatureInfo::MaxLevel</a></div><div class="ttdeci">uint32 MaxLevel</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00094">Creature.h:94</a></div></div>
<div class="ttc" id="astructCreatureInfo_html_afc90efba3cd9b2c8bb34ddacc04a5a02"><div class="ttname"><a href="structCreatureInfo.html#afc90efba3cd9b2c8bb34ddacc04a5a02">CreatureInfo::DamageSchool</a></div><div class="ttdeci">uint32 DamageSchool</div><div class="ttdef"><b>Definition:</b> <a href="Creature_8h_source.html#l00144">Creature.h:144</a></div></div>
<div class="ttc" id="astructCreatureSpellList_html"><div class="ttname"><a href="structCreatureSpellList.html">CreatureSpellList</a></div><div class="ttdef"><b>Definition:</b> <a href="CreatureSpellList_8h_source.html#l00083">CreatureSpellList.h:84</a></div></div>
<div class="ttc" id="astructCreatureSpellList_html_a208f0daaf98b495e0bcc7151f0af6c0a"><div class="ttname"><a href="structCreatureSpellList.html#a208f0daaf98b495e0bcc7151f0af6c0a">CreatureSpellList::Spells</a></div><div class="ttdeci">std::map&lt; uint32, CreatureSpellListSpell &gt; Spells</div><div class="ttdef"><b>Definition:</b> <a href="CreatureSpellList_8h_source.html#l00090">CreatureSpellList.h:90</a></div></div>
<div class="ttc" id="astructDeclinedName_html"><div class="ttname"><a href="structDeclinedName.html">DeclinedName</a></div><div class="ttdef"><b>Definition:</b> <a href="WorldSession_8h_source.html#l00180">WorldSession.h:181</a></div></div>
<div class="ttc" id="astructDeclinedName_html_acda589ff9e0fdb0a813707736191d049"><div class="ttname"><a href="structDeclinedName.html#acda589ff9e0fdb0a813707736191d049">DeclinedName::name</a></div><div class="ttdeci">std::string name[MAX_DECLINED_NAME_CASES]</div><div class="ttdef"><b>Definition:</b> <a href="WorldSession_8h_source.html#l00182">WorldSession.h:182</a></div></div>
<div class="ttc" id="astructDoPetLearnSpell_html"><div class="ttname"><a href="structDoPetLearnSpell.html">DoPetLearnSpell</a></div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02350">Pet.cpp:2351</a></div></div>
<div class="ttc" id="astructDoPetLearnSpell_html_a1258e11dc26b93a83ef6b32706eddc6e"><div class="ttname"><a href="structDoPetLearnSpell.html#a1258e11dc26b93a83ef6b32706eddc6e">DoPetLearnSpell::pet</a></div><div class="ttdeci">Pet &amp; pet</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02354">Pet.cpp:2354</a></div></div>
<div class="ttc" id="astructDoPetLearnSpell_html_a5816e38f99374b254ede21f71d6bf013"><div class="ttname"><a href="structDoPetLearnSpell.html#a5816e38f99374b254ede21f71d6bf013">DoPetLearnSpell::DoPetLearnSpell</a></div><div class="ttdeci">DoPetLearnSpell(Pet &amp;_pet)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02352">Pet.cpp:2352</a></div></div>
<div class="ttc" id="astructDoPetLearnSpell_html_acc029c3bcaf3adcb9c42497268e8a631"><div class="ttname"><a href="structDoPetLearnSpell.html#acc029c3bcaf3adcb9c42497268e8a631">DoPetLearnSpell::operator()</a></div><div class="ttdeci">void operator()(uint32 spell_id)</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8cpp_source.html#l02353">Pet.cpp:2353</a></div></div>
<div class="ttc" id="astructItemPrototype_html"><div class="ttname"><a href="structItemPrototype.html">ItemPrototype</a></div><div class="ttdef"><b>Definition:</b> <a href="ItemPrototype_8h_source.html#l00589">ItemPrototype.h:590</a></div></div>
<div class="ttc" id="astructItemPrototype_html_a8b500820accc0beeb24cbdef8a8bf185"><div class="ttname"><a href="structItemPrototype.html#a8b500820accc0beeb24cbdef8a8bf185">ItemPrototype::FoodType</a></div><div class="ttdeci">uint32 FoodType</div><div class="ttdef"><b>Definition:</b> <a href="ItemPrototype_8h_source.html#l00662">ItemPrototype.h:662</a></div></div>
<div class="ttc" id="astructMapEntry_html"><div class="ttname"><a href="structMapEntry.html">MapEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01460">DBCStructure.h:1461</a></div></div>
<div class="ttc" id="astructMapEntry_html_adc919dc1d095da8c0f1624abfcca2cf6"><div class="ttname"><a href="structMapEntry.html#adc919dc1d095da8c0f1624abfcca2cf6">MapEntry::map_type</a></div><div class="ttdeci">uint32 map_type</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01464">DBCStructure.h:1464</a></div></div>
<div class="ttc" id="astructModifier_html_a263897ed5eeab39b03bc3007d8b331ec"><div class="ttname"><a href="structModifier.html#a263897ed5eeab39b03bc3007d8b331ec">Modifier::m_amount</a></div><div class="ttdeci">int32 m_amount</div><div class="ttdoc">By how much the aura should change the affected value.</div><div class="ttdef"><b>Definition:</b> <a href="SpellAuras_8h_source.html#l00048">SpellAuras.h:48</a></div></div>
<div class="ttc" id="astructPetDefaultSpellsEntry_html"><div class="ttname"><a href="structPetDefaultSpellsEntry.html">PetDefaultSpellsEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="SpellMgr_8h_source.html#l02714">SpellMgr.h:2715</a></div></div>
<div class="ttc" id="astructPetLevelInfo_html"><div class="ttname"><a href="structPetLevelInfo.html">PetLevelInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="ObjectMgr_8h_source.html#l00258">ObjectMgr.h:259</a></div></div>
<div class="ttc" id="astructPetSpell_html"><div class="ttname"><a href="structPetSpell.html">PetSpell</a></div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00087">Pet.h:88</a></div></div>
<div class="ttc" id="astructPetSpell_html_a0600418cb460fdaf8093bfa609e796c8"><div class="ttname"><a href="structPetSpell.html#a0600418cb460fdaf8093bfa609e796c8">PetSpell::state</a></div><div class="ttdeci">PetSpellState state</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00091">Pet.h:91</a></div></div>
<div class="ttc" id="astructPetSpell_html_a4c4a7d0f299ae4e2ceb146a741057032"><div class="ttname"><a href="structPetSpell.html#a4c4a7d0f299ae4e2ceb146a741057032">PetSpell::type</a></div><div class="ttdeci">PetSpellType type</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00092">Pet.h:92</a></div></div>
<div class="ttc" id="astructPetSpell_html_aa2df3539b428496ecd63b1f8e8159cae"><div class="ttname"><a href="structPetSpell.html#aa2df3539b428496ecd63b1f8e8159cae">PetSpell::active</a></div><div class="ttdeci">uint8 active</div><div class="ttdef"><b>Definition:</b> <a href="Pet_8h_source.html#l00089">Pet.h:89</a></div></div>
<div class="ttc" id="astructPosition_html"><div class="ttname"><a href="structPosition.html">Position</a></div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00330">Object.h:331</a></div></div>
<div class="ttc" id="astructPosition_html_a54a6182b5f7539295b32255808897d3f"><div class="ttname"><a href="structPosition.html#a54a6182b5f7539295b32255808897d3f">Position::y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00335">Object.h:335</a></div></div>
<div class="ttc" id="astructPosition_html_a5dc8c08d3d7209ba538ad21ba604aa44"><div class="ttname"><a href="structPosition.html#a5dc8c08d3d7209ba538ad21ba604aa44">Position::z</a></div><div class="ttdeci">float z</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00335">Object.h:335</a></div></div>
<div class="ttc" id="astructPosition_html_ab03b4a5c58b5d266e2505bffc906d21e"><div class="ttname"><a href="structPosition.html#ab03b4a5c58b5d266e2505bffc906d21e">Position::o</a></div><div class="ttdeci">float o</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00335">Object.h:335</a></div></div>
<div class="ttc" id="astructPosition_html_af684446cbf0f6d53386686283da6dcc6"><div class="ttname"><a href="structPosition.html#af684446cbf0f6d53386686283da6dcc6">Position::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition:</b> <a href="Object_8h_source.html#l00335">Object.h:335</a></div></div>
<div class="ttc" id="astructSpellEntry_html"><div class="ttname"><a href="structSpellEntry.html">SpellEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01816">DBCStructure.h:1817</a></div></div>
<div class="ttc" id="astructSpellEntry_html_a06d096af1d10fbc048c2a6f3659d480b"><div class="ttname"><a href="structSpellEntry.html#a06d096af1d10fbc048c2a6f3659d480b">SpellEntry::procCharges</a></div><div class="ttdeci">uint32 procCharges</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01852">DBCStructure.h:1852</a></div></div>
<div class="ttc" id="astructSpellEntry_html_a0fdf9afa2dbe95e2e8b2aeb31dc7dfa1"><div class="ttname"><a href="structSpellEntry.html#a0fdf9afa2dbe95e2e8b2aeb31dc7dfa1">SpellEntry::ReagentCount</a></div><div class="ttdeci">uint32 ReagentCount[MAX_SPELL_REAGENTS]</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01868">DBCStructure.h:1868</a></div></div>
<div class="ttc" id="astructSpellEntry_html_a1c912ec366db72086130df35f219f46b"><div class="ttname"><a href="structSpellEntry.html#a1c912ec366db72086130df35f219f46b">SpellEntry::Reagent</a></div><div class="ttdeci">int32 Reagent[MAX_SPELL_REAGENTS]</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01867">DBCStructure.h:1867</a></div></div>
<div class="ttc" id="astructSpellEntry_html_a1fe21cdb9e2620e112b80009131cc79f"><div class="ttname"><a href="structSpellEntry.html#a1fe21cdb9e2620e112b80009131cc79f">SpellEntry::Effect</a></div><div class="ttdeci">uint32 Effect[MAX_EFFECT_INDEX]</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01872">DBCStructure.h:1872</a></div></div>
<div class="ttc" id="astructSpellEntry_html_a6092f385a545aa33ba1e5ee28d21e92a"><div class="ttname"><a href="structSpellEntry.html#a6092f385a545aa33ba1e5ee28d21e92a">SpellEntry::Id</a></div><div class="ttdeci">uint32 Id</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01818">DBCStructure.h:1818</a></div></div>
<div class="ttc" id="astructSpellEntry_html_a800c4530cf509731e4c51d1c14e21c99"><div class="ttname"><a href="structSpellEntry.html#a800c4530cf509731e4c51d1c14e21c99">SpellEntry::StackAmount</a></div><div class="ttdeci">uint32 StackAmount</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01865">DBCStructure.h:1865</a></div></div>
<div class="ttc" id="astructSpellEntry_html_a9bc1d3daa3394463e7ce5cfb403b0a68"><div class="ttname"><a href="structSpellEntry.html#a9bc1d3daa3394463e7ce5cfb403b0a68">SpellEntry::EffectApplyAuraName</a></div><div class="ttdeci">uint32 EffectApplyAuraName[MAX_EFFECT_INDEX]</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01880">DBCStructure.h:1880</a></div></div>
<div class="ttc" id="astructSpellEntry_html_aa401405fe3221db2723b2b8e6fe48c9b"><div class="ttname"><a href="structSpellEntry.html#aa401405fe3221db2723b2b8e6fe48c9b">SpellEntry::spellLevel</a></div><div class="ttdeci">uint32 spellLevel</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01855">DBCStructure.h:1855</a></div></div>
<div class="ttc" id="astructSpellEntry_html_ab5ca60f93e4b1792578dcb5fe6b259e9"><div class="ttname"><a href="structSpellEntry.html#ab5ca60f93e4b1792578dcb5fe6b259e9">SpellEntry::HasAttribute</a></div><div class="ttdeci">bool HasAttribute(SpellAttributes attribute) const</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l01957">DBCStructure.h:1957</a></div></div>
<div class="ttc" id="astructTalentEntry_html"><div class="ttname"><a href="structTalentEntry.html">TalentEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l02159">DBCStructure.h:2160</a></div></div>
<div class="ttc" id="astructTalentEntry_html_ab9216f97d2b7c7fe0ff4336b80869b88"><div class="ttname"><a href="structTalentEntry.html#ab9216f97d2b7c7fe0ff4336b80869b88">TalentEntry::RankID</a></div><div class="ttdeci">uint32 RankID[MAX_TALENT_RANK]</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l02165">DBCStructure.h:2165</a></div></div>
<div class="ttc" id="astructTalentEntry_html_acefe6f8c0a5b3893e2a9f828d500df68"><div class="ttname"><a href="structTalentEntry.html#acefe6f8c0a5b3893e2a9f828d500df68">TalentEntry::TalentTab</a></div><div class="ttdeci">uint32 TalentTab</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l02162">DBCStructure.h:2162</a></div></div>
<div class="ttc" id="astructTalentSpellPos_html"><div class="ttname"><a href="structTalentSpellPos.html">TalentSpellPos</a></div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l02460">DBCStructure.h:2461</a></div></div>
<div class="ttc" id="astructTalentTabEntry_html"><div class="ttname"><a href="structTalentTabEntry.html">TalentTabEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l02176">DBCStructure.h:2177</a></div></div>
<div class="ttc" id="astructTalentTabEntry_html_a22ab1cf8ad05e57d91a63e3876ae2b77"><div class="ttname"><a href="structTalentTabEntry.html#a22ab1cf8ad05e57d91a63e3876ae2b77">TalentTabEntry::petTalentMask</a></div><div class="ttdeci">uint32 petTalentMask</div><div class="ttdef"><b>Definition:</b> <a href="DBCStructure_8h_source.html#l02184">DBCStructure.h:2184</a></div></div>
<div class="ttc" id="astructUnitActionBarEntry_html"><div class="ttname"><a href="structUnitActionBarEntry.html">UnitActionBarEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00894">Unit.h:895</a></div></div>
<div class="ttc" id="astructUnitActionBarEntry_html_a0615e6ad9cf5523d6dc85bd529e65f32"><div class="ttname"><a href="structUnitActionBarEntry.html#a0615e6ad9cf5523d6dc85bd529e65f32">UnitActionBarEntry::GetType</a></div><div class="ttdeci">ActiveStates GetType() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00901">Unit.h:901</a></div></div>
<div class="ttc" id="astructUnitActionBarEntry_html_afd77e2f64ec856059759d05ddf77876e"><div class="ttname"><a href="structUnitActionBarEntry.html#afd77e2f64ec856059759d05ddf77876e">UnitActionBarEntry::GetAction</a></div><div class="ttdeci">uint32 GetAction() const</div><div class="ttdef"><b>Definition:</b> <a href="Unit_8h_source.html#l00902">Unit.h:902</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_1699be727a800b1d059c6f7f2b91d2ee.html">game</a></li><li class="navelem"><a class="el" href="dir_cd88f974f65999c85b4646cf8392f257.html">Entities</a></li><li class="navelem"><a class="el" href="Pet_8cpp.html">Pet.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
