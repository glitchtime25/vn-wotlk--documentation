<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMaNGOS_WoTLK: Relations.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CMaNGOS_WoTLK
   &#160;<span id="projectnumber">0b6ed145724bbfe54f426dc34e27de563eb3bc54</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('Relations_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Relations.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Relations API for supported Entities.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="DBCStores_8h_source.html">Server/DBCStores.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Unit_8h_source.html">Entities/Unit.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Player_8h_source.html">Entities/Player.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Corpse_8h_source.html">Entities/Corpse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="GameObject_8h_source.html">Entities/GameObject.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="DynamicObject_8h_source.html">Entities/DynamicObject.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Vehicle_8h_source.html">Entities/Vehicle.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ObjectMgr_8h_source.html">Globals/ObjectMgr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Formulas_8h_source.html">Tools/Formulas.h</a>&quot;</code><br />
</div>
<p><a href="Relations_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9507760d3bb40a66b7b34280dfd09375"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="SharedDefines_8h.html#aa544c39c4535f97454397d5fb4a1ed76">ReputationRank</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Relations_8cpp.html#a9507760d3bb40a66b7b34280dfd09375">GetFactionReaction</a> (<a class="el" href="structFactionTemplateEntry.html">FactionTemplateEntry</a> const *thisTemplate, <a class="el" href="structFactionTemplateEntry.html">FactionTemplateEntry</a> const *otherTemplate)</td></tr>
<tr class="memdesc:a9507760d3bb40a66b7b34280dfd09375"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get faction template to faction tenplate reaction.  <a href="Relations_8cpp.html#a9507760d3bb40a66b7b34280dfd09375">More...</a><br /></td></tr>
<tr class="separator:a9507760d3bb40a66b7b34280dfd09375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee3d72a42a264230eb6ae11cee3d2b8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="SharedDefines_8h.html#aa544c39c4535f97454397d5fb4a1ed76">ReputationRank</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Relations_8cpp.html#a0ee3d72a42a264230eb6ae11cee3d2b8">GetFactionReaction</a> (<a class="el" href="structFactionTemplateEntry.html">FactionTemplateEntry</a> const *thisTemplate, <a class="el" href="classUnit.html">Unit</a> const *unit)</td></tr>
<tr class="memdesc:a0ee3d72a42a264230eb6ae11cee3d2b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get faction template to unit reaction.  <a href="Relations_8cpp.html#a0ee3d72a42a264230eb6ae11cee3d2b8">More...</a><br /></td></tr>
<tr class="separator:a0ee3d72a42a264230eb6ae11cee3d2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Relations API for supported Entities. </p>
<dl class="section date"><dt>Date</dt><dd>September, 2017</dd></dl>
<p>Relations API controls various interactions between entities, such as friendliness or hostility.</p>
<p>Relations API is split into three tiers:</p>
<p><b>Tier 1</b> is a direct reverse engineered gameplay logic from the game. It should never be modified with custom logic to be in sync with the client we aim to support. Each function presented here has a counterpart in client for comparision.</p>
<p><b>Tier 2</b> is a server-side extension to plug holes left by original client-side perspective. It builds up on previous tier for entities not represented client-side. All functions presented here are required to mimic the look and feel of the original API. No functions in this tier have a real client-side counterpart.</p>
<p><b>Tier 3</b> is a custom server-side convinience API for CMaNGOS. This is a stylistically relaxed set of custom wrappers and helpers for various subsystems. All functions presented in this tier are exclusive to the emulator and have no outside influence.</p>
<p>Tier 1 is implied to be "set in stone" as it comes from 1st hand source - the game itself. The only reason Tier 1 API should be ever modified is to fix possible mistakes in reverse engineered code. Any user modifications or additions to Tier 1 which are not coming from client's code should be rejected to preserve overall integrity.</p>
<p>Tiers 2 and 3 are serverside APIs and will be extended in the future as demand arises during actual rollout. </p>

<p class="definition">Definition in file <a class="el" href="Relations_8cpp_source.html">Relations.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a9507760d3bb40a66b7b34280dfd09375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9507760d3bb40a66b7b34280dfd09375">&#9670;&nbsp;</a></span>GetFactionReaction() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="SharedDefines_8h.html#aa544c39c4535f97454397d5fb4a1ed76">ReputationRank</a> GetFactionReaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFactionTemplateEntry.html">FactionTemplateEntry</a> const *&#160;</td>
          <td class="paramname"><em>thisTemplate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFactionTemplateEntry.html">FactionTemplateEntry</a> const *&#160;</td>
          <td class="paramname"><em>otherTemplate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get faction template to faction tenplate reaction. </p>
<dl class="section note"><dt>Note</dt><dd>Relations API Tier 1</dd></dl>
<p>Client-side counterpart: <code>static function (original symbol name unknown)</code> </p>

<p class="definition">Definition at line <a class="el" href="Relations_8cpp_source.html#l00108">108</a> of file <a class="el" href="Relations_8cpp_source.html">Relations.cpp</a>.</p>

<p class="reference">References <a class="el" href="DBCStructure_8h_source.html#l01021">FactionTemplateEntry::enemyFaction</a>, <a class="el" href="DBCStructure_8h_source.html#l01020">FactionTemplateEntry::enemyGroupMask</a>, <a class="el" href="DBCStructure_8h_source.html#l01016">FactionTemplateEntry::faction</a>, <a class="el" href="DBCEnums_8h_source.html#l00324">FACTION_TEMPLATE_FLAG_HATES_ALL_EXCEPT_FRIENDS</a>, <a class="el" href="DBCStructure_8h_source.html#l01017">FactionTemplateEntry::factionFlags</a>, <a class="el" href="DBCStructure_8h_source.html#l01018">FactionTemplateEntry::factionGroupMask</a>, <a class="el" href="DBCStructure_8h_source.html#l01022">FactionTemplateEntry::friendFaction</a>, <a class="el" href="DBCStructure_8h_source.html#l01019">FactionTemplateEntry::friendGroupMask</a>, <a class="el" href="Errors_8h_source.html#l00046">MANGOS_ASSERT</a>, <a class="el" href="SharedDefines_8h_source.html#l00122">REP_FRIENDLY</a>, <a class="el" href="SharedDefines_8h_source.html#l00119">REP_HOSTILE</a>, and <a class="el" href="SharedDefines_8h_source.html#l00121">REP_NEUTRAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="Relations_8cpp_source.html#l00162">GetFactionReaction()</a>, <a class="el" href="Relations_8cpp_source.html#l00299">GameObject::GetReactionTo()</a>, <a class="el" href="Relations_8cpp_source.html#l01066">Player::GetReactionTo()</a>, <a class="el" href="Relations_8cpp_source.html#l00208">Unit::GetReactionTo()</a>, <a class="el" href="Relations_8cpp_source.html#l00920">GameObject::IsEnemy()</a>, and <a class="el" href="Relations_8cpp_source.html#l00944">GameObject::IsFriend()</a>.</p>

</div>
</div>
<a id="a0ee3d72a42a264230eb6ae11cee3d2b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ee3d72a42a264230eb6ae11cee3d2b8">&#9670;&nbsp;</a></span>GetFactionReaction() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="SharedDefines_8h.html#aa544c39c4535f97454397d5fb4a1ed76">ReputationRank</a> GetFactionReaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFactionTemplateEntry.html">FactionTemplateEntry</a> const *&#160;</td>
          <td class="paramname"><em>thisTemplate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classUnit.html">Unit</a> const *&#160;</td>
          <td class="paramname"><em>unit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get faction template to unit reaction. </p>
<dl class="section note"><dt>Note</dt><dd>Relations API Tier 1</dd></dl>
<p>Client-side counterpart: <code>static CGUnit_C::UnitReaction(int factionTemplateID, const CGUnit_C *unit)</code> Faction template id was replaced with <a class="el" href="structFactionTemplateEntry.html">FactionTemplateEntry</a> ptr for performance, now caller is responsible for lookup Used as static function instead of being a static method of <a class="el" href="classUnit.html">Unit</a> class </p>

<p class="definition">Definition at line <a class="el" href="Relations_8cpp_source.html#l00162">162</a> of file <a class="el" href="Relations_8cpp_source.html">Relations.cpp</a>.</p>

<p class="reference">References <a class="el" href="DBCStructure_8h_source.html#l01016">FactionTemplateEntry::faction</a>, <a class="el" href="Relations_8cpp_source.html#l00072">Unit::GetControllingPlayer()</a>, <a class="el" href="Relations_8cpp_source.html#l00108">GetFactionReaction()</a>, <a class="el" href="Unit_8cpp_source.html#l07428">Unit::GetFactionTemplateEntry()</a>, <a class="el" href="ReputationMgr_8cpp_source.html#l00111">ReputationMgr::GetRank()</a>, <a class="el" href="Object_8h_source.html#l00524">Object::HasFlag()</a>, <a class="el" href="DBCStructure_8h_source.html#l00998">FactionEntry::HasReputation()</a>, <a class="el" href="DBCStructure_8h_source.html#l01060">FactionTemplateEntry::IsContestedGuardFaction()</a>, <a class="el" href="Errors_8h_source.html#l00046">MANGOS_ASSERT</a>, <a class="el" href="UpdateFields_8h_source.html#l00181">PLAYER_FLAGS</a>, <a class="el" href="Player_8h_source.html#l00427">PLAYER_FLAGS_CONTESTED_PVP</a>, <a class="el" href="SharedDefines_8h_source.html#l00119">REP_HOSTILE</a>, <a class="el" href="SharedDefines_8h_source.html#l00121">REP_NEUTRAL</a>, <a class="el" href="DBCStores_8cpp.html#a6f79a9658f29641b0ae27738de47d03f">sFactionStore</a>, <a class="el" href="UpdateFields_8h_source.html#l00120">UNIT_FIELD_FLAGS</a>, <a class="el" href="UpdateFields_8h_source.html#l00121">UNIT_FIELD_FLAGS_2</a>, <a class="el" href="Unit_8h_source.html#l00542">UNIT_FLAG2_IGNORE_REPUTATION</a>, and <a class="el" href="Unit_8h_source.html#l00506">UNIT_FLAG_PLAYER_CONTROLLED</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_1699be727a800b1d059c6f7f2b91d2ee.html">game</a></li><li class="navelem"><a class="el" href="dir_cd88f974f65999c85b4646cf8392f257.html">Entities</a></li><li class="navelem"><a class="el" href="Relations_8cpp.html">Relations.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
